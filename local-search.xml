<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>网络安全：工具使用</title>
    <link href="/2022/08/13/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%EF%BC%9A%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/08/13/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%EF%BC%9A%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><span id="more"></span>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Linux：22.数据库基础和MySQL安装应用</title>
    <link href="/2022/08/09/Linux%EF%BC%9A22.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E5%92%8CMySQL%E5%AE%89%E8%A3%85%E5%BA%94%E7%94%A8/"/>
    <url>/2022/08/09/Linux%EF%BC%9A22.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E5%92%8CMySQL%E5%AE%89%E8%A3%85%E5%BA%94%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>mysql</p><span id="more"></span><h1 id="数据库原理"><a href="#数据库原理" class="headerlink" title="数据库原理"></a>数据库原理</h1><h2 id="数据库分类"><a href="#数据库分类" class="headerlink" title="数据库分类"></a>数据库分类</h2><ul><li>结构化的数据：即有固定格式和有限长度的数据。例如填的表格就是结构化的数据，国籍：中华人民共和国，民族：汉，性别：男，这都叫结构化数据</li><li>非结构化的数据：非结构化的数据越来越多，就是不定长、无固定格式的数据，例如: 网页,图片文件，有时候非常大，有时候很小；例如语音，视频都是非结构化的数据</li><li>半结构化数据：比如：XML或者HTML的格式的数据</li></ul><h2 id="数据库的发展史"><a href="#数据库的发展史" class="headerlink" title="数据库的发展史"></a>数据库的发展史</h2><p>数据库与芯片,操作系统并列为计算机技术的三大件,也是企业IT系统必不可少的核心技术</p><h3 id="数据库系统发展阶段"><a href="#数据库系统发展阶段" class="headerlink" title="数据库系统发展阶段"></a>数据库系统发展阶段</h3><ul><li>萌芽阶段：文件系统</li></ul><p>​            使用磁盘文件来存储数据</p><ul><li>初级阶段：第一代数据库</li></ul><p>​            出现了网状模型、层次模型的数据库</p><ul><li>中级阶段：第二代数据库</li></ul><p>​            关系型数据库和结构化查询语言</p><ul><li>高级阶段：新一代数据库</li></ul><p>​            “关系-对象”型数据库 </p><h3 id="文件管理系统的缺点"><a href="#文件管理系统的缺点" class="headerlink" title="文件管理系统的缺点"></a>文件管理系统的缺点</h3><ul><li>编写应用程序不方便</li><li>不支持对文件的并发访问</li><li>无安全控制功能</li><li>难以按用户视图表示数据</li><li>数据间联系弱</li><li>数据冗余不可避免</li><li>应用程序依赖性</li></ul><h2 id="数据库管理系统"><a href="#数据库管理系统" class="headerlink" title="数据库管理系统"></a>数据库管理系统</h2><h3 id="相关概念"><a href="#相关概念" class="headerlink" title="相关概念"></a>相关概念</h3><ul><li>Database：数据库是数据的汇集，它以一定的组织形式存于存储介质上</li><li>DBMS：Database Management System, 是管理数据库的系统软件，它实现数据库系统的各种功能。是数据库系统的核心</li><li>DBA：Database Administrator, 负责数据库的规划、设计、协调、维护和管理等工作</li><li>Application：应用程序,指以数据库为基础的应用程序</li></ul><h3 id="数据库管理系统的优点"><a href="#数据库管理系统的优点" class="headerlink" title="数据库管理系统的优点"></a>数据库管理系统的优点</h3><ul><li>程序与数据相互独立</li><li>保证数据的安全、可靠</li><li>最大限度地保证数据的正确性</li><li>数据可以并发使用并能同时保证一致性</li><li>相互关联的数据的集合</li><li>较少的数据冗余</li></ul><h3 id="数据库管理系统的基本功能"><a href="#数据库管理系统的基本功能" class="headerlink" title="数据库管理系统的基本功能"></a>数据库管理系统的基本功能</h3><ul><li>数据定义</li><li>数据处理</li><li>数据安全</li><li>数据备份</li></ul><h3 id="各种数据库管理系统"><a href="#各种数据库管理系统" class="headerlink" title="各种数据库管理系统"></a>各种数据库管理系统</h3><h4 id="层次数据库"><a href="#层次数据库" class="headerlink" title="层次数据库"></a>层次数据库</h4><p><img src="image-20220809205845184-16600499286641.png" alt="image-20220809205845184"></p><p>分层结构由IBM在20世纪60年代开发，并在早期大型机DBMS中使用。记录的关系形成了一个树状模型。这种结构简单，但缺乏灵活性，因为这种关系仅限于一对多关系。</p><p>代表数据库：IBM IMS(信息管理系统</p><h4 id="网状数据库"><a href="#网状数据库" class="headerlink" title="网状数据库"></a>网状数据库</h4><p><img src="image-20220809212354974-16600514368202.png" alt="image-20220809212354974"></p><p>1964年通用电气GE公司的 Charles Bachman 成功地开发出世界上第一个网状数据库IDS(集成数据存储)，IDS 具有数据模式和日志的特征，只能在GE主机运行</p><h4 id="关系型数据库-RDBMS"><a href="#关系型数据库-RDBMS" class="headerlink" title="关系型数据库 RDBMS"></a>关系型数据库 RDBMS</h4><p>Relational Database Management System,关系模型最初由IBM公司的英国计算机科学家埃德加·科德(Edgar F. Codd)于1969年描述</p><p>1974年，IBM开始开发系统R，这是一个开发RDBMS原型的研究项目。</p><p>然而，第一个商业上可用的RDBMS是甲骨文，于1979年由关系软件（现为甲骨文oracle公司）发布</p><h5 id="关系统型数据库相关概念"><a href="#关系统型数据库相关概念" class="headerlink" title="关系统型数据库相关概念"></a>关系统型数据库相关概念</h5><ul><li>关系Relational ：关系就是二维表，其中：表中的行、列次序并不重要</li><li>行row：表中的每一行，又称为一条记录record </li><li>列column：表中的每一列，称为属性，字段，域field </li><li>主键Primary key：PK ,一个或多个字段的组合, 用于惟一确定一个记录的字段，一张表只有一个主键, 主键字段不能为空NULL</li><li>唯一键Unique key: 一个或多个字段的组合,用于惟一确定一个记录的字段,一张表可以有多个UK,而 且UK字段可以为NULL</li><li>域domain：属性的取值范围，如，性别只能是’男’和’女’两个值，人类的年龄只能0-150</li></ul><h5 id="常用关系数据库"><a href="#常用关系数据库" class="headerlink" title="常用关系数据库"></a>常用关系数据库</h5><ul><li>MySQL: MySQL, MariaDB, Percona Server</li><li>PostgreSQL: 简称为pgsql，EnterpriseDB</li><li>Oracle</li><li>MSSQL Server</li><li>DB2</li></ul><h3 id="数据库排名"><a href="#数据库排名" class="headerlink" title="数据库排名"></a>数据库排名</h3><figure class="highlight awk"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>db-engines.com<span class="hljs-regexp">/en/</span>ranking<br></code></pre></td></tr></table></figure><p><img src="image-20220809212726061-16600516472023.png" alt="image-20220809212726061"></p><h2 id="关系型数据库理论"><a href="#关系型数据库理论" class="headerlink" title="关系型数据库理论"></a>关系型数据库理论</h2><h3 id="实体-联系模型E-R"><a href="#实体-联系模型E-R" class="headerlink" title="实体-联系模型E-R"></a>实体-联系模型E-R</h3><p>E-R模型即实体-关系模型﹐E-R模型就是描述数据库存储数据的结构模型</p><p>对于大型公司开发项目﹐需要根据产品经理的设计﹐先使用建模工具,如:power designer ,db desinger</p><p>等这些软件来画出实体-关系模型(E-R模型)</p><ul><li>实体Entity：客观存在并可以相互区分的客观事物或抽象事件称为实体即表,在E-R图中用矩形表示</li><li>实体，把实体名写在框内</li><li>属性Attribute：实体所具有的特征或性质,描述实体里面的单个信息, 使用椭圆形表示</li><li>联系Relationship：描述了实体的属性之间的关联规则</li></ul><ol><li>实体内部的联系：指组成同一个实体内的各属性之间的联系。如职工实体中，职工号和部门经理号之间有一种关联关系</li><li>实体之间的联系：指不同实体之间的属性的联系。例：学生选课实体和学生基本信息实体之间</li><li>实体之间的联系用菱形框表示</li></ol><p>E-R 模型范例: </p><p><img src="image-20220809212925748-16600517675594.png" alt="image-20220809212925748"></p><h3 id="联系类型"><a href="#联系类型" class="headerlink" title="联系类型"></a>联系类型</h3><ul><li>一对一联系(1:1): 在表A或表B中创建一个字段﹐存储另一个表的主键值 如: 一个人只有一个身份证</li><li>一对多联系(1:n)：外键, 如: 部门和员工</li><li>多对多联系(m:n)：增加第三张表, 如: 学生和课程</li></ul><h3 id="数据的操作"><a href="#数据的操作" class="headerlink" title="数据的操作"></a>数据的操作</h3><p>开发工程师 CRUD (增加Create、查询Read或 Retrieve、更新Update、 删除Delete)</p><ul><li>数据提取：在数据集合中提取感兴趣的内容。SELECT</li><li>数据更新：变更数据库中的数据。INSERT、DELETE、UPDATE</li></ul><h3 id="数据库的正规化分析"><a href="#数据库的正规化分析" class="headerlink" title="数据库的正规化分析"></a>数据库的正规化分析</h3><p>数据库规范化，又称数据库或资料库的正规化、标准化，是数据库设计中的一系列原理和技术，以减少数据库中数据冗余，增进数据的一致性。关系模型的发明者埃德加·科德最早提出这一概念，并于1970年代初定义了第一范式、第二范式和第三范式的概念设计关系数据库时，遵从不同的规范要求，设计出合理的关系型数据库，不同的规范要求被称为不同范式，各种范式呈递次规范，越高的范式数据库冗余越小目前关系数据库有六种范式：第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、巴德斯科范式（BCNF）、第四范式(4NF）和第五范式（5NF，又称完美范式）。满足最低要求的范式是第一范式（1NF）。在第一范式的基础上进一步满足更多规范要求的称为第二范式（2NF），其余范式以次类推。一般数据库只需满足第三范式(3NF）即可</p><p>规则是死的,人是活的,所以范式是否必须遵守,要看业务需要而定</p><p>掌握范式的目的是为了在合适的场景下违反范式</p><h4 id="第一范式：1NF"><a href="#第一范式：1NF" class="headerlink" title="第一范式：1NF"></a>第一范式：1NF</h4><p>无重复的列，每一列都是不可分割的基本数据项，同一列中不能有多个值，即实体中的某个属性不能有多个值或者不能有重复的属性，确保每一列的原子性。除去同类型的字段，就是无重复的列</p><p>说明：第一范式（1NF）是对关系模式的基本要求，不满足第一范式（1NF）的数据库就不是关系数据库</p><h4 id="第二范式：2NF"><a href="#第二范式：2NF" class="headerlink" title="第二范式：2NF"></a>第二范式：2NF</h4><p>第二范式必须先满足第一范式，属性完全依赖于主键，要求表中的每个行必须可以被唯一地区分，通常为表加上每行的唯一标识主键PK，非PK的字段需要与整个PK有直接相关性,即非PK的字段不能依赖于部分主键</p><h4 id="第三范式：3NF"><a href="#第三范式：3NF" class="headerlink" title="第三范式：3NF"></a>第三范式：3NF</h4><p>满足第三范式必须先满足第二范式属性，非主键属性不依赖于其它非主键属性。第三范式要求一个数据表中不包含已在其它表中已包含的非主关键字信息，非PK的字段间不能有从属关系</p><h3 id="SQL-结构化查询语言简介"><a href="#SQL-结构化查询语言简介" class="headerlink" title="SQL 结构化查询语言简介"></a>SQL 结构化查询语言简介</h3><p>SQL：Structure Query Language,结构化查询语言是1974年由Boyce和Chamberlin提出的一个通用的、功能极强的关系性数据库语言</p><p>SQL解释器：将SQL语句解释成机器语言</p><p>数据存储协议：应用层协议，C/S</p><ul><li>S：server, 监听于套接字，接收并处理客户端的应用请求</li><li>C：Client</li></ul><p>客户端程序接口</p><ul><li>CLI</li><li>GUI</li></ul><p>应用编程接口</p><ul><li>ODBC：Open Database Connectivity</li><li>JDBC：Java Data Base Connectivity</li></ul><h1 id="MySQL安装和基本使用"><a href="#MySQL安装和基本使用" class="headerlink" title="MySQL安装和基本使用"></a>MySQL安装和基本使用</h1><h2 id="MySQL-介绍"><a href="#MySQL-介绍" class="headerlink" title="MySQL 介绍"></a>MySQL 介绍</h2><h3 id="mysql历史"><a href="#mysql历史" class="headerlink" title="mysql历史"></a>mysql历史</h3><p>MySQL的历史可以追溯到1979年，它的创始人叫作Michael Widenius，他在开发一个报表工具的时候，设计了一套API，后来他的客户要求他的API支持sql语句，他直接借助于mSQL（当时比较牛）的代码，将它集成到自己的存储引擎中。但是他总是感觉不满意，萌生了要自己做一套数据库的想法。</p><p>直到1996年，MySQL 1.0发布，Michael Widenius的大女儿的简称就是MY，Michael Widenius大概也是把MySQL当成自己的女儿一样来对待.仅仅过了几个月的时间，1996年10月MySQL 3.11.1当时发布了Solaris的版本，一个月后，linux的版本诞生，从那时候开始，MySQL慢慢的被人所接受。</p><p>1999年，Michael Widenius成立了MySQL AB公司，MySQL由个人开发转变为团队开发，2000年使用GPL协议开源。</p><p>2001年，MySQL生命中的大事发生了，那就是存储引擎InnoDB的诞生！Oracle在2005年收购了InnoDB，只不过InnoDB一直以来都只能作为第三方插件供用户选择。直到现在，MySQL可以选择的众多存储引擎中，InnoDB依然是第一选择</p><p>2008年1月，MySQL AB公司被Sun公司以10亿美金收购，MySQL数据库进入Sun时代。Sun为MySQL的发展提供了绝佳的环境，2008年11月，MySQL 5.1发布，MySQL成为了最受欢迎的小型数据库。</p><p>2009年4月，Oracle公司以74亿美元收购Sun公司，MySQL也随之进入Oracle时代。</p><p>2010年12月，MySQL 5.5发布，Oracle终于把InnoDB做成了MySQL默认的存储引擎，MySQL从此进入了辉煌时代。</p><p>然而，从那之后，Oracle对MySQL的态度渐渐发生了变化，Oracle虽然宣称MySQL依然尊少GPL协议，但却暗地里把开发人员全部换成了Oracle自己人，开源社区再也影响不了MySQL发展的脚步，真正有心做贡献的人也被拒之门外，MySQL随时都有闭源的可能……</p><p>看着自己辛苦养大的MySQL被Oracle搞成这样，Michael Widenius非常失望，决定在MySQL走向闭源前，将MySQL进行分支化，依然是使用了自己小女儿的名字MariaDB（玛莉亚DB）。</p><p>MariaDB数据库管理系统是MySQL的一个分支，主要由开源社区在维护，采用GPL授权许可 MariaDB的目的是完全兼容MySQL，包括API和命令行，使之能轻松成为MySQL的代替品。在存储引擎方面，使用XtraDB来代替MySQL的InnoDB。</p><p>MariaDB由MySQL的创始人Michael Widenius主导，由开源社区的大神们进行开发。因此，大家都认为，MariaDB拥有比MySQL更纯正的MySQL血脉。</p><p>最初的版本更新与MySQL同步，相对MySQL5以后的版本，MariaDB也有相应的5.1~5.5的版本。后来MariaDB终于摆脱了MySQL，它的版本号直接从10.0开始，以自己的步伐进行开发，当然，还是可以对MySQL完全兼容</p><p>MySQL大事记</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-number">1979</span><span class="hljs-string">年：TcX公司</span> <span class="hljs-string">Monty</span> <span class="hljs-string">Widenius，Unireg</span><br><br><span class="hljs-number">1996</span><span class="hljs-string">年：发布MySQL1.0，Solaris版本，Linux版本</span><br><br><span class="hljs-number">1999</span><span class="hljs-string">年：MySQL</span> <span class="hljs-string">AB公司，瑞典</span><br><br><span class="hljs-number">2003</span><span class="hljs-string">年：MySQL</span> <span class="hljs-number">5.0</span><span class="hljs-string">版本，提供视图、存储过程等功能</span><br><br><span class="hljs-number">2008</span><span class="hljs-string">年：Sun公司</span> <span class="hljs-string">以10亿美元收购MySQL</span><br><br><span class="hljs-number">2009</span><span class="hljs-string">年：Oracle公司以</span> <span class="hljs-number">74</span> <span class="hljs-string">亿美元收购</span> <span class="hljs-string">sun</span> <span class="hljs-string">公司</span><br><br><span class="hljs-number">2009</span><span class="hljs-string">年：Monty成立MariaDB</span> <br></code></pre></td></tr></table></figure><h3 id="MySQL系列"><a href="#MySQL系列" class="headerlink" title="MySQL系列"></a>MySQL系列</h3><h4 id="MySQL-的三大主要分支"><a href="#MySQL-的三大主要分支" class="headerlink" title="MySQL 的三大主要分支"></a>MySQL 的三大主要分支</h4><ul><li>MySQL</li><li>Mariadb</li><li>Percona Server</li></ul><h4 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h4><p><a href="https://www.mysql.com/">https://www.mysql.com/</a></p><p><a href="http://mariadb.org/">http://mariadb.org/</a></p><p><a href="https://www.percona.com/">https://www.percona.com</a></p><h4 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h4><p><a href="https://dev.mysql.com/doc/">https://dev.mysql.com/doc/</a></p><p><a href="https://mariadb.com/kb/en/">https://mariadb.com/kb/en/</a>  </p><p><a href="https://www.percona.com/software/mysql-database/percona-server">https://www.percona.com/software/mysql-database/percona-server</a> </p><h3 id="MySQL的特性"><a href="#MySQL的特性" class="headerlink" title="MySQL的特性"></a>MySQL的特性</h3><ul><li>开源免费</li><li>插件式存储引擎：也称为”表类型”，存储管理器有多种实现版本，功能和特性可能均略有差别；用户可根据需要灵活选择,Mysql5.5.5开始innoDB引擎是MYSQL默认引擎</li></ul><h2 id="mysql安装方式介绍和快速安装"><a href="#mysql安装方式介绍和快速安装" class="headerlink" title="mysql安装方式介绍和快速安装"></a>mysql安装方式介绍和快速安装</h2><h3 id="安装方式介绍"><a href="#安装方式介绍" class="headerlink" title="安装方式介绍"></a>安装方式介绍</h3><p>程序包管理器管理的程序包</p><p>源代码编译安装</p><p>二进制格式的程序包：展开至特定路径，并经过简单配置后即可使用</p><h3 id="RPM安装MySQL"><a href="#RPM安装MySQL" class="headerlink" title="RPM安装MySQL"></a>RPM安装MySQL</h3><p>CentOS 安装光盘</p><p>项目官方：<a href="https://downloads.mariadb.org/mariadb/repositories/">https://downloads.mariadb.org/mariadb/repositories/</a></p><p>国内镜像：<a href="https://mirrors.tuna.tsinghua.edu.cn/mariadb/yum/">https://mirrors.tuna.tsinghua.edu.cn/mariadb/yum/</a></p><p>​                   <a href="https://mirrors.tuna.tsinghua.edu.cn/mysql/yum/">https://mirrors.tuna.tsinghua.edu.cn/mysql/yum/</a></p><p>CentOS 8：安装光盘直接提供</p><ul><li>mysql-server：8.0</li><li>mariadb-server : 10.3</li></ul><p>CentOS 7：安装光盘直接提供</p><ul><li>mariadb-server：5.5 服务器包</li><li>mariadb 客户端工具包</li></ul><p>CentOS 6：</p><ul><li>mysql-server：5.1 服务器包</li><li>mysql 客户端工具包</li></ul><h4 id="CentOS-7-利用yum源安装MySQL5-7"><a href="#CentOS-7-利用yum源安装MySQL5-7" class="headerlink" title="CentOS 7 利用yum源安装MySQL5.7**"></a>CentOS 7 利用yum源安装MySQL5.7**</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[root@centos7 ~]#tee /etc/yum.repos.d/mysql.repo &lt;&lt;EOF<br><br>[mysql]<br><br><span class="hljs-attribute">name</span>=mysql5.7<br><br><span class="hljs-attribute">baseurl</span>=https://mirrors.tuna.tsinghua.edu.cn/mysql/yum/mysql-5.7-community-el7-<br><br>x86_64/<br><br><span class="hljs-attribute">gpgcheck</span>=0<br><br>EOF<br><br>[root@centos7 ~]#yum -y install mysql-community-server<br><br>[root@centos7 ~]#systemctl <span class="hljs-built_in">enable</span> --now mysqld<br><br>​         <br><br>[root@centos7 ~]#ss -ntl<br><br>State   Recv-Q Send-Q  Local Address:Port   <span class="hljs-built_in"> Peer </span>Address:Port      <br><br>LISTEN   0    128          *:22           *:*       <br>LISTEN   0    100      127.0.0.1:25           *:*       <br>LISTEN   0    128        [::]:22         [::]:*         <br>LISTEN   0    100        [::1]:25         [::]:*       <br>LISTEN   0    80         [::]:3306        [::]:*  <br><br>[root@centos7 ~]#mysql<br><span class="hljs-built_in">ERROR</span> 1045 (28000): Access denied <span class="hljs-keyword">for</span><span class="hljs-built_in"> user </span><span class="hljs-string">&#x27;root&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> (using password: <br><span class="hljs-literal">NO</span>)<br>[root@centos7 ~]#grep password /var/log/mysqld.log<br>2021-01-27T00:45:09.953242Z 1 [Note] A temporary password is generated <span class="hljs-keyword">for</span><br>root@localhost: pe%b#S8ah)j-<br>2021-01-27T00:46:09.491494Z 2 [Note] Access denied <span class="hljs-keyword">for</span><span class="hljs-built_in"> user </span><span class="hljs-string">&#x27;root&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span><br>(using password: <span class="hljs-literal">NO</span>)<br><span class="hljs-comment">#修改初始密码方法1</span><br>[root@centos7 ~]#mysql -uroot -p<span class="hljs-string">&#x27;pe%b#S8ah)j-&#x27;</span><br>mysql: [<span class="hljs-built_in">Warning</span>] Using a password on the command line<span class="hljs-built_in"> interface </span>can be insecure.<br>Welcome <span class="hljs-keyword">to</span> the MySQL monitor. Commands end with ; <span class="hljs-keyword">or</span> \g.<br>Your MySQL<span class="hljs-built_in"> connection </span>id is 4<span class="hljs-built_in"></span><br><span class="hljs-built_in">Server </span>version: 5.7.33<br>Copyright (c) 2000, 2021, Oracle <span class="hljs-keyword">and</span>/<span class="hljs-keyword">or</span> its affiliates.<br>Oracle is a registered trademark of Oracle Corporation <span class="hljs-keyword">and</span>/<span class="hljs-keyword">or</span> its<br>affiliates. Other names may be trademarks of their respective<br>owners.<span class="hljs-built_in"></span><br><span class="hljs-built_in">Type </span><span class="hljs-string">&#x27;help;&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;\h&#x27;</span> <span class="hljs-keyword">for</span> help.<span class="hljs-built_in"> Type </span><span class="hljs-string">&#x27;\c&#x27;</span> <span class="hljs-keyword">to</span> clear the current input statement.<br><span class="hljs-comment">#使用初始密码登录无法执行操作,需要修改密码后才可以</span><br>mysql&gt; status<br><span class="hljs-built_in">ERROR</span> 1820 (HY000): You must reset your password using ALTER<span class="hljs-built_in"> USER </span>statement <br>before executing this statement.<br><span class="hljs-comment">#修改简单密码不符合密码策略</span><br>mysql&gt; alter<span class="hljs-built_in"> user </span>root@<span class="hljs-string">&#x27;localhost&#x27;</span> identified by <span class="hljs-string">&#x27;Magedu2021&#x27;</span>;<br><span class="hljs-built_in">ERROR</span> 1819 (HY000): Your password does <span class="hljs-keyword">not</span> satisfy the current<span class="hljs-built_in"> policy </span><br>requirements<br><span class="hljs-comment">#修改为复杂密码</span><br>mysql&gt; alter<span class="hljs-built_in"> user </span>root@<span class="hljs-string">&#x27;localhost&#x27;</span> identified by <span class="hljs-string">&#x27;Magedu0!&#x27;</span>;<br>Query OK, 0 rows affected (0.00 sec)<br>mysql&gt; status<br>--------------<br>mysql Ver 14.14 Distrib 5.7.33, <span class="hljs-keyword">for</span> Linux (x86_64) using EditLine wrapper<span class="hljs-built_in"></span><br><span class="hljs-built_in">Connection </span>id: 4<br>Current database: <br>Current user: root@localhost<br>SSL: <span class="hljs-keyword">Not</span> <span class="hljs-keyword">in</span> use<br>Current pager: stdout<br>Using outfile: <span class="hljs-string">&#x27;&#x27;</span><br>Using delimiter: ;<span class="hljs-built_in"></span><br><span class="hljs-built_in">Server </span>version: 5.7.33<br>Protocol version: 10<br>Connection: Localhost via UNIX socket<span class="hljs-built_in"></span><br><span class="hljs-built_in">Server </span>characterset: latin1<br>Db     characterset: latin1<span class="hljs-built_in"></span><br><span class="hljs-built_in">Client </span>characterset: utf8<br>Conn. characterset: utf8<br>UNIX socket: /var/lib/mysql/mysql.sock<br><br>Uptime: 3 min 38 sec<br>Threads: 1 Questions: 8 Slow queries: 0 Opens: 106 Flush tables: 1 Open <br>tables: 99 Queries per second avg: 0.036<br>--------------<br>mysql&gt; exit<br><span class="hljs-comment">#修改初始密码方法2</span><br>[root@centos7 ~]#mysqladmin -uroot -p<span class="hljs-string">&#x27;pe%b#S8ah)j-&#x27;</span> password <span class="hljs-string">&#x27;Magedu0!&#x27;</span><br>mysqladmin: [<span class="hljs-built_in">Warning</span>] Using a password on the command line<span class="hljs-built_in"> interface </span>can be <br>insecure.<br>Warning: Since password will be sent <span class="hljs-keyword">to</span><span class="hljs-built_in"> server </span><span class="hljs-keyword">in</span> plain text, use ssl<span class="hljs-built_in"> connection </span><br><span class="hljs-keyword">to</span> ensure password safety.<br></code></pre></td></tr></table></figure><h4 id="CentOS-7-利用yum源安装Mariadb"><a href="#CentOS-7-利用yum源安装Mariadb" class="headerlink" title="CentOS 7 利用yum源安装Mariadb"></a>CentOS 7 利用yum源安装Mariadb</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//m</span>ariadb.org<span class="hljs-regexp">/download/</span><span class="hljs-comment">#mariadb-repositories</span><br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment">#创建yum仓库配置文件</span><br><br>[<span class="hljs-string">root@centos7</span> <span class="hljs-string">~</span>]<span class="hljs-comment">#cat /etc/yum.repos.d/mariadb.repo </span><br><br><span class="hljs-comment"># MariaDB 10.5 CentOS repository list - created 2021-01-27 07:45 UTC</span><br><br><span class="hljs-comment"># https://mariadb.org/download/</span><br><br>[<span class="hljs-string">mariadb</span>]<br><br><span class="hljs-string">name</span> <span class="hljs-string">=</span> <span class="hljs-string">MariaDB</span><br><br><span class="hljs-string">baseurl</span> <span class="hljs-string">=</span> <span class="hljs-string">https://mirrors.nju.edu.cn/mariadb/yum/10.5/centos7-amd64</span><br><br><span class="hljs-string">gpgkey=https://mirrors.nju.edu.cn/mariadb/yum/RPM-GPG-KEY-MariaDB</span><br><br><span class="hljs-string">gpgcheck=1</span><br><br>[<span class="hljs-string">root@centos7</span> <span class="hljs-string">~</span>]<span class="hljs-comment">#yum install MariaDB-server -y </span><br><br>[<span class="hljs-string">root@centos7</span> <span class="hljs-string">~</span>]<span class="hljs-comment">#systemctl enable --now mariadb.service</span><br><br>[<span class="hljs-string">root@centos7</span> <span class="hljs-string">~</span>]<span class="hljs-comment">#mysql</span><br><br><span class="hljs-string">Welcome</span> <span class="hljs-string">to</span> <span class="hljs-string">the</span> <span class="hljs-string">MariaDB</span> <span class="hljs-string">monitor.</span> <span class="hljs-string">Commands</span> <span class="hljs-string">end</span> <span class="hljs-string">with</span> <span class="hljs-string">;</span> <span class="hljs-string">or</span> <span class="hljs-string">\g.</span><br><br><span class="hljs-string">Your</span> <span class="hljs-string">MariaDB</span> <span class="hljs-string">connection</span> <span class="hljs-string">id</span> <span class="hljs-string">is</span> <span class="hljs-number">4</span><br><br><span class="hljs-attr">Server version:</span> <span class="hljs-number">10.5</span><span class="hljs-number">.8</span><span class="hljs-string">-MariaDB</span> <span class="hljs-string">MariaDB</span> <span class="hljs-string">Server</span><br><br><span class="hljs-string">Copyright</span> <span class="hljs-string">(c)</span> <span class="hljs-number">2000</span><span class="hljs-string">,</span> <span class="hljs-number">2018</span><span class="hljs-string">,</span> <span class="hljs-string">Oracle,</span> <span class="hljs-string">MariaDB</span> <span class="hljs-string">Corporation</span> <span class="hljs-string">Ab</span> <span class="hljs-string">and</span> <span class="hljs-string">others.</span><br><br><span class="hljs-string">Type</span> <span class="hljs-string">&#x27;help;&#x27;</span> <span class="hljs-string">or</span> <span class="hljs-string">&#x27;\h&#x27;</span> <span class="hljs-string">for</span> <span class="hljs-string">help.</span> <span class="hljs-string">Type</span> <span class="hljs-string">&#x27;\c&#x27;</span> <span class="hljs-string">to</span> <span class="hljs-string">clear</span> <span class="hljs-string">the</span> <span class="hljs-string">current</span> <span class="hljs-string">input</span> <span class="hljs-string">statement.</span><br><br><span class="hljs-string">MariaDB</span> [<span class="hljs-string">(none)</span>]<span class="hljs-string">&gt;</span> <span class="hljs-string">status</span><br><br><span class="hljs-string">--------------</span><br><br><span class="hljs-string">mysql</span> <span class="hljs-string">Ver</span> <span class="hljs-number">15.1</span> <span class="hljs-string">Distrib</span> <span class="hljs-number">10.5</span><span class="hljs-number">.8</span><span class="hljs-string">-MariaDB,</span> <span class="hljs-string">for</span> <span class="hljs-string">Linux</span> <span class="hljs-string">(x86_64)</span> <span class="hljs-string">using</span> <span class="hljs-string">readline</span> <span class="hljs-number">5.1</span><br><br><span class="hljs-attr">Connection id:</span> <span class="hljs-number">4</span><br><br><span class="hljs-attr">Current database:</span> <br><br><span class="hljs-attr">Current user:</span> <span class="hljs-string">root@localhost</span><br><br><span class="hljs-attr">SSL:</span> <span class="hljs-string">Not</span> <span class="hljs-string">in</span> <span class="hljs-string">use</span><br><br><span class="hljs-attr">Current pager:</span> <span class="hljs-string">stdout</span><br><br><span class="hljs-attr">Using outfile:</span> <span class="hljs-string">&#x27;&#x27;</span><br><br><span class="hljs-attr">Using delimiter:</span> <span class="hljs-string">;</span><br><br><span class="hljs-attr">Server:</span> <span class="hljs-string">MariaDB</span><br><br><span class="hljs-attr">Server version:</span> <span class="hljs-number">10.5</span><span class="hljs-number">.8</span><span class="hljs-string">-MariaDB</span> <span class="hljs-string">MariaDB</span> <span class="hljs-string">Server</span><br><br><span class="hljs-attr">Protocol version:</span> <span class="hljs-number">10</span><br><br><span class="hljs-attr">Connection:</span> <span class="hljs-string">Localhost</span> <span class="hljs-string">via</span> <span class="hljs-string">UNIX</span> <span class="hljs-string">socket</span><br><br><span class="hljs-attr">Server characterset:</span> <span class="hljs-string">latin1</span><br><br><span class="hljs-attr">Db   characterset:</span> <span class="hljs-string">latin1</span><br><br><span class="hljs-attr">Client characterset:</span> <span class="hljs-string">utf8</span><br><br><span class="hljs-attr">Conn. characterset:</span> <span class="hljs-string">utf8</span><br><br><span class="hljs-attr">UNIX socket:</span> <span class="hljs-string">/var/lib/mysql/mysql.sock</span><br><br><span class="hljs-attr">Uptime:</span> <span class="hljs-number">2</span> <span class="hljs-string">min</span> <span class="hljs-number">43</span> <span class="hljs-string">sec</span><br><br><span class="hljs-attr">Threads: 2 Questions: 8 Slow queries: 0 Opens: 16 Open tables:</span> <span class="hljs-number">10</span> <span class="hljs-string">Queries</span> <br><br><span class="hljs-attr">per second avg:</span> <span class="hljs-number">0.049</span><br><br><span class="hljs-string">--------------</span><br><br><span class="hljs-string">MariaDB</span> [<span class="hljs-string">(none)</span>]<span class="hljs-string">&gt;</span><br></code></pre></td></tr></table></figure><h4 id="Ubuntu-利用默认仓库安装-MySQL-5-7"><a href="#Ubuntu-利用默认仓库安装-MySQL-5-7" class="headerlink" title="Ubuntu 利用默认仓库安装 MySQL 5.7"></a>Ubuntu 利用默认仓库安装 MySQL 5.7</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">root@ubuntu1804</span> <span class="hljs-string">~</span>]<span class="hljs-comment">#apt install mysql-server</span><br><br>[<span class="hljs-string">root@ubuntu1804</span> <span class="hljs-string">~</span>]<span class="hljs-comment">#systemctl status mysql.service </span><br><br> <span class="hljs-string">mysql.service</span> <span class="hljs-bullet">-</span> <span class="hljs-string">MySQL</span> <span class="hljs-string">Community</span> <span class="hljs-string">Server</span><br><br>  <span class="hljs-attr">Loaded:</span> <span class="hljs-string">loaded</span> <span class="hljs-string">(/lib/systemd/system/mysql.service;</span> <span class="hljs-string">enabled;</span> <span class="hljs-attr">vendor preset:</span> <br><br><span class="hljs-string">enabled)</span><br><br>  <span class="hljs-attr">Active:</span> <span class="hljs-string">active</span> <span class="hljs-string">(running)</span> <span class="hljs-string">since</span> <span class="hljs-string">Wed</span> <span class="hljs-number">2021-01-27 15:41:33 </span><span class="hljs-string">CST;</span> <span class="hljs-string">10min</span> <span class="hljs-string">ago</span><br><br> <span class="hljs-attr">Main PID:</span> <span class="hljs-number">2115</span> <span class="hljs-string">(mysqld)</span><br><br>  <span class="hljs-attr">Tasks:</span> <span class="hljs-number">28</span> <span class="hljs-string">(limit:</span> <span class="hljs-number">2290</span><span class="hljs-string">)</span><br><br>  <span class="hljs-attr">CGroup:</span> <span class="hljs-string">/system.slice/mysql.service</span><br><br>     <span class="hljs-string">└─2115</span> <span class="hljs-string">/usr/sbin/mysqld</span> <span class="hljs-string">--daemonize</span> <span class="hljs-string">--pid-file=/run/mysqld/mysqld.pid</span><br><br><span class="hljs-string">Jan</span> <span class="hljs-number">27</span> <span class="hljs-number">15</span><span class="hljs-string">:41:33</span> <span class="hljs-string">ubuntu1804.magedu.org</span> <span class="hljs-string">systemd[1]:</span> <span class="hljs-string">Starting</span> <span class="hljs-string">MySQL</span> <span class="hljs-string">Community</span> <br><br><span class="hljs-string">Server...</span><br><br><span class="hljs-string">Jan</span> <span class="hljs-number">27</span> <span class="hljs-number">15</span><span class="hljs-string">:41:33</span> <span class="hljs-string">ubuntu1804.magedu.org</span> <span class="hljs-string">systemd[1]:</span> <span class="hljs-string">Started</span> <span class="hljs-string">MySQL</span> <span class="hljs-string">Community</span> <br><br><span class="hljs-string">Server.</span><br><br>[<span class="hljs-string">root@ubuntu1804</span> <span class="hljs-string">~</span>]<span class="hljs-comment">#mysql</span><br><br><span class="hljs-string">Welcome</span> <span class="hljs-string">to</span> <span class="hljs-string">the</span> <span class="hljs-string">MySQL</span> <span class="hljs-string">monitor.</span> <span class="hljs-string">Commands</span> <span class="hljs-string">end</span> <span class="hljs-string">with</span> <span class="hljs-string">;</span> <span class="hljs-string">or</span> <span class="hljs-string">\g.</span><br><br><span class="hljs-string">Your</span> <span class="hljs-string">MySQL</span> <span class="hljs-string">connection</span> <span class="hljs-string">id</span> <span class="hljs-string">is</span> <span class="hljs-number">3</span><br><br><span class="hljs-attr">Server version:</span> <span class="hljs-number">5.7</span><span class="hljs-number">.32</span><span class="hljs-string">-0ubuntu0.18.04.1</span> <span class="hljs-string">(Ubuntu)</span><br><br><span class="hljs-string">Copyright</span> <span class="hljs-string">(c)</span> <span class="hljs-number">2000</span><span class="hljs-string">,</span> <span class="hljs-number">2020</span><span class="hljs-string">,</span> <span class="hljs-string">Oracle</span> <span class="hljs-string">and/or</span> <span class="hljs-string">its</span> <span class="hljs-string">affiliates.</span> <span class="hljs-string">All</span> <span class="hljs-string">rights</span> <span class="hljs-string">reserved.</span><br><br><span class="hljs-string">Oracle</span> <span class="hljs-string">is</span> <span class="hljs-string">a</span> <span class="hljs-string">registered</span> <span class="hljs-string">trademark</span> <span class="hljs-string">of</span> <span class="hljs-string">Oracle</span> <span class="hljs-string">Corporation</span> <span class="hljs-string">and/or</span> <span class="hljs-string">its</span><br><br><span class="hljs-string">affiliates.</span> <span class="hljs-string">Other</span> <span class="hljs-string">names</span> <span class="hljs-string">may</span> <span class="hljs-string">be</span> <span class="hljs-string">trademarks</span> <span class="hljs-string">of</span> <span class="hljs-string">their</span> <span class="hljs-string">respective</span><br><br><span class="hljs-string">owners.</span><br><br><span class="hljs-string">Type</span> <span class="hljs-string">&#x27;help;&#x27;</span> <span class="hljs-string">or</span> <span class="hljs-string">&#x27;\h&#x27;</span> <span class="hljs-string">for</span> <span class="hljs-string">help.</span> <span class="hljs-string">Type</span> <span class="hljs-string">&#x27;\c&#x27;</span> <span class="hljs-string">to</span> <span class="hljs-string">clear</span> <span class="hljs-string">the</span> <span class="hljs-string">current</span> <span class="hljs-string">input</span> <span class="hljs-string">statement.</span><br><br><span class="hljs-string">mysql&gt;</span> <span class="hljs-string">status</span><br><br><span class="hljs-string">--------------</span><br><br><span class="hljs-string">mysql</span> <span class="hljs-string">Ver</span> <span class="hljs-number">14.14</span> <span class="hljs-string">Distrib</span> <span class="hljs-number">5.7</span><span class="hljs-number">.32</span><span class="hljs-string">,</span> <span class="hljs-string">for</span> <span class="hljs-string">Linux</span> <span class="hljs-string">(x86_64)</span> <span class="hljs-string">using</span> <span class="hljs-string">EditLine</span> <span class="hljs-string">wrapper</span><br><br><span class="hljs-attr">Connection id:</span> <span class="hljs-number">3</span><br><br><span class="hljs-attr">Current database:</span> <br><br><span class="hljs-attr">Current user:</span> <span class="hljs-string">root@localhost</span><br><br><span class="hljs-attr">SSL:</span> <span class="hljs-string">Not</span> <span class="hljs-string">in</span> <span class="hljs-string">use</span><br><br><span class="hljs-attr">Current pager:</span> <span class="hljs-string">stdout</span><br><br><span class="hljs-attr">Using outfile:</span> <span class="hljs-string">&#x27;&#x27;</span><br><br><span class="hljs-attr">Using delimiter:</span> <span class="hljs-string">;</span><br><br><span class="hljs-attr">Server version:</span> <span class="hljs-number">5.7</span><span class="hljs-number">.32</span><span class="hljs-string">-0ubuntu0.18.04.1</span> <span class="hljs-string">(Ubuntu)</span><br><br><span class="hljs-attr">Protocol version:</span> <span class="hljs-number">10</span><br><br><span class="hljs-attr">Connection:</span> <span class="hljs-string">Localhost</span> <span class="hljs-string">via</span> <span class="hljs-string">UNIX</span> <span class="hljs-string">socket</span><br><br><span class="hljs-attr">Server characterset:</span> <span class="hljs-string">latin1</span><br><br><span class="hljs-attr">Db   characterset:</span> <span class="hljs-string">latin1</span><br><br><span class="hljs-attr">Client characterset:</span> <span class="hljs-string">utf8</span><br><br><span class="hljs-attr">Conn. characterset:</span> <span class="hljs-string">utf8</span><br><br><span class="hljs-attr">UNIX socket:</span> <span class="hljs-string">/var/run/mysqld/mysqld.sock</span><br><br><span class="hljs-attr">Uptime:</span> <span class="hljs-number">10</span> <span class="hljs-string">min</span> <span class="hljs-number">43</span> <span class="hljs-string">sec</span><br><br><span class="hljs-attr">Threads: 1 Questions: 10 Slow queries: 0 Opens: 105 Flush tables:</span> <span class="hljs-number">1</span> <span class="hljs-string">Open</span> <br><br><span class="hljs-attr">tables: 98 Queries per second avg:</span> <span class="hljs-number">0.015</span><br><br><span class="hljs-string">--------------</span><br></code></pre></td></tr></table></figure><h3 id="初始化脚本提高安全性"><a href="#初始化脚本提高安全性" class="headerlink" title="初始化脚本提高安全性"></a><strong>初始化脚本提高安全性</strong></h3><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xquery">运行脚本：mysql_secure_installation<br><br>设置数据库管理<span class="hljs-built_in">员root</span>口令<br><br>禁<span class="hljs-built_in">止root</span>远程登录<br><br>删除anonymous用户帐号<br><br>删除test数据库<br></code></pre></td></tr></table></figure><p>针对MySQL5.6前版本进行安全加固</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br></pre></td><td class="code"><pre><code class="hljs applescript">root@centos7 ~]<span class="hljs-comment">#mysql</span><br><br>Welcome <span class="hljs-keyword">to</span> <span class="hljs-keyword">the</span> MySQL monitor. Commands <span class="hljs-keyword">end</span> <span class="hljs-keyword">with</span> ; <span class="hljs-keyword">or</span> \g.<br><br>Your MySQL connection <span class="hljs-built_in">id</span> <span class="hljs-keyword">is</span> <span class="hljs-number">2</span><br><br>Server <span class="hljs-built_in">version</span>: <span class="hljs-number">5.6</span><span class="hljs-number">.51</span> MySQL Community Server (GPL)<br><br>Copyright (c) <span class="hljs-number">2000</span>, <span class="hljs-number">2021</span>, Oracle <span class="hljs-keyword">and</span>/<span class="hljs-keyword">or</span> <span class="hljs-keyword">its</span> affiliates. All rights reserved.<br><br>Oracle <span class="hljs-keyword">is</span> a registered trademark <span class="hljs-keyword">of</span> Oracle Corporation <span class="hljs-keyword">and</span>/<span class="hljs-keyword">or</span> <span class="hljs-keyword">its</span><br><br>affiliates. Other names may be trademarks <span class="hljs-keyword">of</span> their respective<br><br>owners.<br><br>Type &#x27;help;&#x27; <span class="hljs-keyword">or</span> &#x27;\h&#x27; <span class="hljs-keyword">for</span> help. Type &#x27;\c&#x27; <span class="hljs-keyword">to</span> clear <span class="hljs-keyword">the</span> current input statement.<br><br>mysql&gt; show databases;<br><br>+<span class="hljs-comment">--------------------+</span><br><br>| Database      |<br><br>+<span class="hljs-comment">--------------------+</span><br><br>| information_schema |<br><br>| mysql       |<br><br>| performance_schema |<br><br>+<span class="hljs-comment">--------------------+ </span><br><br><span class="hljs-number">3</span> rows <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>mysql&gt; select user,host <span class="hljs-keyword">from</span> mysql.user;<br><br>+<span class="hljs-comment">------+--------------------------+</span><br><br>| user | host           |<br><br>+<span class="hljs-comment">------+--------------------------+</span><br><br>| root | <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>        |<br><br>| root | ::<span class="hljs-number">1</span>           |<br><br>|   | centos7.wangxiaochun.com |<br><br>| root | centos7.wangxiaochun.com |<br><br>|   | localhost        |<br><br>| root | localhost        |<br><br>+<span class="hljs-comment">------+--------------------------+ </span><br><br><span class="hljs-number">6</span> rows <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>mysql&gt; <span class="hljs-keyword">exit</span><br><br>Bye<br><br>[root@centos7 ~]<span class="hljs-comment">#</span><br><br>[root@centos7 ~]<span class="hljs-comment">#mysql -uxxx </span><br><br>Welcome <span class="hljs-keyword">to</span> <span class="hljs-keyword">the</span> MySQL monitor. Commands <span class="hljs-keyword">end</span> <span class="hljs-keyword">with</span> ; <span class="hljs-keyword">or</span> \g.<br><br>Your MySQL connection <span class="hljs-built_in">id</span> <span class="hljs-keyword">is</span> <span class="hljs-number">3</span><br><br>Server <span class="hljs-built_in">version</span>: <span class="hljs-number">5.6</span><span class="hljs-number">.51</span> MySQL Community Server (GPL)<br><br>Copyright (c) <span class="hljs-number">2000</span>, <span class="hljs-number">2021</span>, Oracle <span class="hljs-keyword">and</span>/<span class="hljs-keyword">or</span> <span class="hljs-keyword">its</span> affiliates. All rights reserved.<br><br>Oracle <span class="hljs-keyword">is</span> a registered trademark <span class="hljs-keyword">of</span> Oracle Corporation <span class="hljs-keyword">and</span>/<span class="hljs-keyword">or</span> <span class="hljs-keyword">its</span><br><br>affiliates. Other names may be trademarks <span class="hljs-keyword">of</span> their respective<br><br>owners.<br><br>Type &#x27;help;&#x27; <span class="hljs-keyword">or</span> &#x27;\h&#x27; <span class="hljs-keyword">for</span> help. Type &#x27;\c&#x27; <span class="hljs-keyword">to</span> clear <span class="hljs-keyword">the</span> current input statement.<br><br>mysql&gt; status<br><br><span class="hljs-comment">--------------</span><br><br>mysql Ver <span class="hljs-number">14.14</span> Distrib <span class="hljs-number">5.6</span><span class="hljs-number">.51</span>, <span class="hljs-keyword">for</span> Linux (x86_64) using EditLine wrapper<br><br>Connection <span class="hljs-built_in">id</span>: <span class="hljs-number">3</span><br><br>Current database: <br><br>Current user: xxx@localhost<br><br>SSL: Not <span class="hljs-keyword">in</span> use<br><br>Current pager: stdout<br><br>Using outfile: &#x27;&#x27;<br><br>Using delimiter: ;<br><br>Server <span class="hljs-built_in">version</span>: <span class="hljs-number">5.6</span><span class="hljs-number">.51</span> MySQL Community Server (GPL)<br><br>Protocol <span class="hljs-built_in">version</span>: <span class="hljs-number">10</span><br><br>Connection: Localhost via UNIX socket<br><br>Server characterset: latin1<br><br>Db   characterset: latin1<br><br>Client characterset: utf8<br><br>Conn. characterset: utf8<br><br>UNIX socket: /var/lib/mysql/mysql.sock<br><br>Uptime: <span class="hljs-number">5</span> min <span class="hljs-number">2</span> sec<br><br>Threads: <span class="hljs-number">1</span> Questions: <span class="hljs-number">11</span> Slow queries: <span class="hljs-number">0</span> Opens: <span class="hljs-number">67</span> Flush tables: <span class="hljs-number">1</span> Open <br><br>tables: <span class="hljs-number">60</span> Queries per <span class="hljs-keyword">second</span> avg: <span class="hljs-number">0.036</span><br><br><span class="hljs-comment">--------------</span><br><br>mysql&gt; <span class="hljs-keyword">exit</span><br><br>Bye<br><br>[root@centos7 ~]<span class="hljs-comment">#file `which mysql_secure_installation `</span><br><br>/usr/bin/mysql_secure_installation: Perl <span class="hljs-keyword">script</span>, ASCII <span class="hljs-built_in">text</span> executable<br><br>[root@centos7 ~]<span class="hljs-comment">#mysql_secure_installation </span><br><br>NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MySQL<br><br>   SERVERS IN PRODUCTION USE! PLEASE READ EACH STEP CAREFULLY!<br><br>In order <span class="hljs-keyword">to</span> <span class="hljs-built_in">log</span> <span class="hljs-keyword">into</span> MySQL <span class="hljs-keyword">to</span> secure <span class="hljs-keyword">it</span>, we&#x27;ll need <span class="hljs-keyword">the</span> current<br><br>password <span class="hljs-keyword">for</span> <span class="hljs-keyword">the</span> root user. If you&#x27;ve just installed MySQL, <span class="hljs-keyword">and</span><br><br>you haven&#x27;t <span class="hljs-keyword">set</span> <span class="hljs-keyword">the</span> root password yet, <span class="hljs-keyword">the</span> password will be blank,<br><br>so you should just press enter here.<br><br>Enter current password <span class="hljs-keyword">for</span> root (enter <span class="hljs-keyword">for</span> none): <br><br>OK, successfully used password, moving <span class="hljs-keyword">on</span>...<br><br>Setting <span class="hljs-keyword">the</span> root password ensures <span class="hljs-keyword">that</span> nobody can <span class="hljs-built_in">log</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">the</span> MySQL<br><br>root user <span class="hljs-keyword">without</span> <span class="hljs-keyword">the</span> proper authorisation.<br><br>Set root password? [Y/n] y<br><br>New password: <br><br>Re-enter new password: <br><br>Password updated successfully!<br><br>Reloading privilege tables..<br><br> ... Success!<br><br>By default, a MySQL installation has an anonymous user, allowing anyone<br><br><span class="hljs-keyword">to</span> <span class="hljs-built_in">log</span> <span class="hljs-keyword">into</span> MySQL <span class="hljs-keyword">without</span> having <span class="hljs-keyword">to</span> have a user account created <span class="hljs-keyword">for</span><br><br>them. This <span class="hljs-keyword">is</span> intended only <span class="hljs-keyword">for</span> testing, <span class="hljs-keyword">and</span> <span class="hljs-keyword">to</span> make <span class="hljs-keyword">the</span> installation<br><br>go a bit smoother. You should remove them <span class="hljs-keyword">before</span> moving <span class="hljs-keyword">into</span> a<br><br>production environment.<br><br>Remove anonymous users? [Y/n] y<br><br> ... Success!<br><br>Normally, root should only be allowed <span class="hljs-keyword">to</span> connect <span class="hljs-keyword">from</span> &#x27;localhost&#x27;. This<br><br>ensures <span class="hljs-keyword">that</span> someone cannot guess <span class="hljs-keyword">at</span> <span class="hljs-keyword">the</span> root password <span class="hljs-keyword">from</span> <span class="hljs-keyword">the</span> network.<br><br>Disallow root login remotely? [Y/n] y<br><br> ... Success!<br><br>By default, MySQL comes <span class="hljs-keyword">with</span> a database named &#x27;test&#x27; <span class="hljs-keyword">that</span> anyone can<br><br>access. This <span class="hljs-keyword">is</span> also intended only <span class="hljs-keyword">for</span> testing, <span class="hljs-keyword">and</span> should be removed<br><br><span class="hljs-keyword">before</span> moving <span class="hljs-keyword">into</span> a production environment.<br><br>Remove test database <span class="hljs-keyword">and</span> access <span class="hljs-keyword">to</span> <span class="hljs-keyword">it</span>? [Y/n] y<br><br>- Dropping test database...<br><br>ERROR <span class="hljs-number">1008</span> (HY000) <span class="hljs-keyword">at</span> line <span class="hljs-number">1</span>: Can&#x27;t drop database &#x27;test&#x27;; database doesn&#x27;t exist<br><br> ... Failed! Not critical, keep moving...<br><br>- Removing privileges <span class="hljs-keyword">on</span> test database...<br><br> ... Success!<br><br>Reloading <span class="hljs-keyword">the</span> privilege tables will ensure <span class="hljs-keyword">that</span> all changes made so far<br><br>will take effect immediately.<br><br>Reload privilege tables now? [Y/n] y<br><br> ... Success!<br><br>All done! If you&#x27;ve completed all <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">above</span> steps, your MySQL<br><br>installation should now be secure.<br><br>Thanks <span class="hljs-keyword">for</span> using MySQL!<br><br>Cleaning up...<br><br>[root@centos7 ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><h2 id="MySQL-组成和常用工具"><a href="#MySQL-组成和常用工具" class="headerlink" title="MySQL 组成和常用工具"></a><strong>MySQL</strong> <strong>组成和常用工具</strong></h2><h3 id="客户端程序"><a href="#客户端程序" class="headerlink" title="客户端程序"></a><strong>客户端程序</strong></h3><ul><li>mysql: 基于mysql协议交互式或非交互式的CLI工具</li><li>mysqldump：备份工具，基于mysql协议向mysqld发起查询请求，并将查得的所有数据转换成</li><li>insert等写操作语句保存文本文件中</li><li>mysqladmin：基于mysql协议管理mysqld</li><li>mysqlimport：数据导入工具</li></ul><p>MyISAM存储引擎的管理工具：</p><ul><li>myisamchk：检查MyISAM库</li><li>myisampack：打包MyISAM表，只读</li></ul><h3 id="服务器端程序"><a href="#服务器端程序" class="headerlink" title="服务器端程序"></a><strong>服务器端程序</strong></h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ada">mysqld_safe<br><br>mysqld<br><br>mysqld_multi 多实例 ，示例：mysqld_multi <span class="hljs-comment">--example</span><br></code></pre></td></tr></table></figure><h3 id="用户账号"><a href="#用户账号" class="headerlink" title="用户账号"></a><strong>用户账号</strong></h3><p>mysql用户账号由两部分组成：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-string">&#x27;USERNAME&#x27;</span>@<span class="hljs-string">&#x27;HOST&#x27;</span><br><br><span class="hljs-symbol">wang@</span><span class="hljs-string">&#x27;10.0.0.100&#x27;</span><br><br><span class="hljs-symbol">wang@</span><span class="hljs-string">&#x27;10.0.0.%&#x27;</span><br><br><span class="hljs-symbol">wang@</span><span class="hljs-string">&#x27;%</span><br></code></pre></td></tr></table></figure><p>说明：</p><p>HOST限制此用户可通过哪些远程主机连接mysql服务器</p><p>支持使用通配符：</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-meta">%</span> 匹配任意长度的任意字符,相当于shell中*, 示例: <span class="hljs-number">172.16</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">255.255</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span> 或 <span class="hljs-number">172.16</span>.<span class="hljs-meta">%</span>.<span class="hljs-meta">%</span><br><br>_ 匹配任意单个字符,相当于shell中? <br></code></pre></td></tr></table></figure><h3 id="mysql-客户端命令"><a href="#mysql-客户端命令" class="headerlink" title="mysql 客户端命令"></a><strong>mysql</strong> <strong>客户端命令</strong></h3><h4 id="mysql-运行命令类型"><a href="#mysql-运行命令类型" class="headerlink" title="mysql 运行命令类型"></a><strong>mysql</strong> <strong>运行命令类型</strong></h4><p>客户端命令：本地执行，每个命令都完整形式和简写格式</p><p>查看版本：</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@centos8 ~]<span class="hljs-comment">#mysql -V</span><br><br>mysql Ver <span class="hljs-number">8.0</span><span class="hljs-number">.21</span> <span class="hljs-keyword">for</span> Linux <span class="hljs-literal">on</span> x86_64 (Source distribution)<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">\h, <span class="hljs-built_in">help</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">\u，use</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">\s，status</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">\!，system</span><br></code></pre></td></tr></table></figure><p>服务端命令：通过mysql协议发往服务器执行并取回结果，命令末尾都必须使用命令结束符号，默</p><p>认为分号</p><p>#示例：</p><p>mysql&gt;SELECT VERSION();</p><h4 id="mysql-使用模式"><a href="#mysql-使用模式" class="headerlink" title="mysql 使用模式"></a><strong>mysql</strong> <strong>使用模式</strong></h4><ul><li>交互模式</li><li>脚本模式：</li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs gradle"> mysql -uUSERNAME -pPASSWORD &lt; <span class="hljs-regexp">/path/</span>somefile.sql<br><br>cat <span class="hljs-regexp">/path/</span>somefile.sql | mysql -uUSERNAME -pPASSWORD<br><br> mysql&gt;<span class="hljs-keyword">source</span>  <span class="hljs-regexp">/path/</span><span class="hljs-keyword">from</span>/somefile.sql<br><br><br></code></pre></td></tr></table></figure><h4 id="mysql-命令使用格式"><a href="#mysql-命令使用格式" class="headerlink" title="mysql****命令使用格式"></a><strong>mysql****命令使用格式</strong></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">mysql <span class="hljs-selector-attr">[OPTIONS]</span> <span class="hljs-selector-attr">[database]</span><br></code></pre></td></tr></table></figure><p>mysql客户端常用选项：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs stylus">-A, <span class="hljs-attr">--no-auto-rehash</span> 禁止补全<br><br>-u, <span class="hljs-attr">--user</span>= 用户名,默认为root<br><br>-h, <span class="hljs-attr">--host</span>= 服务器主机,默认为localhost<br><br>-<span class="hljs-selector-tag">p</span>, <span class="hljs-attr">--passowrd</span>= 用户密码,建议使用-<span class="hljs-selector-tag">p</span>,默认为空密码<br><br>-P, <span class="hljs-attr">--port</span>= 服务器端口<br><br>-S, <span class="hljs-attr">--socket</span>= 指定连接socket文件路径<br><br>-D, <span class="hljs-attr">--database</span>= 指定默认数据库<br><br>-C, <span class="hljs-attr">--compress</span> 启用压缩<br><br>-e  <span class="hljs-string">&quot;SQL&quot;</span> 执行SQL命令<br><br>-V, <span class="hljs-attr">--version</span> 显示版本<br><br>-v  <span class="hljs-attr">--verbose</span> 显示详细信息<br><br><span class="hljs-attr">--print-defaults</span> 获取程序默认使用的配置<br></code></pre></td></tr></table></figure><p>登录系统：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment">#默认空密码登录</span><br><br><span class="hljs-attribute">mysql</span>  -uroot  -p<br></code></pre></td></tr></table></figure><p>运行mysql命令</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs csharp">mysql&gt;use mysql <span class="hljs-meta">#切换数据库</span><br><br>mysql&gt; <span class="hljs-function"><span class="hljs-keyword">select</span> <span class="hljs-title">database</span>()</span>;          <span class="hljs-meta">#查看当前数据库</span><br><br>mysql&gt;<span class="hljs-function"><span class="hljs-keyword">select</span> <span class="hljs-title">user</span>()</span>; <span class="hljs-meta">#查看当前用户</span><br><br>mysql&gt;SELECT User,Host,Password FROM user;<br><br>mysql&gt;system clear <span class="hljs-meta">#清屏</span><br><br>mysql&gt; ^DBye    <span class="hljs-meta">#ctrl+d 退出</span><br></code></pre></td></tr></table></figure><p>客户端 mysql 的配置文件，修改提示符</p><p>#查看mysql版本</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@centos8</span> <span class="hljs-operator">~</span>]#mysql <span class="hljs-operator">-</span><span class="hljs-type">V</span><br><br>mysql <span class="hljs-type">Ver</span> <span class="hljs-number">15.1</span> <span class="hljs-type">Distrib</span> <span class="hljs-number">10.3</span>.<span class="hljs-number">11</span><span class="hljs-operator">-</span><span class="hljs-type">MariaDB</span>, <span class="hljs-keyword">for</span> <span class="hljs-type">Linux</span> (x86_64) using readline <span class="hljs-number">5.1</span><br><br>\#临时修改mysql提示符<br><br>[root<span class="hljs-meta">@centos8</span> <span class="hljs-operator">~</span>]#mysql <span class="hljs-operator">-</span>uroot <span class="hljs-operator">-</span>pcentos <span class="hljs-operator">--</span>prompt<span class="hljs-operator">=</span><span class="hljs-string">&quot;<span class="hljs-subst">\\</span>r:<span class="hljs-subst">\\</span>m:<span class="hljs-subst">\\</span>s(<span class="hljs-subst">\\</span>u@<span class="hljs-subst">\\</span>h) [<span class="hljs-subst">\\</span>d]&gt;<span class="hljs-subst">\\</span>_&quot;</span> <br><br>\#临时修改mysql提示符<br><br>[root<span class="hljs-meta">@centos8</span> <span class="hljs-operator">~</span>]#export <span class="hljs-type">MYSQL_PS1</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;<span class="hljs-subst">\\</span>r:<span class="hljs-subst">\\</span>m:<span class="hljs-subst">\\</span>s(<span class="hljs-subst">\\</span>u@<span class="hljs-subst">\\</span>h) [<span class="hljs-subst">\\</span>d]&gt;<span class="hljs-subst">\\</span>_&quot;</span>  <br><br>\#持久修改mysql提示符<br><br>[root<span class="hljs-meta">@centos8</span> <span class="hljs-operator">~</span>]#vim <span class="hljs-operator">/</span>etc<span class="hljs-operator">/</span>my.cnf.d<span class="hljs-operator">/</span>mysql<span class="hljs-operator">-</span>clients.cnf <br><br>[mysql]<br><br>prompt<span class="hljs-operator">=</span><span class="hljs-string">&quot;<span class="hljs-subst">\\</span>r:<span class="hljs-subst">\\</span>m:<span class="hljs-subst">\\</span>s(<span class="hljs-subst">\\</span>u@<span class="hljs-subst">\\</span>h) [<span class="hljs-subst">\\</span>d]&gt;<span class="hljs-subst">\\</span>_&quot;</span>                     <br><br>[root<span class="hljs-meta">@centos8</span> <span class="hljs-operator">~</span>]#mysql <span class="hljs-operator">--</span>print<span class="hljs-operator">-</span>defaults <span class="hljs-operator">-</span>v<br><br>mysql would have been started with the following arguments:<br><br><span class="hljs-operator">--</span>prompt<span class="hljs-operator">=</span>\r:\m:\s(\u@\h) [\d]<span class="hljs-operator">&gt;</span>\<span class="hljs-keyword">_</span> <span class="hljs-operator">-</span>v <br><br>[root<span class="hljs-meta">@centos8</span> <span class="hljs-operator">~</span>]#mysql <br><br><span class="hljs-type">Welcome</span> to the <span class="hljs-type">MariaDB</span> monitor. <span class="hljs-type">Commands</span> end with ; or \g.<br><br><span class="hljs-type">Your</span> <span class="hljs-type">MariaDB</span> connection id <span class="hljs-keyword">is</span> <span class="hljs-number">11</span><br><br><span class="hljs-type">Server</span> version: <span class="hljs-number">10.3</span>.<span class="hljs-number">11</span><span class="hljs-operator">-</span><span class="hljs-type">MariaDB</span> <span class="hljs-type">MariaDB</span> <span class="hljs-type">Server</span><br><br><span class="hljs-type">Copyright</span> (c) <span class="hljs-number">2000</span>, <span class="hljs-number">2018</span>, <span class="hljs-type">Oracle</span>, <span class="hljs-type">MariaDB</span> <span class="hljs-type">Corporation</span> <span class="hljs-type">Ab</span> and others.<br><br><span class="hljs-type">Type</span> &#x27;help;&#x27; or &#x27;\h&#x27; <span class="hljs-keyword">for</span> help. <span class="hljs-type">Type</span> &#x27;\c&#x27; to clear the current input statement.<br><br><span class="hljs-number">10</span>:<span class="hljs-number">29</span>:<span class="hljs-number">30</span>(root<span class="hljs-meta">@localhost</span>) [(none)]<span class="hljs-operator">&gt;</span> use mysql<br><br><span class="hljs-type">Reading</span> table information <span class="hljs-keyword">for</span> completion of table and column names<br><br><span class="hljs-type">You</span> can turn off this feature to <span class="hljs-keyword">get</span> a quicker startup with <span class="hljs-operator">-</span><span class="hljs-type">A</span><br><br><span class="hljs-type">Database</span> changed<br><br><span class="hljs-number">10</span>:<span class="hljs-number">29</span>:<span class="hljs-number">34</span>(root<span class="hljs-meta">@localhost</span>) [mysql]<span class="hljs-operator">&gt;</span> exit<br></code></pre></td></tr></table></figure><p>配置所有MySQL 客户端的自动登录</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs stylus">vim /etc/my<span class="hljs-selector-class">.cnf</span>.d/client<span class="hljs-selector-class">.cnf</span><br><br><span class="hljs-selector-attr">[client]</span><br><br>user=wang<br><br>password=<span class="hljs-number">123456</span><br><br>​               <br><br><span class="hljs-selector-attr">[mysql]</span><br><br>prompt=(\\u@\\h) <span class="hljs-selector-attr">[\\d]</span>&gt;\\_<br></code></pre></td></tr></table></figure><h4 id="mysqladmin-命令"><a href="#mysqladmin-命令" class="headerlink" title="mysqladmin****命令"></a><strong>mysqladmin****命令</strong></h4><p>mysqladmin 命令格式</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">mysqladmin [OPTIONS] <span class="hljs-keyword">command</span> <span class="hljs-keyword">command</span>.<span class="hljs-string">...</span><br></code></pre></td></tr></table></figure><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-meta">#查看mysql服务是否正常，如果正常提示mysqld is alive</span><br><br>mysqladmin -uroot -pcentos  <span class="hljs-built_in">ping</span><br><br>\<span class="hljs-meta">#关闭mysql服务，但mysqladmin命令无法开启</span><br><br>mysqladmin -uroot -pcentos <span class="hljs-built_in">shutdown</span><br><br>\<span class="hljs-meta">#创建数据库testdb</span><br><br>mysqladmin -uroot -pcentos  create testdb <br><br>\<span class="hljs-meta">#删除数据库testdb</span><br><br>mysqladmin -uroot -pcentos  drop testdb<br><br>\<span class="hljs-meta">#修改root密码</span><br><br>mysqladmin -uroot -pcentos password <span class="hljs-string">&#x27;magedu&#x27;</span><br><br>\<span class="hljs-meta">#日志滚动,生成新文件/var/lib/mysql/mariadb-bin.00000N</span><br><br>mysqladmin -uroot -pcentos flush-logs<br></code></pre></td></tr></table></figure><h4 id="mycli"><a href="#mycli" class="headerlink" title="mycli"></a><strong>mycli</strong></h4><p>MyCLI 是基于Python开发的MySQL的命令行工具，具有自动完成和语法突出显示功能安装</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-id">#CentOS8</span>安装<br><br><span class="hljs-selector-attr">[root@centos8 ~]</span><span class="hljs-selector-id">#yum</span> <span class="hljs-selector-tag">install</span> <span class="hljs-selector-tag">python3-pip</span> <span class="hljs-selector-tag">-y</span><br><br><span class="hljs-selector-attr">[root@centos8 ~]</span><span class="hljs-selector-id">#pip3</span> <span class="hljs-selector-tag">install</span> <span class="hljs-selector-tag">mycli</span><br><br>\<span class="hljs-selector-id">#ubuntu</span>安装<br><br><span class="hljs-selector-attr">[root@ubuntu1804 ~]</span><span class="hljs-selector-id">#apt</span> <span class="hljs-selector-tag">-y</span> <span class="hljs-selector-tag">install</span> <span class="hljs-selector-tag">mycli</span><br><br><span class="hljs-selector-attr">[root@ubuntu1804 ~]</span><span class="hljs-selector-id">#mycli</span> <span class="hljs-selector-tag">-u</span> <span class="hljs-selector-tag">root</span> <span class="hljs-selector-tag">-S</span> /<span class="hljs-selector-tag">var</span>/<span class="hljs-selector-tag">run</span>/<span class="hljs-selector-tag">mysqld</span>/<span class="hljs-selector-tag">mysqld</span><span class="hljs-selector-class">.sock</span><br></code></pre></td></tr></table></figure><h3 id="服务器端配置"><a href="#服务器端配置" class="headerlink" title="服务器端配置"></a><strong>服务器端配置</strong></h3><h4 id="服务器端配置文件"><a href="#服务器端配置文件" class="headerlink" title="服务器端配置文件"></a><strong>服务器端配置文件</strong></h4><p>服务器端(mysqld)：工作特性有多种配置方式</p><p>1、命令行选项：</p><p>2、配置文件：类ini格式,集中式的配置，能够为mysql的各应用程序提供配置信息</p><p>服务器端配置文件：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/my</span>.cnf  <span class="hljs-comment">#Global选项</span><br><br><span class="hljs-regexp">/etc/my</span>sql/my.cnf <span class="hljs-comment">#Global选项</span><br><br>~/.my.cnf <span class="hljs-comment">#User-specific 选项</span><br></code></pre></td></tr></table></figure><p>配置文件格式：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[mysqld]</span><br><span class="hljs-string"></span><br><span class="hljs-string">[mysqld_safe]</span><br><span class="hljs-string"></span><br><span class="hljs-string">[mysqld_multi]</span><br><span class="hljs-string"></span><br><span class="hljs-string">[mysql]</span><br><span class="hljs-string"></span><br><span class="hljs-string">[mysqladmin]</span><br><span class="hljs-string"></span><br><span class="hljs-string">[mysqldump]</span><br><span class="hljs-string"></span><br><span class="hljs-string">[server]</span><br><span class="hljs-string"></span><br><span class="hljs-string">[client]</span><br></code></pre></td></tr></table></figure><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">parameter</span> <span class="hljs-operator">=</span> value<br></code></pre></td></tr></table></figure><p>说明</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cmake">_和- 相同<br><br><span class="hljs-number">1</span>，<span class="hljs-keyword">ON</span>，<span class="hljs-keyword">TRUE</span>意义相同， <span class="hljs-number">0</span>，<span class="hljs-keyword">OFF</span>，<span class="hljs-keyword">FALSE</span>意义相同,无区分大小写<br></code></pre></td></tr></table></figure><h4 id="socket-连接说明"><a href="#socket-连接说明" class="headerlink" title="socket 连接说明"></a><strong>socket</strong> <strong>连接说明</strong></h4><p>官方说明</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>dev.mysql.com<span class="hljs-regexp">/doc/my</span>sql-port-reference<span class="hljs-regexp">/en/my</span>sql-ports-reference-tables.html<span class="hljs-comment">#mysql-client-server-ports</span><br></code></pre></td></tr></table></figure><p>服务器监听的两种 socket 地址：</p><ul><li>ip socket: 监听在tcp的3306端口，支持远程通信 ，侦听3306/tcp端口可以在绑定有一个或全部接口IP上</li><li>unix sock: 监听在sock文件上，仅支持本机通信, 如：/var/lib/mysql/mysql.sock)</li></ul><p>说明：host为localhost 时自动使用unix sock</p><p>MySQL的端口</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">mysql&gt; SHOW VARIABLES LIKE &#x27;port&#x27;; <br><br>+<span class="hljs-params">---------------</span>+<span class="hljs-params">-------</span>+<br><br>| Variable_name | Value |<br><br>+<span class="hljs-params">---------------</span>+<span class="hljs-params">-------</span>+<br><br>| port     | 3306 |<br><br>+<span class="hljs-params">---------------</span>+<span class="hljs-params">-------</span>+ <br><br>1 row in <span class="hljs-keyword">set</span> <span class="hljs-params">(0.01 sec)</span><br><br><span class="hljs-comment">#MySQL8.0增加了一个33060/tcp端口</span><br><br><span class="hljs-comment">#Port 33060 is the default port for the MySQL Database Extended Interface (the </span><br><br>MySQL X Protocol).<br><br>mysql&gt; SHOW VARIABLES LIKE &#x27;mysqlx_port&#x27;; <br><br>+<span class="hljs-params">---------------</span>+<span class="hljs-params">-------</span>+<br><br>| Variable_name | Value |<br><br>+<span class="hljs-params">---------------</span>+<span class="hljs-params">-------</span>+<br><br>| mysqlx_port  | 33060 |<br><br>+<span class="hljs-params">---------------</span>+<span class="hljs-params">-------</span>+ <br><br>1 row in <span class="hljs-keyword">set</span> <span class="hljs-params">(0.00 sec)</span><br></code></pre></td></tr></table></figure><h4 id="关闭mysqld网络连接"><a href="#关闭mysqld网络连接" class="headerlink" title="关闭mysqld网络连接"></a><strong>关闭<strong><strong>mysqld</strong></strong>网络连接</strong></h4><p>只侦听本地客户端， 所有客户端和服务器的交互都通过一个socket文件实现，socket的配置存放在/var/lib/mysql/mysql.sock） 可在/etc/my.cnf修改</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros">vim /etc/my.cnf<br><br>[mysqld]<br><br><span class="hljs-attribute">skip-networking</span>=1<br><br><span class="hljs-attribute">bind_address</span>=127.0.0.1<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux：第3周作业</title>
    <link href="/2022/08/09/Linux%EF%BC%9A%E7%AC%AC3%E5%91%A8%E4%BD%9C%E4%B8%9A/"/>
    <url>/2022/08/09/Linux%EF%BC%9A%E7%AC%AC3%E5%91%A8%E4%BD%9C%E4%B8%9A/</url>
    
    <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><span id="more"></span><p>请同学们完成作业后，将博客作业提交到此链接：<a href="https://www.wjx.top/vm/eVolHrs.aspx">https://www.wjx.top/vm/eVolHrs.aspx</a></p><p>报全程班和单就业的小伙伴，本周建议学习内容：</p><p>第11节<br>软件管理<br>1软件运行机制和软件包概念<br>2rpm包管理器<br>3yum的客户端配置和基本使用<br>4yum私有仓库的实现<br>5源码编译安装实战案例<br>6源码编译安装httpd和一键编译安装httpd脚本<br>7ubuntu的软件管理<br>第12节<br>网络基础<br>1网络概念和分类<br>2OSI开放系统互联模型<br>3局域网相关技术<br>4网络线缆和网络设备<br>5局域网相关技术<br>6TCPIP协议及TCP协议<br>7TCP协议和三次握手及四次挥手<br>第13节<br>网络基础<br>1tcpip协议详解<br>2tcpip协议详解<br>3ip协议和IP地址组成<br>4IP地址规划和CIDR<br>5网络地址规划和划分子网<br>6网卡名称和网络地址配置<br>7网络路由实战案例    第14节<br>网络高级配置和shell脚本进阶<br>1路由综合实战案例<br>2网络工具及多网卡绑定bonding<br>3网络高级应用之网桥实现<br>4ubuntu的网卡配置<br>5shell脚本进阶while循环<br>6shell脚本进阶函数<br>7shell脚本进阶函数    </p><p>完成作业：</p><ol><li>yum私有仓库的实现及博客输出</li><li>阅读《图解TCP/IP》一书，地址：<a href="https://leon-wtf.github.io/doc/%E5%9B%BE%E8%A7%A3TCPIP.pdf%EF%BC%8C%E6%9C%89%E6%97%B6%E9%97%B4%E7%9A%84%E5%8F%AF%E4%BB%A5%E5%86%99%E4%B8%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0">https://leon-wtf.github.io/doc/%E5%9B%BE%E8%A7%A3TCPIP.pdf，有时间的可以写下读书笔记</a></li><li>画图 TCP协议和三次握手及四次挥手，可以参考别人的，但是需要自己画一次</li><li>静态配置网卡IP，centos/ubuntu实现<br>脚本题</li><li>实现免密登陆脚本, expect登陆远程主机，将生成的密钥写入到目标主机, expect测试远程登陆。<br>1）通过shift读取脚本参数<br>2）通过select来选择功能.例如功能有</li></ol><ul><li>安装mysql</li><li>安装apache</li><li>免密钥登陆主机<br>当前我们只实现免密钥登陆主机<br>3）通过函数封装每个功能<br>4）将免密钥登陆的过程可以重复进行, while 循环实现重复，需要有退出过程。当用户输入exit时，退出免密钥功能。<br>5）支持输入一批主机免密钥，使用数组 实现</li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Linux:10.磁盘和存储管理</title>
    <link href="/2022/08/06/Linux%EF%BC%9A10.%E7%A3%81%E7%9B%98%E5%92%8C%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/"/>
    <url>/2022/08/06/Linux%EF%BC%9A10.%E7%A3%81%E7%9B%98%E5%92%8C%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/</url>
    
    <content type="html"><![CDATA[<p>磁盘和存储管理</p><span id="more"></span><h1 id="磁盘存储和文件系统"><a href="#磁盘存储和文件系统" class="headerlink" title="磁盘存储和文件系统"></a>磁盘存储和文件系统</h1><p>概述</p><ul><li><strong>磁盘结构</strong></li><li><strong>分区类型</strong></li><li><strong>管理分区</strong></li><li><strong>管理文件系统</strong></li><li><strong>挂载设备</strong></li><li><strong>管理swap空间</strong></li><li><strong>RAID管理</strong></li><li><strong>LVM管理</strong></li><li><strong>LVM快照</strong></li></ul><h1 id="磁盘结构"><a href="#磁盘结构" class="headerlink" title="磁盘结构"></a><strong>磁盘结构</strong></h1><h2 id="设备文件"><a href="#设备文件" class="headerlink" title="设备文件"></a><strong>设备文件</strong></h2><p>一切皆文件：open(), read(), write(), close()</p><p>设备文件：关联至一个设备驱动程序，进而能够跟与之对应硬件设备进行通信</p><p>设备号码：</p><ul><li>主设备号：major number, 标识设备类型</li><li>次设备号：minor number, 标识同一类型下的不同设备</li></ul><p>设备类型：</p><ul><li>块设备：block，存取单位“块”，磁盘</li><li>字符设备：char，存取单位“字符”，键盘</li></ul><p>磁盘设备的设备文件命名：</p><figure class="highlight awk"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/dev/</span>DEV_FILE<br><br><span class="hljs-regexp">/dev/</span>sdX  <span class="hljs-comment"># SAS,SATA,SCSI,IDE,USB </span><br><br><span class="hljs-regexp">/dev/</span>nvme0n<span class="hljs-comment">#  #nvme协议硬盘，如：第一个硬盘：nvme0n1，第二个硬盘：nvme0n2</span><br></code></pre></td></tr></table></figure><p>虚拟磁盘</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/dev/</span>vd <br><br><span class="hljs-regexp">/dev/</span>xvd<br></code></pre></td></tr></table></figure><p>百度云磁盘</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@instance-j4y73zvl ~]<span class="hljs-comment"># lsblk</span><br>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT<br>sr0     11:0   <span class="hljs-number"> 1 </span> 410K <span class="hljs-number"> 0 </span>rom  <br>vda    253:0   <span class="hljs-number"> 0 </span>  40G <span class="hljs-number"> 0 </span>disk <br>└─vda1 253:1   <span class="hljs-number"> 0 </span>  40G <span class="hljs-number"> 0 </span>part /<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>网络安全:第4周作业</title>
    <link href="/2022/08/06/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%EF%BC%9A%E7%AC%AC4%E5%91%A8%E4%BD%9C%E4%B8%9A/"/>
    <url>/2022/08/06/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%EF%BC%9A%E7%AC%AC4%E5%91%A8%E4%BD%9C%E4%B8%9A/</url>
    
    <content type="html"><![CDATA[<p>第4周作业</p><span id="more"></span><p>1、练习S2-048 远程代码执行漏洞（CVE-2017-9791），提供命令执行截图<br>2、练习JBoss 5.x/6.x 反序列化漏洞（CVE-2017-12149），提供命令执行截图<br>3、安装并使用Nmap扫描一个地址（本机、VPS、虚拟机环境都可以），提供扫描结果截图<br>4、安装并使用Xray分别进行正向扫描和反向扫描，提供扫描报告，报告名称：<br>（1）学号+正向扫描报告<br>（2）学号+反向扫描报告<br>5、以上截图附学号和时间戳</p><h1 id="练习S2-048-远程代码执行漏洞"><a href="#练习S2-048-远程代码执行漏洞" class="headerlink" title="练习S2-048 远程代码执行漏洞"></a>练习S2-048 远程代码执行漏洞</h1><p><img src="image-20220806162422943.png" alt="image-20220806162422943"></p><h1 id="练习JBoss-5-x-6-x-反序列化漏洞（CVE-2017-12149）"><a href="#练习JBoss-5-x-6-x-反序列化漏洞（CVE-2017-12149）" class="headerlink" title="练习JBoss 5.x/6.x 反序列化漏洞（CVE-2017-12149）"></a>练习JBoss 5.x/6.x 反序列化漏洞（CVE-2017-12149）</h1><p><img src="image-20220806164032809-16597752352082.png" alt="image-20220806164032809"></p><p><img src="image-20220806165552626-16597761566693.png" alt="image-20220806165552626"></p><h1 id="安装并使用Nmap扫描一个地址"><a href="#安装并使用Nmap扫描一个地址" class="headerlink" title="安装并使用Nmap扫描一个地址"></a>安装并使用Nmap扫描一个地址</h1><p><img src="image-20220816214035405-16606572371301.png" alt="image-20220816214035405"></p><h1 id="Xray分别进行正向扫描和反向扫描"><a href="#Xray分别进行正向扫描和反向扫描" class="headerlink" title="Xray分别进行正向扫描和反向扫描"></a>Xray分别进行正向扫描和反向扫描</h1><p>  提供扫描报告，报告名称：<br>（1）学号+正向扫描报告<br>（2）学号+反向扫描报告</p><p><img src="image-20220816214234784-16606573562002.png" alt="image-20220816214234784"></p><p><img src="image-20220816214315001-16606573962663.png" alt="image-20220816214315001"></p>]]></content>
    
    
    <categories>
      
      <category>作业</category>
      
    </categories>
    
    
    <tags>
      
      <tag>网络安全</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>网络安全：渗透测试之信息收集</title>
    <link href="/2022/08/06/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%EF%BC%9A%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"/>
    <url>/2022/08/06/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%EF%BC%9A%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<p>渗透测试之信息收集</p><span id="more"></span><h1 id="信息广度收集"><a href="#信息广度收集" class="headerlink" title="信息广度收集"></a>信息广度收集</h1><h2 id="whois信息"><a href="#whois信息" class="headerlink" title="whois信息"></a>whois信息</h2><p>站长之家：<a href="http://whois.chinaz.com/">http://whois.chinaz.com</a></p><p>1.域名对应的邮箱；</p><p>2.该邮箱注册的所有域名；</p><p>3.企业CEO名称注册的域名；</p><h2 id="一级域名"><a href="#一级域名" class="headerlink" title="一级域名"></a>一级域名</h2><p>企查查：<a href="https://www.qichacha.com/">https://www.qichacha.com</a></p><p><img src="image-20220806142235991-16597669574977.png" alt="image-20220806142235991"></p><p>天眼查：<a href="https://www.tianyancha.com/">https://www.tianyancha.com</a></p><p><img src="image-20220806142300390-16597669822918.png" alt="image-20220806142300390"></p><h2 id="子域名"><a href="#子域名" class="headerlink" title="子域名"></a>子域名</h2><ul><li>OneForAll：<a href="https://github.com/shmilylty/OneForAll">https://github.com/shmilylty/OneForAll</a></li><li>ksubdomain：<a href="https://github.com/knownsec/ksubdomain">https://github.com/knownsec/ksubdomain</a></li><li>subDomainsBrute：<a href="https://github.com/lijiejie/subDomainsBrute">https://github.com/lijiejie/subDomainsBrute</a></li><li>Sublist3r：<a href="https://github.com/aboul3la/Sublist3r">https://github.com/aboul3la/Sublist3r</a></li><li>RappidDns：<a href="https://rapiddns.io/subdomain">https://rapiddns.io/subdomain</a> (在线)</li><li>查子域：<a href="https://chaziyu.com/">https://chaziyu.com/</a> (在线)</li><li>子域名挖掘机</li></ul><h2 id="旁站"><a href="#旁站" class="headerlink" title="旁站"></a>旁站</h2><ul><li>在线：<a href="http://stool.chinaz.com/same">http://stool.chinaz.com/same</a></li><li>在线：<a href="https://site.ip138.com/">https://site.ip138.com</a></li><li>一个IP映射给多个域名</li></ul><h2 id="真实IP"><a href="#真实IP" class="headerlink" title="真实IP"></a>真实IP</h2><ul><li>全球ping：<a href="https://www.wepcc.com/">https://www.wepcc.com</a></li><li>dns检测：<a href="https://tools.ipip.net/dns.php">https://tools.ipip.net/dns.php</a></li><li>Xcdn：<a href="https://github.com/3xp10it/xcdn">https://github.com/3xp10it/xcdn</a></li><li>在线：<a href="https://ipchaxun.com/">https://ipchaxun.com</a></li></ul><h2 id="端口-C段"><a href="#端口-C段" class="headerlink" title="端口+C段"></a>端口+C段</h2><ul><li>Nmap：<a href="https://nmap.org/">https://nmap.org</a></li><li>masscan：<a href="https://github.com/robertdavidgraham/masscan">https://github.com/robertdavidgraham/masscan</a></li><li>Goby：<a href="https://gobies.org/">https://gobies.org</a></li><li>御剑：<a href="https://github.com/foryujian/yujianportscan">https://github.com/foryujian/yujianportscan</a> 推荐在虚拟机里玩一玩</li></ul><h2 id="敏感信息"><a href="#敏感信息" class="headerlink" title="敏感信息"></a>敏感信息</h2><h3 id="googleHack语法"><a href="#googleHack语法" class="headerlink" title="googleHack语法"></a>googleHack语法</h3><p><a href="https://cn.bing.com/">https://cn.bing.com</a></p><p>1、后台地址</p><p>site:xxx.com 管理后台/登陆/管理员/系统，可以通过添加双引号增加精确度 sf-express.com</p><p>site:xxx.com inurl:login/admin/system/guanli/denglu</p><p>2、敏感文件</p><p>site:xxx.com filetype:pdf/doc/xls/txt</p><p>site:xxx.com filetype:log/sql/conf</p><p>3、测试环境</p><p>site:xxx.com inurl:test/ceshi</p><p>site:xxx.com intitle:后台/测试</p><p>4、邮箱/QQ/群</p><p>site:xxx.com 邮件/email</p><p>site:xxx.com qq/群/企鹅/腾讯</p><p>site:xxx.com intitle:”Outlook Web App” 邮件服务器的web界面</p><p>site:xxx.com intitle:”mail”</p><p>site:xxx.com intitle:”webmail”</p><p>5、其他</p><p>site:xxx.com inurl:api</p><p>site:xxx.com inurl:uid=/id=</p><p>site:xxx.com intitle:index.of “server at”</p><h3 id="Github"><a href="#Github" class="headerlink" title="Github"></a><strong>Github</strong></h3><p><a href="https://github.com/">https://github.com/</a></p><p><img src="image-20220806140942995.png" alt="image-20220806140942995"></p><p>@xxx.com password/secret/credentials/token/config/pass/login/ftp/ssh/pwd</p><p>@xxx.com security_credentials/connetionstring/JDBC/ssh2_auth_password/send_keys</p><h3 id="网盘引擎"><a href="#网盘引擎" class="headerlink" title="网盘引擎"></a><strong>网盘引擎</strong></h3><p>盘搜搜：<a href="http://www.pansoso.org/">http://www.pansoso.org</a></p><p>盘多多：<a href="http://www.panduoduo.net/">http://www.panduoduo.net</a></p><p>大力盘：<a href="https://dalipan.com/">https://dalipan.com</a></p><h3 id="空间引擎搜索"><a href="#空间引擎搜索" class="headerlink" title="空间引擎搜索"></a><strong>空间引擎搜索</strong></h3><p>FOFA：<a href="https://fofa.so/">https://fofa.so</a> 暂时被禁用</p><p>Quake：<a href="https://quake.360.cn/quake/#/index">https://quake.360.cn/quake/#/index</a></p><p>Shadon：<a href="https://www.shodan.io/">https://www.shodan.io</a> </p><p>基础语法：<a href="https://blog.csdn.net/Vdieoo/article/details/109622838">https://blog.csdn.net/Vdieoo/article/details/109622838</a></p><p>ZoomEye：<a href="https://www.zoomeye.org/">https://www.zoomeye.org</a></p><p><strong>切记：搜索到敏感信息之后，不要随意下载和传播，属于违法行为！应该主动进行报备。</strong></p><h3 id="历史漏洞"><a href="#历史漏洞" class="headerlink" title="历史漏洞"></a><strong>历史漏洞</strong></h3><p>CNVD：<a href="https://www.cnvd.org.cn/">https://www.cnvd.org.cn/</a></p><p><img src="image-20220806141115158-16597662773663.png" alt="image-20220806141115158"></p><p>CNNVD：<a href="http://www.cnnvd.org.cn/">http://www.cnnvd.org.cn/</a></p><p><img src="image-20220806141050326-16597662524982.png" alt="image-20220806141050326"></p><p>Seebug：<a href="https://www.seebug.org/">https://www.seebug.org</a></p><p><img src="image-20220806141143080-16597663049644.png" alt="image-20220806141143080"></p><p>Exploit Database：<a href="https://www.exploit-db.com/">https://www.exploit-db.com</a></p><p><img src="image-20220806141212893-16597663343295.png" alt="image-20220806141212893"></p><p>SPLOITUS <a href="https://sploitus.com/">https://sploitus.com</a></p><h3 id="公众号"><a href="#公众号" class="headerlink" title="公众号"></a>公众号</h3><p>微信直接搜索</p><p>搜狗：<a href="https://weixin.sogou.com/">https://weixin.sogou.com</a></p><p><img src="image-20220806141842295-16597667244256.png" alt="image-20220806141842295"></p><h3 id="小程序"><a href="#小程序" class="headerlink" title="小程序"></a><strong>小程序</strong></h3><p>微信直接搜索</p><h1 id="信息深度收集："><a href="#信息深度收集：" class="headerlink" title="信息深度收集："></a><strong>信息深度收集：</strong></h1><h2 id="指纹识别"><a href="#指纹识别" class="headerlink" title="指纹识别"></a><strong>指纹识别</strong></h2><p>火狐插件：Wappalyzer</p><p>云悉：<a href="http://www.yunsee.cn/">http://www.yunsee.cn</a></p><p>whatweb：<a href="https://www.whatweb.net/">https://www.whatweb.net</a></p><p>在线：<a href="http://whatweb.bugscaner.com/look">http://whatweb.bugscaner.com/look</a> (支持批量)</p><p>Nuclei：<a href="https://github.com/projectdiscovery/nuclei">https://github.com/projectdiscovery/nuclei</a></p>]]></content>
    
    
    <categories>
      
      <category>网络安全笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>渗透测试之信息收集</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>网络安全:第4周笔记</title>
    <link href="/2022/08/06/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%EF%BC%9Anmap/"/>
    <url>/2022/08/06/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%EF%BC%9Anmap/</url>
    
    <content type="html"><![CDATA[<p>第四周笔记</p><p>nmap</p><span id="more"></span><h1 id="nmap"><a href="#nmap" class="headerlink" title="nmap"></a>nmap</h1><p>当Nmap不带选项运行时，该选项概要会被输出，最新的版本在这里 <a href="http://www.insecure.org/nmap/data/nmap.usage.txt%E3%80%82">http://www.insecure.org/nmap/data/nmap.usage.txt。</a></p><figure class="highlight nestedtext"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></div></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">Usage</span><span class="hljs-punctuation">:</span> <span class="hljs-string">nmap [Scan Type(s)] [Options] &#123;target specification&#125; </span><br><br><span class="hljs-attribute">TARGET SPECIFICATION</span><span class="hljs-punctuation">: </span><br><span class="hljs-punctuation"></span><br><span class="hljs-attribute">Can pass hostnames, IP addresses, networks, etc. </span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute">Ex</span><span class="hljs-punctuation">:</span> <span class="hljs-string">scanme.nmap.org, microsoft.com/24, 192.168.0.1; 10.0-255.0-255.1-254 </span><br><br><span class="hljs-attribute">-iL &lt;inputfilename&gt;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Input from list of hosts/networks </span><br><br><span class="hljs-attribute">-iR &lt;num hosts&gt;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Choose random targets </span><br><br><span class="hljs-attribute">--exclude &lt;host1[,host2][,host3],...&gt;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Exclude hosts/networks </span><br><br><span class="hljs-attribute">--excludefile &lt;exclude_file&gt;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Exclude list from file </span><br><br><span class="hljs-attribute">HOST DISCOVERY</span><span class="hljs-punctuation">: </span><br><span class="hljs-punctuation"></span><br><span class="hljs-attribute">-sL</span><span class="hljs-punctuation">:</span> <span class="hljs-string">List Scan - simply list targets to scan </span><br><br><span class="hljs-attribute">-sP</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Ping Scan - go no further than determining if host is online </span><br><br><span class="hljs-attribute">-P0</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Treat all hosts as online -- skip host discovery </span><br><br><span class="hljs-attribute">-PS/PA/PU [portlist]</span><span class="hljs-punctuation">:</span> <span class="hljs-string">TCP SYN/ACK or UDP discovery probes to given ports </span><br><br><span class="hljs-attribute">-PE/PP/PM</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ICMP echo, timestamp, and netmask request discovery probes </span><br><br><span class="hljs-attribute">-n/-R</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Never do DNS resolution/Always resolve [default: sometimes resolve] </span><br><br><span class="hljs-attribute">SCAN TECHNIQUES</span><span class="hljs-punctuation">: </span><br><span class="hljs-punctuation"></span><br><span class="hljs-attribute">-sS/sT/sA/sW/sM</span><span class="hljs-punctuation">:</span> <span class="hljs-string">TCP SYN/Connect()/ACK/Window/Maimon scans </span><br><br><span class="hljs-attribute">-sN/sF/sX</span><span class="hljs-punctuation">:</span> <span class="hljs-string">TCP Null, FIN, and Xmas scans </span><br><br><span class="hljs-attribute">--scanflags &lt;flags&gt;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Customize TCP scan flags </span><br><br>-sI &lt;zombie host[:probeport]&gt;: Idlescan <br><br><span class="hljs-attribute">-sO</span><span class="hljs-punctuation">:</span> <span class="hljs-string">IP protocol scan </span><br><br><span class="hljs-attribute">-b &lt;ftp relay host&gt;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">FTP bounce scan </span><br><br><span class="hljs-attribute">PORT SPECIFICATION AND SCAN ORDER</span><span class="hljs-punctuation">: </span><br><span class="hljs-punctuation"></span><br><span class="hljs-attribute">-p &lt;port ranges&gt;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Only scan specified ports </span><br><br><span class="hljs-attribute">Ex</span><span class="hljs-punctuation">:</span> <span class="hljs-string">-p22; -p1-65535; -p U:53,111,137,T:21-25,80,139,8080 </span><br><br><span class="hljs-attribute">-F</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Fast - Scan only the ports listed in the nmap-services file) </span><br><br><span class="hljs-attribute">-r</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Scan ports consecutively - don&#x27;t randomize </span><br><br><span class="hljs-attribute">SERVICE/VERSION DETECTION</span><span class="hljs-punctuation">: </span><br><span class="hljs-punctuation"></span><br><span class="hljs-attribute">-sV</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Probe open ports to determine service/version info </span><br><br><span class="hljs-attribute">--version-light</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Limit to most likely probes for faster identification </span><br><br><span class="hljs-attribute">--version-all</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Try every single probe for version detection </span><br><br><span class="hljs-attribute">--version-trace</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Show detailed version scan activity (for debugging) </span><br><br><span class="hljs-attribute">OS DETECTION</span><span class="hljs-punctuation">: </span><br><span class="hljs-punctuation"></span><br><span class="hljs-attribute">-O</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Enable OS detection </span><br><br><span class="hljs-attribute">--osscan-limit</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Limit OS detection to promising targets </span><br><br><span class="hljs-attribute">--osscan-guess</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Guess OS more aggressively </span><br><br><span class="hljs-attribute">TIMING AND PERFORMANCE</span><span class="hljs-punctuation">: </span><br><span class="hljs-punctuation"></span><br><span class="hljs-attribute">-T[0-6]</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Set timing template (higher is faster) </span><br><br><span class="hljs-attribute">--min-hostgroup/max-hostgroup &lt;msec&gt;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Parallel host scan group sizes </span><br><br><span class="hljs-attribute">--min-parallelism/max-parallelism &lt;msec&gt;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Probe parallelization </span><br><br><span class="hljs-attribute">--min-rtt-timeout/max-rtt-timeout/initial-rtt-timeout &lt;msec&gt;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Specifies </span><br><br><span class="hljs-attribute">probe round trip time. </span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute">--host-timeout &lt;msec&gt;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Give up on target after this long </span><br><br><span class="hljs-attribute">--scan-delay/--max-scan-delay &lt;msec&gt;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Adjust delay between probes </span><br><br><span class="hljs-attribute">FIREWALL/IDS EVASION AND SPOOFING</span><span class="hljs-punctuation">:</span><br><span class="hljs-punctuation"></span><br></code></pre></td></tr></table></figure><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">-f; <span class="hljs-comment">--mtu &lt;val&gt;: fragment packets (optionally w/given MTU) </span><br><br>-D &lt;decoy1,decoy2[,ME],...&gt;: Cloak <span class="hljs-keyword">a</span> scan <span class="hljs-keyword">with</span> decoys <br><br>-S &lt;IP_Address&gt;: Spoof source address <br><br>-e &lt;iface&gt;: Use specified interface <br><br>-g/<span class="hljs-comment">--source-port &lt;portnum&gt;: Use given port number </span><br><br><span class="hljs-comment">--data-length &lt;num&gt;: Append random data to sent packets </span><br><br><span class="hljs-comment">--ttl &lt;val&gt;: Set IP time-to-live field </span><br><br><span class="hljs-comment">--spoof-mac &lt;mac address, prefix, or vendor name&gt;: Spoof your MAC address </span><br><br>OUTPUT: <br><br>-oN/-oX/-oS/-oG &lt;<span class="hljs-built_in">file</span>&gt;: Output scan results <span class="hljs-keyword">in</span> <span class="hljs-keyword">normal</span>, XML, s|&lt;rIpt kIddi3, <br><br><span class="hljs-keyword">and</span> Grepable <span class="hljs-built_in">format</span>, respectively, <span class="hljs-built_in">to</span> <span class="hljs-keyword">the</span> given filename. <br><br>-oA &lt;basename&gt;: Output <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> <span class="hljs-literal">three</span> major formats <span class="hljs-keyword">at</span> once <br><br>-v: Increase verbosity level (use twice <span class="hljs-keyword">for</span> more effect) <br><br>-d[level]: Set <span class="hljs-keyword">or</span> increase debugging level (Up <span class="hljs-built_in">to</span> <span class="hljs-number">9</span> is meaningful) <br><br><span class="hljs-comment">--packet-trace: Show all packets sent and received </span><br><br><span class="hljs-comment">--iflist: Print host interfaces and routes (for debugging) </span><br><br><span class="hljs-comment">--append-output: Append to rather than clobber specified output files </span><br><br><span class="hljs-comment">--resume &lt;filename&gt;: Resume an aborted scan </span><br><br><span class="hljs-comment">--stylesheet &lt;path/URL&gt;: XSL stylesheet to transform XML output to HTML </span><br><br><span class="hljs-comment">--no-stylesheet: Prevent Nmap from associating XSL stylesheet w/XML output </span><br><br>MISC: <br><br><span class="hljs-number">-6</span>: Enable IPv6 scanning <br><br>-A: Enables OS detection <span class="hljs-keyword">and</span> Version detection <br><br><span class="hljs-comment">--datadir &lt;dirname&gt;: Specify custom Nmap data file location </span><br><br><span class="hljs-comment">--send-eth/--send-ip: Send packets using raw ethernet frames or IP packets </span><br><br><span class="hljs-comment">--privileged: Assume that the user is fully privileged </span><br><br>-V: Print <span class="hljs-built_in">version</span> <span class="hljs-built_in">number</span> <br><br>-h: Print this help summary page. <br><br>EXAMPLES: <br><br>nmap -v -A scanme.nmap.org <br><br>nmap -v -<span class="hljs-variable">sP</span> <span class="hljs-number">192.168</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">16</span> <span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">8</span> <br><br>nmap -v -iR <span class="hljs-number">10000</span> -P0 -p <span class="hljs-number">80</span><br></code></pre></td></tr></table></figure><p>​    Nmap (“Network Mapper(网络映射器)”) 是一款开放源代码的网络探测和安全审核的工具。它的设计目标是快速扫描大型网络，当然用它扫描单个主机也没有问题。Nmap以新颖的方式使用原始IP报文来发现网络上有哪些主机，这些主机提供什么服务(应用程序名和版本)，这些服务运行在什么操作系统(包括版本信息)， 它们使用什么类型的报文过滤器/防火墙，以及一堆其它功能。虽然Nmap通常用于安全审</p><p>核， 许多系统管理员和网络管理员也用它来做一些日常的工作，比如查看整个网络的信息， 管理服务升级计划，以及监视主机和服务的运行。</p><p>​        Nmap输出的是扫描目标的列表，以及每个目标的补充信息，至于是哪些信息则依赖于所使用的选项。“所感兴趣的端口表格”是其中的关键。那张表列出端口号，协议，服务名称和状态。状态可能是 open (开放的)， filtered (被过滤的)， closed (关闭的)，或者 unfiltered (未被过滤的)。 </p><p>​        Open(开放的)意味着目标机器上的应用程序正在该端口监听连接/报文。 filtered (被过滤的) 意味着防火墙，过滤器或者其它网络障碍阻止了该端口被访问，Nmap无法得知它是 open (开放的) 还是closed (关闭的)。 closed (关闭的) 端口没有应用程序在它上面监听，但是他们随时可能开放。 当端口对Nmap的探测做出响应，但是Nmap无法确定它们是关闭还是开放时，这些端口就被认为是unfiltered (未被过滤的)。 如果Nmap报告状态组合 open|filtered 和 closed|filtered 时，那说明Nmap无法确定该端口处于两个状态中的哪一个状态。 当要求进行版本探测时，端口表也可以包含软件的版本信息。当要求进行IP协议扫描时 ( -sO )，Nmap提供关于所支持的IP协议而不是正在监听的端口的信息。</p><p>​        除了所感兴趣的端口表，Nmap还能提供关于目标机的进一步信息，包括反向域名，操作系统猜测，设备类型，和MAC地址。</p><p>一个典型的Nmap扫描如例 1 “一个典型的Nmap扫描”所示。在这个例子中，唯一的选项是 -A ， 用来进</p><p>行操作系统及其版本的探测， -T4 可以加快执行速度，接着是两个目标主机名</p><p>例 1. 一个典型的Nmap扫描</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-title">nmap</span> -<span class="hljs-type">A</span> -<span class="hljs-type">T4</span> scanme.nmap.org<br><br># nmap -<span class="hljs-type">A</span> -<span class="hljs-type">T4</span> scanme.nmap.org playground <br><br><span class="hljs-type">Starting</span> nmap ( https://nmap.org/ ) <br><br><span class="hljs-type">Interesting</span> ports on scanme.nmap.org (205.217.153.62): <br><br>(<span class="hljs-type">The</span> <span class="hljs-number">1663</span> ports scanned but not shown below are in state: filtered) <br><br><span class="hljs-keyword">port</span> STATE SERVICE VERSION <br><br>22/tcp open ssh OpenSSH 3.9p1 (protocol 1.99) <br><br>53/tcp open domain <br><br>70/tcp closed gopher <br><br>80/tcp open http Apache httpd 2.0.52 ((<span class="hljs-type">Fedora</span>)) <br><br>113/tcp closed auth <br><br>Device type: general purpose <br><br>Running: Linux 2.4.X|2.5.X|2.6.X <br><br>OS details: Linux 2.4.7 - 2.6.11，Linux 2.6.0 - 2.6.11 <br><br>Uptime 33。908 days (since <span class="hljs-type">Thu</span> <span class="hljs-type">Jul</span> 21 03:38:03 2005) <br><br>Interesting ports on playground。nmap。或者g (192.168.0.40): <br><br>(<span class="hljs-type">The</span> 1659 ports scanned but not shown below are in state: closed) <br><br><span class="hljs-keyword">port</span> STATE SERVICE VERSION <br><br>135/tcp open msrpc Microsoft Windows RPC <br><br>139/tcp open netbios-ssn <br><br>389/tcp open ldap? <br><br>445/tcp open microsoft-ds Microsoft Windows XP microsoft-ds <br><br>1002/tcp open windows-icfw? <br><br>1025/tcp open msrpc Microsoft Windows RPC <br><br>1720/tcp open H.323/Q.931 CompTek AquaGateKeeper <br><br>5800/tcp open vnc-http RealVNC 4.0 (<span class="hljs-type">Resolution</span> 400x250; <span class="hljs-type">VNC</span> <span class="hljs-type">TCP</span> port: <br><br>\5900) <br><br>5900/tcp open vnc VNC (protocol 3.8) <br><br>MAC Address: 00:A0:CC:63:85:4B (<span class="hljs-type">Lite</span>-on <span class="hljs-type">Communications</span>) <br><br>Device type: general purpose <br><br>Running: Microsoft Windows NT/2K/XP <br><br>OS details: Microsoft Windows XP Pro RC1+ through final release <br><br>Service Info: OSs: Windows，Windows XP <br><br>Nmap finished: 2 IP addresses (2 hosts up) scanned in 88.392 seconds<br></code></pre></td></tr></table></figure><h2 id="目标说明"><a href="#目标说明" class="headerlink" title="目标说明"></a>目标说明</h2><p>除了选项，所有出现在Nmap命令行上的都被视为对目标主机的说明。 最简单的情况是指定一个目标IP地址或主机名。</p><p>有时候您希望扫描整个网络的相邻主机。为此，Nmap支持CIDR风格的地址。您可以附加一个/在一个IP地址或主机名后面， Nmap将会扫描所有和该参考IP地址具有 相同比特的所有IP地址或主机。 例如，</p><p>192.168.10.0/24将会扫描192.168.10.0 (二进制格式: 11000000 10101000 00001010 00000000)和192.168.10.255 (二进制格式: 11000000 10101000 00001010 11111111)之间的256台主机。192.168.10.40/24 将会做同样的事情。假设主机 scanme.nmap.org的IP地址是205.217.153.62，scanme.nmap.org/16 将扫描205.217.0.0和205.217.255.255之间的65,536 个IP地址。 所允许的最小值是/1， 这将会扫描半个互联网。最大值是/32，这将会扫描该主机或IP地址， 因为所有的比特都固定了。</p><p>CIDR标志位很简洁但有时候不够灵活。例如，您也许想要扫描 192.168.0.0/16，但略过任何以.0或 者.255 结束的IP地址，因为它们通常是广播地址。 Nmap通过八位字节地址范围支持这样的扫描您可以用逗号分开的数字或范围列表为IP地址的每个八位字节指定它的范围。 例如，192.168.0-255.1-254 将略过在该范围内以.0和.255结束的地址。 范围不必限于最后的8位：0-255.0-255.13.37 将在整个互联网</p><p>范围内扫描所有以13.37结束的地址。 这种大范围的扫描对互联网调查研究也许有用。</p><p>IPv6地址只能用规范的IPv6地址或主机名指定。 CIDR 和八位字节范围不支持IPv6，因为它们对于IPv6几乎没什么用。</p><p>Nmap命令行接受多个主机说明，它们不必是相同类型。命令nmap scanme.nmap.org 192.168.0.0/810.0.0，1，3-7.0-255将和您预期的一样执行。</p><p>虽然目标通常在命令行指定，下列选项也可用来控制目标的选择：</p><ul><li>-iL (从列表中输入) </li></ul><p>从 中读取目标说明。在命令行输入一堆主机名显得很笨拙，然而经常需要这样。 例如，您的DHCP服务器可能导出10,000个当前租约的列表，而您希望对它们进行扫描。如果您不是使用未授权的静态IP来定位主机，或许您想要扫描所有IP地址。 只要生成要扫描的主机的列表，用-iL 把文件名作为选项传给Nmap。列表中的项可以是Nmap在命令行上接受的任何格式(IP地址，主机名，CIDR，IPv6，或者八位字节范围)。 每一项必须以一个或多个空格，制表符或换行符分开。 如果您希望Nmap从标准输入而不是实际文件读取列表， 您可以用一个连字符(-)作为文件名。</p><ul><li>-iR (随机选择目标)</li></ul><p>对于互联网范围内的调查和研究， 您也许想随机地选择目标。 选项告诉 Nmap生成多少个IP。不合需要的IP如特定的私有，组播或者未分配的地址自动略过。选项 0 意味着永无休止的扫描。记住，一些网管对于未授权的扫描可能会很感冒并加以抱怨。 使用该选项的后果自负! 如果在某个雨天的下午，您觉得实在无聊， 试试这个命令nmap -sS -PS80 -iR 0 -p 80随机地找一些网站浏览。</p><ul><li>–exclude &lt;host1[，host2][，host3]，…&gt; (排除主机/网络)</li></ul><p>如果在您指定的扫描范围有一些主机或网络不是您的目标， 那就用该选项加上以逗号分隔的列表排除它们。该列表用正常的Nmap语法， 因此它可以包括主机名，CIDR，八位字节范围等等。 当您希望扫描的网络包含执行关键任务的服务器，已知的对端口扫描反应强烈的系统或者被其它人看管的子网时，这也许有用。</p><ul><li>–excludefile (排除文件中的列表)</li></ul><p>这和–exclude 选项的功能一样，只是所排除的目标是用以换行符，空格，或者制表符分隔的 提供的，而不是在命令行上输入的。</p><h2 id="主机发现"><a href="#主机发现" class="headerlink" title="主机发现"></a>主机发现</h2><p>任何网络探测任务的最初几个步骤之一就是把一组IP范围(有时该范围是巨大的)缩小为一列活动的或者您感兴趣的主机。扫描每个IP的每个端口很慢，通常也没必要。 当然，什么样的主机令您感兴趣主要依赖于扫描的目的。网管也许只对运行特定服务的主机感兴趣，而从事安全的人员则可能对一个马桶都感兴趣，只要它有IP地址:-)。一个系统管理员也许仅仅使用Ping来定位内网上的主机，而一个外部入侵测试人员则可能绞尽脑汁用各种方法试图突破防火墙的封锁。</p><p>由于主机发现的需求五花八门，Nmap提供了一箩筐的选项来定制您的需求。 主机发现有时候也叫做ping扫描，但它远远超越世人皆知的ping工具发送简单的ICMP回声请求报文。用户完全可以通过使用列表扫描(-sL)或者通过关闭ping (-P0)跳过ping的步骤，也可以使用多个端口把TPC SYN/ACK，UDP和ICMP 任意组合起来玩一玩。这些探测的目的是获得响应以显示某个IP地址是否是活动的(正在被某主机或者网络设备使用)。 在许多网络上，在给定的时间，往往只有小部分的IP地址是活动的。 这种情况在私有地址空间如10.0.0.0/8尤其普遍。私有网络有16,000,000个IP，但一些使用它的公司连1000台机器都没有。主机发现能够找到零星分布于IP地址海洋上的机器。</p><p>如果没有给出主机发现的选项，Nmap 就发送一个TCP ACK报文到80端口和一个ICMP回声请求到每台目标机器。 一个例外是ARP扫描用于局域网上的任何目标机器。对于非特权UNIX shell用户，使用connect()系统调用会发送一个SYN报文而不是ACK。这些默认行为和使用-PA -PE选项的效果相同。 扫描局域网时，这种主机发现一般够用了，但是对于安全审核，建议进行更加全面的探测。</p><p>-P选项(用于选择ping的类型)可以被结合使用，可以通过使用不同的TCP端口/标志位和ICMP码发送许多探测报文来增加穿透防守严密的防火墙的机会。另外要注意的是即使指定了其它 -P*选项，ARP发现(-PR)对于局域网上的目标而言是默认行为，因为它总是更快更有效。</p><p>下列选项控制主机发现。</p><ol><li>-sL (列表扫描)</li></ol><p> 列表扫描是主机发现的退化形式，它仅仅列出指定网络上的每台主机， 不发送任何报文到目标主机。默认情况下，Nmap仍然对主机进行反向域名解析以获取它们的名字。简单的主机名能给出的有用信息常常令人惊讶。例如， fw.chi.playboy.com是花花公子芝加哥办公室的防火墙。Nmap最后还会报告IP地址的总数。列表扫描可以很好的确保您拥有正确的目标IP。如果主机的域名出乎您的意料，那么就值</p><p>得进一步检查以防错误地扫描其它组织的网络。既然只是打印目标主机的列表，像其它一些高级功能如端口扫描，操作系统探测或者Ping扫描的选项就没有了。</p><ol start="2"><li>-sP (Ping扫描)</li></ol><p> 该选项告诉Nmap仅进行ping扫描(主机发现)，然后打印出对扫描做出响应的那些主机。 没有进一步的测试 (如端口扫描或者操作系统探测)。 这比列表扫描更积极，常常用于和列表扫描相同的目的。它可以得到些许目标网络的信息而不被特别注意到。 对于攻击者来说，了解多少主机正在运行比列表扫描提供的一列IP和主机名往往更有价值。系统管理员往往也很喜欢这个选项。 它可以很方便地得出网络上有多少机器正在运行或者监视服务器是否正常运行。常常有人称它为地毯式ping，它比ping广播地址更可靠，因为许多主机对广播请求不响应。-sP选项在默认情况下， 发送一个ICMP回声请求和一个TCP报文到80端口。如果非特权用户执行，就发送一个SYN报文 (用connect()系统调用)到目标机的80端口。 当特权用户扫描局域网上的目标机时，会发送ARP请求(-PR)，除非使用了–send-ip选项。 -sP选项可以和除-P0之外的任何发现探测类型-P 选项结合使用以达到更大的灵活性。 一旦使用了任何探测类型和端口选项，默认的探测(ACK和回应请求)就被覆盖了。 当防守严密的防火墙位于运行Nmap的源主机和目标网络之间时， 推荐使用那些高级选项。否则，当防火墙捕获并丢弃探测包或者响应包时，一些主机就不能被探测到。</p><ol start="3"><li>-P0 (无ping)</li></ol><p> 该选项完全跳过Nmap发现阶段。 通常Nmap在进行高强度的扫描时用它确定正在运行的机器。 默认</p><p>情况下，Nmap只对正在运行的主机进行高强度的探测如端口扫描，版本探测，或者操作系统探测。用-</p><p>P0禁止主机发现会使Nmap对每一个指定的目标IP地址进行所要求的扫描。所以如果在命令行指定一个</p><p>B类目标地址空间(/16)， 所有 65,536 个IP地址都会被扫描。 -P0的第二个字符是数字0而不是字母O。和列表扫描一样，跳过正常的主机发现，但不是打印一个目标列表， 而是继续执行所要求的功能，就好像每个IP都是活动的。</p><ol start="4"><li>-PS [portlist] (TCP SYN Ping)</li></ol><p> 该选项发送一个设置了SYN标志位的空TCP报文。 默认目的端口为80 (可以通过改变nmap.h) 文件中的DEFAULT-TCP-PROBE-PORT值进行配置，但不同的端口也可以作为选项指定。 甚至可以指定一个以逗号分隔的端口列表(如 -PS22，23，25，80，113，1050，35000)， 在这种情况下，每个端口会被并发地扫描。SYN标志位告诉对方您正试图建立一个连接。 通常目标端口是关闭的，一个RST (复位) 包会发回来。 如果碰巧端口是开放的，目标会进行TCP三步握手的第二步，回应一个SYN/ACK TCP报文。然后运行Nmap的机器则会扼杀这个正在建立的连接， 发送一个RST而非ACK报文，否则，一个完全的连接将会建立。 RST报文是运行Nmap的机器而不是Nmap本身响应的，因为它对收到的SYN/ACK感到很意外。Nmap并不关心端口开放还是关闭。 无论RST还是SYN/ACK响应都告诉Nmap该主机正在运行。在 </p><p>UNIX机器上，通常只有特权用户 root 能否发送和接收原始的TCP报文。因此作为一个变通的方法，对于非特权用户， Nmap会为每个目标主机进行系统调用connect()，它也会发送一个SYN 报文来尝试建立连接。如果connect()迅速返回成功或者一个ECONNREFUSED 失败，下面的TCP堆栈一定已经收到了一个SYN/ACK或者RST，该主机将被标志位为在运行。 如果连接超时了，该主机就标志位为down掉了。这种方法也用于IPv6 连接，因为Nmap目前还不支持原始的IPv6报文</p><ol start="5"><li>-PA [portlist] (TCP ACK Ping)</li></ol><p> TCP ACK ping和刚才讨论的SYN ping相当类似，区别就是设置TCP的ACK标志位而不是SYN标志位。ACK报文表示确认一个建立连接的尝试，但该连接尚未完全建立。 所以远程主机应该总是回应一个RST报文， 因为它们并没有发出过连接请求到运行Nmap的机器，如果它们正在运行的话。-PA选项使用和SYN探测相同的默认端口(80)，也可以 用相同的格式指定目标端口列表。如果非特权用户尝试该功能，或者指定的是IPv6目标，前面说过的connect()方法将被使用。 这个方法并不完美，因为它实际上发送的是SYN报文，而不是ACK报文。提供SYN和ACK两种ping探测的原因是使通过防火墙的机会尽可能大。许多管理员会配置他们的路由器或者其它简单的防火墙来封锁SYN报文，除非 连接目标是那些公开的服务器像公司网站或者邮件服务器。 这可以阻止其它进入组织的连接，同时也允许用户访问互联网。 这种无状态的方法几乎不占用防火墙/路由器的资源，因而被硬件和软件过滤器 广泛支持。LinuxNetfilter/iptables 防火墙软件提供方便的 –syn选项来实现这种无状态的方法。 当这样的无状态防火墙规则存在时，发送到关闭目标端口的SYN ping探测 (-PS) 很可能被封锁。这种情况下，ACK探测格外有闪光点，因为它正好利用了 这样的规则。另外一种常用的防火墙用有状态的规则来封锁非预期的报文。 这一特性已开始只存在于高端防火墙，但是这些年类它越来越普遍了。 Linux Netfilter/iptables 通过 –state选项支持这一特性，它根据连接状态把报文 进行分类。SYN探测更有可能用于这样的系统，由于没头没脑的ACK报文 通常会被识别成伪造的而丢弃。解决这个两难的方法是通过即指定 -PS又指定-PA来即发送SYN又发送ACK。 </p><ol start="6"><li>-PU [portlist] (UDP Ping)</li></ol><p> 还有一个主机发现的选项是UDP ping，它发送一个空的(除非指定了–data-length UDP报文到给定的端口。端口列表的格式和前面讨论过的-PS和-PA选项还是一样。 如果不指定端口，默认是31338。该默认值可以通过在编译时改变nmap.h文件中的 DEFAULT-UDP-PROBE-PORT值进行配置。默认使用这样一个奇怪的端口是因为对开放端口 进行这种扫描一般都不受欢迎。如果目标机器的端口是关闭的，UDP探测应该马上得到一个ICMP端口无法到达的回应报文。 这对于Nmap意味着该机器正在运行。 许多其它类型的ICMP错误，像主机/网络无法到达或者TTL超时则表示down掉的或者不可到达的主机。 没有回应也被这样解释。如果到达一个开放的端口，大部分服务仅仅忽略这个 空报文而不做任何回应。这就是为什么默认探测端口是31338这样一个 极不可能被使用的端口。少数服务如chargen会响应一个空的UDP报文， 从而向Nmap表明该机器正在运行。该扫描类型的主要优势是它可以穿越只过滤TCP的防火墙和过滤器。 例如。我曾经有过一个Linksys BEFW11S4无线宽带路由器。默认情况下， 该设备对外的网卡过滤所有TCP端口，但UDP探测仍然会引发一个端口不可到达 的消息，从而暴露了它自己。</p><ol start="7"><li>-PE; -PP; -PM (ICMP Ping Types)</li></ol><p> 除了前面讨论的这些不常见的TCP和UDP主机发现类型， Nmap也能发送世人皆知的ping程序所发送的报文。Nmap发送一个ICMP type 8 (回声请求)报文到目标IP地址， 期待从运行的主机得到一个type 0(回声响应)报文。 对于网络探索者而言，不幸的是，许多主机和防火墙现在封锁这些报文，而不是按期望的那样响应。因此，仅仅ICMP扫描对于互联网上的目标通常是不够的。 但对于系统管理员监视一个内部网络，它们可能是实际有效的途径。 使用-PE选项打开该回声请求功能。虽然回声请求是标准的ICMP ping查询， Nmap并不止于此。ICMP标准(RFC 792)还规范了时间戳请求，信息请求 request，和地址掩码请求，它们的代码分别是13，15和17。 虽然这些查询的表面目的是获取信息如地址掩码和当前时间， 它们也可以很容易地用于主机发现。 很简单，回应的系统就是在运行的系统。Nmap目前没有实现信息请求报文， 因为它们还没有被广泛支持。RFC 1122 坚持 “主机不应该实现这些消息”。 时间戳和地址掩码查询可以分别用-PP和-PM选项发送。 时间戳响应(ICMP代码14)或者地址掩码响应(代码18)表示主机在运行。 当管理员特别封锁了回声请求报文而忘了其它ICMP查询可能用于相同目的时，这两个查询可能很有价值。</p><ol start="8"><li>-PR (ARP Ping) </li></ol><p> 最常见的Nmap使用场景之一是扫描一个以太局域网。 在大部分局域网上，特别是那些使用基于RFC1918私有地址范围的网络，在一个给定的时间绝大部分 IP地址都是不使用的。 当Nmap试图发送一个原始IP报文如ICMP回声请求时， 操作系统必须确定对应于目标IP的硬件 地址(ARP)，这样它才能把以太帧送往正确的地址。 这一般比较慢而且会有些问题，因为操作系统设计者认为一般不会在短时间内 对没有运行的机器作几百万次的ARP请求。当进行ARP扫描时，Nmap用它优化的算法管理ARP请求。 当它收到响应时， Nmap甚至不需要担心基于IP的ping报文，既然它已经知道该主机正在运行了。 这使得ARP扫描比基于IP的扫描更快更可靠。 所以默认情况下，如果Nmap发现目标主机就在它所在的局域网上，它会进行ARP扫描。 即使指定了不同的ping类型(如 -PI或者 -PS) ，Nmap也会对任何相同局域网上的目标机使用ARP。 如果您真的不想要ARP扫描，指定 –send-ip。 </p><ol start="9"><li>-n (不用域名解析)</li></ol><p> 告诉Nmap永不对它发现的活动IP地址进行反向域名解析。 既然DNS一般比较慢，这可以让事情更快些。</p><ol start="10"><li>-R (为所有目标解析域名)</li></ol><p> 告诉Nmap 永远对目标IP地址作反向域名解析。 一般只有当发现机器正在运行时才进行这项操作。</p><ol start="11"><li>–system-dns (使用系统域名解析器)</li></ol><p> 默认情况下，Nmap通过直接发送查询到您的主机上配置的域名服务器来解析域名。为了提高性能，许多请求 (一般几十个) 并发执行。如果您希望使用系统自带的解析器，就指定该选项 (通过getnameinfo()调用一次解析一个IP)。</p><h2 id="端口扫描基础"><a href="#端口扫描基础" class="headerlink" title="端口扫描基础"></a>端口扫描基础</h2><p>虽然Nmap这些年来功能越来越多， 它也是从一个高效的端口扫描器开始的，并且那仍然是它的核心功能。 nmap \这个简单的命令扫描主机上的超过 1660个TCP端口。 许多传统的端口扫描器只列出所有端口是开放还是关闭的， Nmap的信息粒度比它们要细得多。 它把端口分成六个状态: open(开放的)，closed(关闭的)，filtered(被过滤的)， unfiltered(未被过滤的)， open|filtered(开放或者被过滤的)，或者 closed|filtered(关闭或者被过滤的)。这些状态并非端口本身的性质，而是描述Nmap怎样看待它们。例如， 对于同样的目标机器的135/tcp端口，从同网络扫描显示它是开放的，而跨网络作完全相同的扫描则可能显示它是filtered(被过滤的)。Nmap所识别的6个端口状态。open(开放的)应用程序正在该端口接收TCP连接或者UDP报文。发现这一点常常是端口扫描的主要目标。安全意识强的人们知道每个开放的端口都是攻击的入口。攻击者或者入侵测试者想要发现开放的端口。 而管理员则试图关闭它们或者用防火墙保护它们以免妨碍了合法用户。 非安全扫描可能对开放的端口也感兴趣，因为它们显示了网络上那些服务可供使用。closed(关闭的)关闭的端口对于Nmap也是可访问的(它接受Nmap的探测报文并作出响应)， 但没有应用程序在其上监听。 它们可以显示该IP地址上(主机发现，或者ping扫描)的主机正在运行，也对部分操作系统探测有所帮助。 因为关闭的关口是可访问的，也许过会儿值得再扫描一下，可能一些又开放了。系统管理员可能会考虑用防火墙封锁这样的端口。 那样他们就会被显示为被过滤的状态，下面讨论。</p><p><strong>filtered(被过滤的)</strong></p><p>由于包过滤阻止探测报文到达端口， Nmap无法确定该端口是否开放。过滤可能来自专业的防火墙设备，路由器规则或者主机上的软件防火墙。这样的端口让攻击者感觉很挫折，因为它们几乎不提供任何信息。有时候它们响应ICMP错误消息如类型3代码13 (无法到达目标: 通信被管理员禁止)，但更普遍的是过滤器只是丢弃探测帧，不做任何响应。 这迫使Nmap重试若干次以访万一探测包是由于网络阻塞丢弃的。 这使得扫描速度明显变慢。unfiltered(未被过滤的)未被过滤状态意味着端口可访问，但Nmap不能确定它是开放还是关闭。 只有用于映射防火墙规则集的ACK扫描才会把端口分类到这种状态。 用其它类型的扫描如窗口扫描，SYN扫描，或者FIN扫描来扫描未被过滤的端口可以帮助确定端口是否开放。</p><p><strong>open|filtered(开放或者被过滤的)</strong></p><p>当无法确定端口是开放还是被过滤的，Nmap就把该端口划分成这种状态。开放的端口不响应就是一个例子。没有响应也可能意味着报文过滤器丢弃 了探测报文或者它引发的任何响应。因此Nmap无法确定该端口是开放的还是被过滤的。 UDP，IP协议， FIN，Null，和Xmas扫描可能把端口归入此类。</p><p><strong>closed|filtered(关闭或者被过滤的)</strong></p><p>该状态用于Nmap不能确定端口是关闭的还是被过滤的。 它只可能出现在IPID Idle扫描中。端口扫描技术作为一个修车新手，我可能折腾几个小时来摸索怎样把基本工具(锤子，胶带，扳子等) 用于手头的任务。当我惨痛地失败，把我的老爷车拖到一个真正的技师那儿的时候，他总是在他的工具箱里翻来翻去，直到拽出一个完美的工具然后似乎不费吹灰之力搞定它。 端口扫描的艺术和这个类似。专家理解成打的扫描技术，选择最适合的一种 (或者组合)来完成给定的任务。 另一方面，没有经验的用户和刚入门者总是用默认的SYN扫描解决每个问题。 既然Nmap是免费的，掌握端口扫描的唯一障碍就是知识。这当然是汽车世界所不能比的， 在那里，可能需要高超的技巧才能确定您需要一个压杆弹簧压缩机，接着您还得为它付数千美金。大部分扫描类型只对特权用户可用。 这是因为他们发送接收原始报文，这在Unix系统需要root权限。 在Windows上推荐使用administrator账户，但是当WinPcap已经被加载到操作系统时， 非特权用户也可以正常使用Nmap。当Nmap在1997年发布时，需要root权限是一个严重的局限，因为很多用户只有共享的shell账户。现在，世界变了，计算机便宜了，更多人拥有互联网连接 ，桌面UNIX系统 (包括Linux和MAC OS X)很普遍了。Windows版本的Nmap现在也有了，这使它可以运行在更多的桌面上。 由于所有这些原因，用户不再需要用有限的共享shell账户运行Nmap。 这是很幸运的，因为特权选项让Nmap强大得多也灵活得多。虽然Nmap努力产生正确的结果，但请记住所有结果都是基于目标机器(或者它们前面的防火墙)返回的报文的。这些主机也许是不值得信任的，它们可能响应以迷惑或误导Nmap的报文。 更普遍的是非RFC兼容的主机以不正确的方式响应Nmap探测。FIN，Null和Xmas扫描 特别容易遇到这个问题。这些是特定扫描类型的问题，因此我们在个别扫描类型里讨论它们。这一节讨论Nmap支持的大约十几种扫描技术。 一般一次只用一种方法， 除了UDP扫描(-sU)可能和任何一种TCP扫描类型结合使用。 友情提示一下，端口扫描类型的选项格式是-s， 其中 是个显眼的字符，通常是第一个字符。 一个例外是deprecated FTP bounce扫描(-b)。默认情况下，Nmap执行一个 SYN扫描，但是如果用户没有权限发送原始报文(在UNIX上需要root权限)或者如果指定的是IPv6目标，Nmap调用connect()。 本节列出的扫描中，非特权用户只能执行connect()和ftp bounce扫描。</p><p><strong>-sS (TCP SYN扫描)</strong></p><p>SYN扫描作为默认的也是最受欢迎的扫描选项，是有充分理由的。 它执行得很快，在一个没有入侵防火墙的快速网络上，每秒钟可以扫描数千个 端口。 SYN扫描相对来说不张扬，不易被注意到，因为它从来不完成TCP连接。 它也不像Fin/Null/Xmas，Maimon和Idle扫描依赖于特定平台，而可以应对任何兼容的 TCP协议栈。 它还可以明确可靠地区分open(开放的)， closed(关闭的)，和filtered(被过滤的) 状态它常常被称为半开放扫描， 因为它不打开一个完全的TCP连接。它发送一个SYN报文， 就像您真的要打开一个连接，然后等待响应。 SYN/ACK表示端口在监听 (开放)，而RST (复位)表示没有监听者。如果数次重发后仍没响应， 该端口就被标记为被过滤。如果收到ICMP不可到达错误 (类型3，代码1，2，3，9，10，或者13)，该端口也被标记为被过滤。</p><p><strong>-sT (TCP connect()扫描)</strong> </p><p>当SYN扫描不能用时，CP Connect()扫描就是默认的TCP扫描。 当用户没有权限发送原始报文或者扫描IPv6网络时，就是这种情况。 Instead of writing raw packets as most other scan typesdo，Nmap通过创建connect() 系统调用要求操作系统和目标机以及端口建立连接，而不像其它扫描类型直接发送原始报文。 这是和Web浏览器，P2P客户端以及大多数其它网络应用程序用以建立连接一样的 高层系统调用。它是叫做Berkeley Sockets API编程接口的一部分。Nmap用 该API获得每个连接尝试的状态信息，而不是读取响应的原始报文。当SYN扫描可用时，它通常是更好的选择。因为Nmap对高层的 connect()调用比对原始报文控制更少， 所以前者效率较低。 该系统调用完全连接到开放的目标端口而不是像SYN扫描进行 半开放的复位。这不仅花更长时间，需要更多报文得到同样信息，目标机也更可能 记录下连接。IDS(入侵检测系统)可以捕获两者，但大部分机器没有这样的警报系统。 当Nmap连接，然后不发送数据又关闭连接， 许多普通UNIX系统上的服务会在syslog留下记录，有时候是一条加密的错误消息。 此时，有些真正可怜的服务会崩溃，虽然这不常发生。如果管理员在日志里看到来自同一系统的 一堆连接尝试，她应该知道她的系统被扫描了。</p><p><strong>-sU (UDP扫描)</strong></p><p>虽然互联网上很多流行的服务运行在TCP 协议上，UDP服务也不少。 DNS，SNMP，和DHCP (注册的端口是53，161/162，和67/68)是最常见的三个。 因为UDP扫描一般较慢，比TCP更困难，一些安全审核人员忽略这些端口。 这是一个错误，因为可探测的UDP服务相当普遍，攻击者当然不会忽略整个协议。 所幸，Nmap可以帮助记录并报告UDP端口。UDP扫描用-sU选项激活。它可以和TCP扫描如 SYN扫描 (-sS)结合使用来同时检查两种协议。UDP扫描发送空的(没有数据)UDP报头到每个目标端口。 如果返回ICMP端口不可到达错误(类型3，代码3)， 该端口是closed(关闭的)。其它ICMP不可到达错误(类型3， 代码1，2，9，10，或者13)表明该端口是filtered(被过滤的)。 偶尔地，某服务会响应一个UDP报文，证明该端口是open(开放的)。 如果几次重试后还没有响应，该端口就被认为是 open|filtered(开放|被过滤的)。 这意味着该端口可能是开放的，也可能包过滤器正在封锁通信。 可以用版本扫描(-sV)帮助区分真正的开放端口和被过滤的端口。UDP扫描的巨大挑战是怎样使它更快速。 开放的和被过滤的端口很少响应，让Nmap超时然后再探测，以防探测帧或者 响应丢失。关闭的端口常常是更大的问题。 它们一般发回一个ICMP端口无法到达错误。但是不像关闭的TCP端口响应SYN或者Connect 扫描所发送的RST报文，许多主机在默认情况下限制ICMP端口不可到达消息。 Linux和Solaris对此特别严格。例如， Linux 2.4.20内核限制一秒钟只发送一条目标不可到达消息 (见net/ipv4/icmp。c)。Nmap探测速率限制并相应地减慢来避免用那些目标机会丢弃的无用报文来阻塞 网络。不幸的是，Linux式的一秒钟一个报文的限制使65,536个端口的扫描要花 18小时以上。加速UDP扫描的方法包括并发扫描更多的主机，先只对主要端口进行快速扫描，从防火墙后面扫描，使用–host-timeout跳过慢速的 主机。</p><p><strong>-sN; -sF; -sX (TCP Null，FIN，and Xmas扫描)</strong></p><p>这三种扫描类型 (甚至用下一节描述的 –scanflags 选项的更多类型) 在TCP RFC 中发掘了一个微妙的方法来区分open(开放的)和 closed(关闭的)端口。第65页说“如果 [目标]端口状态是关闭的…. 进入的不含RST的报文导致一个RST响应。” 接下来的一页 讨论不设置SYN，RST，或者ACK位的报文发送到开放端口: “理论上，这不应该发生，如果您确实收到了，丢弃该报文，返回。 ”如果扫描系统遵循该RFC，当端口关闭时，任何不包含SYN，RST，或者ACK位的报文会导致 一个RST返回，而当端口开放时，应该没有任何响应。只要不包含SYN，RST，或者ACK， 任何其它三种(FIN，PSH，and URG)的组合都行。Nmap有三种扫描类型利用这一点：Null扫描 (-sN)不设置任何标志位(tcp标志头是0)FIN扫描 (-sF)只设置TCP FIN标志位。Xmas扫描 (-sX)设置FIN，PSH，和URG标志 位，就像点亮圣诞树上所有的灯一样。除了探测报文的标志位不同，这三种扫描在行为上完全一致。 如果收到一个RST报文，该端口被认为是 closed(关闭的)，而没有响应则意味着 端口是open|filtered(开放或者被过滤的)。 如果收到ICMP不可到达错误(类型 3，代号 1，2，3，9，10，或者13)，该端口就被标记为 被过滤的。这些扫描的关键优势是它们能躲过一些无状态防火墙和报文过滤路由器。 另一个优势是这些扫描类型甚至比SYN扫描还要隐秘一些。但是别依赖它 – 多 数 现代的IDS产品可以发现它们。一个很大的不足是并非所有系统都严格遵循RFC 793。 许多系统不管端口开放还是关闭，都响应RST。 这导致所有端口都标记为closed(关闭的)。 这样的操作系统主要有Microsoft Windows，许多Cisco设备，BSDI，以及IBM OS/400。 但是这种扫描对多数UNIX系统都能工作。这些扫描的另一个不足是 它们不能辨别open(开放的)端口和一些特定的filtered(被过滤的)端口，从而返回 open|filtered(开放或者被过滤的)。</p><p><strong>-sA (TCP ACK扫描)</strong></p><p>这种扫描与目前为止讨论的其它扫描的不同之处在于它不能确定open(开放的)或者open|filtered(开放或者过滤的))端口。 它用于发现防火墙规则，确定它们是有状态的还是无状态的，哪些端口是被过滤的。ACK扫描探测报文只设置ACK标志位(除非您使用 –scanflags)。当扫描未被过滤的系统时， open(开放的)和closed(关闭的) 端口都会返回RST报文。Nmap把它们标记为unfiltered(未被过滤的)，意思是 ACK报文不能到达，但至于它们是open(开放的)或者 closed(关闭的) 无法确定。不响应的端口 或者发送特定的ICMP错误消息(类型3，代号1，2，3，9，10， 或者13)的端口，标记为 filtered(被过滤的)。</p><p><strong>-sW (TCP窗口扫描)</strong></p><p>除了利用特定系统的实现细节来区分开放端口和关闭端口，当收到RST时不总是打印unfiltered，窗口扫描和ACK扫描完全一样。 它通过检查返回的RST报文的TCP窗口域做到这一点。 在某些系统上，开放端口用正数表示窗口大小(甚至对于RST报文) 而关闭端口的窗口大小为0。因此，当收到RST时，窗口扫描不总是把端口标记为 unfiltered， 而是根据TCP窗口值是正数还是0，分别把端口标记为open或者 closed该扫描依赖于互联网上少数系统的实现细节， 因此您不能永远相信它。不支持它的系统会通常返回所有端口closed。 当然，一台机器没有开放端口也是有可能的。 如果大部分被扫描的端口是 closed，而一些常见的端口 (如 22， 25，53) 是 filtered，该系统就非常可疑了。 偶尔地，系统甚至会显示恰恰相反的行为。 如果您的扫描显示1000个开放的端口和3个关闭的或者被过滤的端口， 那么那3个很可能也是开放的端口。</p><p><strong>-sM (TCP Maimon扫描)</strong></p><p>Maimon扫描是用它的发现者Uriel Maimon命名的。他在 Phrack Magazine issue #49(November 1996)中描述了这一技术。 Nmap在两期后加入了这一技术。 这项技术和Null，FIN，以及Xmas扫描完全一样，除了探测报文是FIN/ACK。 根据RFC 793 (TCP)，无论端口开放或者关闭，都应该对这样的探测响应RST报文。 然而，Uriel注意到如果端口开放，许多基于BSD的系统只是丢弃该探测报文。</p><p><strong>–scanflags (定制的TCP扫描)</strong></p><p>真正的Nmap高级用户不需要被这些现成的扫描类型束缚。 –scanflags选项允许您通过指定任意TCP标志位来设计您自己的扫描。 让您的创造力流动，躲开那些仅靠本手册添加规则的入侵检测系统！–scanflags选项可以是一个数字标记值如9 (PSH和FIN)， 但使用字符名更容易些。 只要是URG， ACK，PSH， RST，SYN，and FIN的任何组合就行。例如，–scanflagsURGACKPSHRSTSYNFIN设置了所有标志位，但是这对扫描没有太大用处。 标志位的顺序不重要。除了设置需要的标志位，您也可以设置 TCP扫描类型(如-sA或者-sF)。 那个基本类型告诉Nmap怎样解释响应。例如， SYN扫描认为没有响应意味着 filtered端口，而FIN扫描则认为是open|filtered。 除了使用您指定的TCP标记位，Nmap会和基本扫描类型一样工作。 如果您不指定基本类型，就使用SYN扫描。</p><p><strong>-sI &lt;zombie host[:probeport]&gt; (Idlescan)</strong></p><p>这种高级的扫描方法允许对目标进行真正的TCP端口盲扫描 (意味着没有报文从您的真实IP地址发送到目标)。相反，side-channel攻击 利用zombie主机上已知的IP分段ID序列生成算法来窥探目标上开放端口的信息。 IDS系统将显示扫描来自您指定的zombie机(必须运行并且符合一定的标准)。 这种奇妙的扫描类型太复杂了，不能在此完全描述，所以我写一篇非正式的论文， 发布在<a href="http://nma/">http://nma</a> p.org/book/idlescan.html。除了极端隐蔽(由于它不从真实IP地址发送任何报文)， 该扫描类型可以建立机器间的基于IP的信任关系。 端口列表从<em>zombie</em> 主机的角度。显示开放的端口。 因此您可以尝试用您认为(通过路由器/包过滤规则)可能被信任的 zombies扫描目标。如果您由于IPID改变希望探测zombie上的特定端口， 您可以在zombie 主机后加上一个冒号和端口号。 否则Nmap会使用默认端口(80)。</p><p><strong>-sO (IP协议扫描)</strong></p><p>IP 协议扫描可以让您确定目标机支持哪些IP协议 (TCP，ICMP，IGMP，等等)。从技术上说，这不是端口扫描 ，既然它遍历的是IP协议号而不是TCP或者UDP端口号。 但是它仍使用 -p选项选择要扫描的协议号， 用正常的端口表格式报告结果，甚至用和真正的端口扫描一样 的扫描引擎。因此它和端口扫描非常接近，也被放在这里讨论。除了本身很有用，协议扫描还显示了开源软件的力量。 尽管基本想法非常简单，我过去从没想过增加这一功能也没收到任何对它的请求。 在2000年夏天，Gerhard Rieger孕育了这个想法，写了一个很棒的补丁程序，发送到nmap-hackers邮件列表。 我把那个补丁加入了Nmap，第二天发布了新版本。 几乎没有商业软件会有用户有足够的热情设计并贡献他们的改进。协议扫描以和UDP扫描类似的方式工作。它不是在UDP报文的端口域上循环， 而是在IP协议域的8位上循环，发送IP报文头。 报文头通常是空的，不包含数据，甚至不包含所申明的协议的正确报文头 TCP，UDP，和ICMP是三个例外。它们三个会使用正常的协议头，因为否则某些系 统拒绝发送，而且Nmap有函数创建它们。协议扫描不是注意ICMP端口不可到达消息， 而是ICMP 协议不可到达消息。如果Nmap从目标主机收到 任何协议的任何响应，Nmap就把那个协议标记为open。 ICMP协议不可到达 错误(类型 3，代号 2) 导致协议被标记为 closed。其它ICMP不可到达协议(类型 3，代号 1，3，9，10，或者13) 导致协议被标记为 filtered (虽然同时他们证明ICMP是 open )。如果重试之后仍没有收到响应， 该协议就被标记为open|filtered</p><p><strong>-b (FTP弹跳扫描)</strong></p><p>FTP协议的一个有趣特征(RFC 959) 是支持所谓代理ftp连接。它允许用户连接到一台FTP服务器，然后要求文件送到一台第三方服务器。 这个特性在很多层次上被滥用，所以许多服务器已经停止支持它了。其中一种就是导致FTP服务器对其它主机端口扫描。 只要请求FTP服务器轮流发送一个文件到目标主机上的所感兴趣的端口。 错误消息会描述端口是开放还是关闭的。 这是绕过防火墙的好方法，因为FTP服务器常常被置于可以访问比Web主机更多其它内部主机的位置。 Nmap用-b选项支持ftp弹跳扫描。参数格式是 :@:。 是某个脆弱的FTP服务器的名字或者IP地址。 您也许可以省略:， 如果服务器上开放了匿名用户(user:anonymous password:-wwwuser@)。 端口号(以及前面的冒号) 也可以省略，如果使用默认的FTP端口(21)。当Nmap1997年发布时，这个弱点被广泛利用，但现在大部分已经被fix了。 脆弱的服务器仍然存在，所以如果其它都失败了，这也值得一试。 如果您的目标是绕过防火墙，扫描目标网络上的开放的21端口(或者 甚至任何ftp服务，如果您用版本探测扫描所有端口)， 然后对每个尝试弹跳扫描。Nmap会告诉您该主机脆弱与否。 如果您只是试着玩Nmap，您不必(事实上，不应该)限制您自己。 在您随机地在互联网上寻找脆弱的FTP服务器时，考虑一下系统管理员不太喜欢您这样滥用他们的服务器。</p><h2 id="端口说明和扫描顺序"><a href="#端口说明和扫描顺序" class="headerlink" title="端口说明和扫描顺序"></a>端口说明和扫描顺序</h2><p>除了所有前面讨论的扫描方法， Nmap提供选项说明那些端口被扫描以及扫描是随机还是顺序进行。 默</p><p>认情况下，Nmap用指定的协议对端口1到1024以及nmap-services 文件中列出的更高的端口在扫描。</p><p>-p (只扫描指定的端口)</p><p>该选项指明您想扫描的端口，覆盖默认值。 单个端口和用连字符表示的端口范围(如 1-1023)都可</p><p>以。 范围的开始以及/或者结束值可以被省略， 分别导致Nmap使用1和65535。所以您可以指定 -</p><p>p-从端口1扫描到65535。 如果您特别指定，也可以扫描端口0。 对于IP协议扫描(-sO)，该选项指</p><p>定您希望扫描的协议号 (0-255)。当既扫描TCP端口又扫描UDP端口时，您可以通过在端口号前加上</p><p>T: 或者U:指定协议。 协议限定符一直有效您直到指定另一个。 例如，参数 -p U:53，111，137，</p><p>T:21-25，80，139，8080 将扫描UDP 端口53，111，和137，同时扫描列出的TCP端口。注意， </p><p>要既扫描 UDP又扫描TCP，您必须指定 -sU ，以及至少一个TCP扫描类型(如 -sS，-sF，或者 -sT)。</p><p>如果没有给定协议限定符， 端口号会被加到所有协议列表。</p><p>-F (快速 (有限的端口) 扫描) </p><p>在nmap的nmap-services 文件中(对于-sO，是协议文件)指定您想要扫描的端口。 这比扫描所有</p><p>65535个端口快得多。 因为该列表包含如此多的TCP端口(1200多)，这和默认的TCP扫描 scan (大 </p><p>约1600个端口)速度差别不是很大。如果您用–datadir选项指定您自己的 小小的nmap-services文 </p><p>件 ，差别会很惊人。</p><p>-r (不要按随机顺序扫描端口)</p><p>默认情况下，Nmap按随机顺序扫描端口 (除了出于效率的考虑，常用的端口前移)。这种随机化通</p><p>常都是受欢迎的， 但您也可以指定-r来顺序端口扫描。</p><h2 id="服务和版本探测"><a href="#服务和版本探测" class="headerlink" title="服务和版本探测"></a>服务和版本探测</h2><p>把Nmap指向一个远程机器，它可能告诉您 端口25/tcp，80/tcp，和53/udp是开放的。使用包含大约</p><p>2,200个著名的服务的 nmap-services数据库， Nmap可以报告那些端口可能分别对应于一个邮件服务</p><p>器 (SMTP)，web服务器(HTTP)，和域名服务器(DNS)。 这种查询通常是正确的 – 事实上，绝大多数在</p><p>TCP端口25监听的守护进程是邮件 服务器。然而，您不应该把赌注押在这上面! 人们完全可以在一些奇</p><p>怪的端口上运行服务。</p><p>即使Nmap是对的，假设运行服务的确实是 SMTP，HTTP和DNS，那也不是特别多的信息。 当为您的公</p><p>司或者客户作安全评估(或者甚至简单的网络明细清单)时， 您确实想知道正在运行什么邮件和域名服务</p><p>器以及它们的版本。 有一个精确的版本号对了解服务器有什么漏洞有巨大帮助。 版本探测可以帮您获得</p><p>该信息。</p><p>在用某种其它类型的扫描方法发现TCP 和/或者UDP端口后， 版本探测会询问这些端口，确定到底什么</p><p>服务正在运行。 nmap-service-probes 数据库包含查询不同服务的探测报文 和解析识别响应的匹配表</p><p>达式。 Nmap试图确定服务协议 (如 ftp，ssh，telnet，http)，应用程序名(如ISC Bind，Apache</p><p>httpd，Solaris telnetd)，版本号， 主机名，设备类型(如 打印机，路由器)，操作系统家族 (如</p><p>Windows，Linux)以及其它的细节，如 如是否可以连接X server，SSH协议版本 ，或者KaZaA用户名)。</p><p>当然，并非所有服务都提供所有这些信息。 如果Nmap被编译成支持OpenSSL， 它将连接到SSL服务</p><p>器，推测什么服务在加密层后面监听。 当发现RPC服务时， Nmap RPC grinder (-sR)会自动被用于确定</p><p>RPC程序和它的版本号。 如果在扫描某个UDP端口后仍然无法确定该端口是开放的还是被过滤的，那么</p><p>该端口状态就 被标记为open|filtered。 版本探测将试图从这些端口引发一个响应(就像它对开放端口做</p><p>的一样)， 如果成功，就把状态改为开放。 open|filtered TCP端口用同样的方法对待。 注意Nmap -A选</p><p>项在其它情况下打开版本探测。 有一篇关于版本探测的原理，使用和定制的文章在 <a href="http://www.insecur/">http://www.insecur</a></p><p>e.org/nmap/vscan/。 </p><p>当Nmap从某个服务收到响应，但不能在数据库中找到匹配时， 它就打印一个特殊的fingerprint和一个</p><p>URL给您提交，如果您确实知道什么服务运行在端口。 请花两分钟提交您的发现，让每个人受益。由于</p><p>这些提交， Nmap有350种以上协议如smtp，ftp，http等的大约3，000条模式匹配。</p><p>用下列的选项打开和控制版本探测。</p><p>-sV (版本探测)</p><p>打开版本探测。 您也可以用-A同时打开操作系统探测和版本探测。</p><p>–allports (不为版本探测排除任何端口)</p><p>默认情况下，Nmap版本探测会跳过9100 TCP端口，因为一些打印机简单地打印送到该端口的任何</p><p>数据，这回导致数十页HTTP get请求，二进制 SSL会话请求等等被打印出来。这一行为可以通过修</p><p>改或删除nmap-service-probes 中的Exclude指示符改变， 您也可以不理会任何Exclude指示符，</p><p>指定–allports扫描所有端口 </p><p>–version-intensity (设置版本扫描强度)</p><p>当进行版本扫描(-sV)时，nmap发送一系列探测报文 ，每个报文都被赋予一个1到9之间的值。 被</p><p>赋予较低值的探测报文对大范围的常见服务有效，而被赋予较高值的报文 一般没什么用。强度水平</p><p>说明了应该使用哪些探测报文。数值越高， 服务越有可能被正确识别。 然而，高强度扫描花更多</p><p>时间。强度值必须在0和9之间。 默认是7。当探测报文通过nmap-service-probes ports指示符 注</p><p>册到目标端口时，无论什么强度水平，探测报文都会被尝试。这保证了DNS 探测将永远在任何开放</p><p>的53端口尝试， SSL探测将在443端口尝试，等等。</p><p>–version-light (打开轻量级模式)</p><p>这是 –version-intensity 2的方便的别名。轻量级模式使 版本扫描快许多，但它识别服务的可能性</p><p>也略微小一点。</p><p>–version-all (尝试每个探测)</p><p>–version-intensity 9的别名， 保证对每个端口尝试每个探测报文。</p><p>–version-trace (跟踪版本扫描活动)</p><p>这导致Nmap打印出详细的关于正在进行的扫描的调试信息。 它是您用–packet-trace所得到的信</p><p>息的子集。</p><p>-sR (RPC扫描)</p><p>这种方法和许多端口扫描方法联合使用。 它对所有被发现开放的TCP/UDP端口执行SunRPC程序</p><p>NULL命令，来试图 确定它们是否RPC端口，如果是， 是什么程序和版本号。因此您可以有效地获</p><p>得和rpcinfo -p一样的信息， 即使目标的端口映射在防火墙后面(或者被TCP包装器保护)。Decoys</p><p>目前不能和RPC scan一起工作。 这作为版本扫描(-sV)的一部分自动打开。 由于版本探测包括它并</p><p>且全面得多，-sR很少被需要。</p><h2 id="操作系统探测"><a href="#操作系统探测" class="headerlink" title="操作系统探测"></a>操作系统探测</h2><p>Nmap最著名的功能之一是用TCP/IP协议栈fingerprinting进行远程操作系统探测。 Nmap发送一系列</p><p>TCP和UDP报文到远程主机，检查响应中的每一个比特。 在进行一打测试如TCP ISN采样，TCP选项支持</p><p>和排序，IPID采样，和初始窗口大小检查之后， Nmap把结果和数据库nmap-os-fingerprints中超过</p><p>1500个已知的操作系统的fingerprints进行比较，如果有匹配，就打印出操作系统的详细信息。 每个</p><p>fingerprint包括一个自由格式的关于OS的描述文本， 和一个分类信息，它提供供应商名称(如Sun)，下</p><p>面的操作系统(如Solaris)，OS版本(如10)， 和设备类型(通用设备，路由器，switch，游戏控制台，</p><p>等)。</p><p>如果Nmap不能猜出操作系统，并且有些好的已知条件(如 至少发现了一个开放端口和一个关闭端口)，</p><p>Nmap会提供一个 URL，如果您确知运行的操作系统，您可以把fingerprint提交到那个URL。 这样您就</p><p>扩大了Nmap的操作系统知识库，从而让每个Nmap用户都受益。</p><p>操作系统检测可以进行其它一些测试，这些测试可以利用处理 过程中收集到的信息。例如运行时间检</p><p>测，使用TCP时间戳选项(RFC 1323) 来估计主机上次重启的时间，这仅适用于提供这类信息的主机。另</p><p>一种 是TCP序列号预测分类，用于测试针对远程主机建立一个伪造的TCP连接 的可能难度。这对于利用</p><p>基于源IP地址的可信关系(rlogin，防火墙过滤等) 或者隐含源地址的攻击非常重要。这一类哄骗攻击现在</p><p>很少见，但一些 主机仍然存在这方面的漏洞。实际的难度值基于统计采样，因此可能会有 一些波动。通</p><p>常采用英国的分类较好，如“worthy challenge”或者 “trivial joke”。在详细模式(-v)下只以 普通的方式输</p><p>出，如果同时使用-O，还报告IPID序列产生号。 很多主机的序列号是“增加”类别，即在每个发送包的IP</p><p>头中 增加ID域值， 这对一些先进的信息收集和哄骗攻击来说是个漏洞。</p><p><a href="http://nmap.org/book/osdetect.html">http://nmap.org/book/osdetect.html</a> 文档使用多种语言描述了版本检测的方式、使用和定制。</p><p>采用下列选项启用和控制操作系统检测:</p><p>-O (启用操作系统检测)</p><p>也可以使用-A来同时启用操作系统检测和版本检测。</p><p>–osscan-limit (针对指定的目标进行操作系统检测)</p><p>如果发现一个打开和关闭的TCP端口时，操作系统检测会更有效。 采用这个选项，Nmap只对满足</p><p>这个条件的主机进行操作系统检测，这样可以 节约时间，特别在使用-P0扫描多个主机时。这个选</p><p>项仅在使用 -O或-A 进行操作系统检测时起作用。</p><p>–osscan-guess; –fuzzy (推测操作系统检测结果) </p><p>当Nmap无法确定所检测的操作系统时，会尽可能地提供最相近的匹配，Nmap默认 进行这种匹</p><p>配，使用上述任一个选项使得Nmap的推测更加有效。</p><h2 id="时间和性能"><a href="#时间和性能" class="headerlink" title="时间和性能"></a>时间和性能</h2><p>Nmap开发的最高优先级是性能。在本地网络对一个主机的默认扫描(nmap )需要1/5秒。而仅仅眨眼</p><p>的 时间，就需要扫描上万甚至几十万的主机。此外，一些特定的扫描选项会明显增 加扫描时间，如UDP</p><p>扫描和版本检测。同样，防火墙配置以及特殊的响应速度限制也会 增加时间。Nmap使用了并行算法和</p><p>许多先进的算法来加速扫描，用户对Nmap如何 工作有最终的控制权。高级用户可以仔细地调整Nmap</p><p>命令，在满足时间要求的同时获得他们所关心的信息。</p><p>改善扫描时间的技术有：忽略非关键的检测、升级最新版本的Nmap(性能增强不断改善)。 优化时间参</p><p>数也会带来实质性的变化，这些参数如下。</p><p>–min-hostgroup ; –max-hostgroup (调整并行扫描组的大小)</p><p>Nmap具有并行扫描多主机端口或版本的能力，Nmap将多个目标IP地址 空间分成组，然后在同一</p><p>时间对一个组进行扫描。通常，大的组更有效。缺 点是只有当整个组扫描结束后才会提供主机的扫</p><p>描结果。如果组的大小定义 为50，则只有当前50个主机扫描结束后才能得到报告(详细模式中的补</p><p>充信息 除外)。默认方式下，Nmap采取折衷的方法。开始扫描时的组较小， 最小为5，这样便于尽</p><p>快产生结果；随后增长组的大小，最大为1024。确切的 大小依赖于所给定的选项。为保证效率，</p><p>针对UDP或少量端口的TCP扫描，Nmap 使用大的组。–max-hostgroup选项用于说明使用最大的</p><p>组，Nmap不 会超出这个大小。–min-hostgroup选项说明最小的组，Nmap 会保持组大于这个</p><p>值。如果在指定的接口上没有足够的目标主机来满足所 指定的最小值，Nmap可能会采用比所指定</p><p>的值小的组。这两个参数虽然很少使用， 但都用于保持组的大小在一个指定的范围之内。这些选项</p><p>的主要用途是说明一个最小组的大小，使得整个扫描更加快速。通常 选择256来扫描C类网段。对</p><p>于端口数较多的扫描，超出该值没有意义。对于 端口数较少的扫描，2048或更大的组大小是有帮</p><p>助的。</p><p>–min-parallelism ; –max-parallelism (调整探测报文的并行度)</p><p>这些选项控制用于主机组的探测报文数量，可用于端口扫描和主机发现。默认状态下， Nmap基于</p><p>网络性能计算一个理想的并行度，这个值经常改变。如果报文被丢弃， Nmap降低速度，探测报文</p><p>数量减少。随着网络性能的改善，理想的探测报文数量会缓慢增加。 这些选项确定这个变量的大小</p><p>范围。默认状态下，当网络不可靠时，理想的并行度值 可能为1，在好的条件下，可能会增长至几</p><p>百。最常见的应用是–min-parallelism值大于1，以加快 性能不佳的主机或网络的扫描。这个选项</p><p>具有风险，如果过高则影响准确度，同时 也会降低Nmap基于网络条件动态控制并行度的能力。这</p><p>个值设为10较为合适， 这个值的调整往往作为最后的手段。–max-parallelism选项通常设为1，以</p><p>防止Nmap在同一时间 向主机发送多个探测报文，和选择–scan-delay同时使用非常有用，虽然 这</p><p>个选项本身的用途已经很好。</p><p>–min-rtt-timeout ， –max-rtt-timeout ， –initial-rtt-timeout (调整探测报文超时)</p><p>Nmap使用一个运行超时值来确定等待探测报文响应的时间，随后会放弃或重新 发送探测报文。</p><p>Nmap基于上一个探测报文的响应时间来计算超时值，如果网络延迟比较显著 和不定，这个超时值</p><p>会增加几秒。初始值的比较保守(高)，而当Nmap扫描无响应 的主机时，这个保守值会保持一段时</p><p>间。这些选项以毫秒为单位，采用小的–max-rtt-timeout值，使 –initial-rtt-timeout值大于默认值</p><p>可以明显减少扫描时间，特别 是对不能ping通的扫描(-P0)以及具有严格过滤的网络。如果使用太 </p><p>小的值，使得很多探测报文超时从而重新发送，而此时可能响应消息正在发送，这使得整个扫描的</p><p>时 间会增加。如果所有的主机都在本地网络，对于–max-rtt-timeout值来 说，100毫秒比较合</p><p>适。如果存在路由，首先使用ICMP ping工具ping主机，或使用其 它报文工具如hpings，可以更好</p><p>地穿透防火墙。查看大约10个包的最大往返时间，然后将 –initial-rtt-timeout设成这个时间的2</p><p>倍，–max-rtt-timeout 可设成这个时间值的3倍或4倍。通常，不管ping的时间是多少，最大的rtt</p><p>值不得小于100ms， 不能超过1000ms。–min-rtt-timeout这个选项很少使用，当网络不可靠时，</p><p>Nmap的默认值也显得过于强烈，这时这个选项可起作用。当网络看起来不可靠时，Nmap仅将 超</p><p>时时间降至最小值，这个情况是不正常的，需要向nmap-dev邮件列表报告bug。</p><p>–host-timeout (放弃低速目标主机)</p><p>由于性能较差或不可靠的网络硬件或软件、带宽限制、严格的防火墙等原因， 一些主机需要很长的</p><p>时间扫描。这些极少数的主机扫描往往占 据了大部分的扫描时间。因此，最好的办法是减少时间消</p><p>耗并且忽略这些主机，使用 –host-timeout选项来说明等待的时间(毫秒)。通常使用1800000 来保</p><p>证Nmap不会在单个主机上使用超过半小时的时间。需要注意的是，Nmap在这半小时中可以 同时</p><p>扫描其它主机，因此并不是完全放弃扫描。超时的主机被忽略，因此也没有针对该主机的 端口表、</p><p>操作系统检测或版本检测结果的输出。</p><p>–scan-delay ; –max-scan-delay (调整探测报文的时间间隔)</p><p>这个选项用于Nmap控制针对一个主机发送探测报文的等待时间(毫秒)，在带宽 控制的情况下这个</p><p>选项非常有效。Solaris主机在响应UDP扫描探测报文报文时，每秒 只发送一个ICMP消息，因此</p><p>Nmap发送的很多数探测报文是浪费的。–scan-delay 设为1000，使Nmap低速运行。Nmap尝试</p><p>检测带宽控制并相应地调整扫描的延迟，但 并不影响明确说明何种速度工作最佳。–scan-delay的</p><p>另一个用途是躲闭基于阈值的入侵检测和预防 系统(IDS/IPS)。</p><p>-T &lt;Paranoid|Sneaky|Polite|Normal|Aggressive|Insane&gt; (设置时间模板)</p><p>上述优化时间控制选项的功能很强大也很有效，但有些用户会被迷惑。此外， 往往选择合适参数的</p><p>时间超过了所需优化的扫描时间。因此，Nmap提供了一些简单的方法，使用6个时间模板，使用</p><p>时采用-T选项及数字(0 - 5) 或名称。模板名称有paranoid (0)、sneaky (1)、polite (2)、</p><p>normal(3)、 aggressive (4)和insane (5)。前两种模式用于IDS躲避，Polite模式降低了扫描速度以</p><p>使用更少的带宽和目标主机资源。默认模式为Normal，因此-T3 实际上是未做任何优化。</p><p>Aggressive模式假设用户具有合适及可靠的网络从而加速扫描。Insane模式假设用户具有特别快的</p><p>网络或者愿意为获得速度而牺牲准确性。用户可以根据自己的需要选择不同的模板，由Nmap负责</p><p>选择实际的时间值。 模板也会针对其它的优化控制选项进行速度微调。例如，-T4 针对TCP端口禁</p><p>止动态扫描延迟超过10ms，-T5对应的值为5ms。 模板可以和优化调整控制选项组合使用，但模板</p><p>必须首先指定，否则模板的标准值会覆盖用户指定的值。建议在扫描可靠的网络时使用 -T4，即使</p><p>在自己要增加优化控制选项时也使用(在命令行的开始)，从而从这些额外的较小的优化中获益。如</p><p>果用于有足够的带宽或以太网连接，仍然建议使用-T4选项。 有些用户喜欢-T5选项，但这个过于强</p><p>烈。有时用户考虑到避免使主机 崩溃或者希望更礼貌一些会采用-T2选项。他们并没意识到-T</p><p>Polite选项是如何的慢，这种模式的扫描比默认方式实际上要多花10倍的时间。默认时间选项(-T3)</p><p>很少有主机崩溃和带宽问题，比较适合于谨慎的用户。不进行版本检测比进行时间调整能更有效地</p><p>解决这些问题。虽然-T0和-T1选项可能有助于避免IDS告警，但在进行上千个主机或端口扫描时，</p><p>会显著增加时间。对于这种长时间的扫描，宁可设定确切的时间值，而不要去依赖封装的-T0和-T1</p><p>选项。T0选项的主要影响是对于连续扫描，在一个时间只能扫描一个端口， 每个探测报文的发送</p><p>间隔为5分钟。T1和T2选项比较类似， 探测报文间隔分别为15秒和0.4秒。T3是Nmap的默认选</p><p>项，包含了并行扫描。 T4选项与 –max-rtt-timeout 1250 –initial-rtt-timeout 500 等价，最大TCP</p><p>扫描延迟为10ms。T5等价于 –max-rtt-timeout 300 –min-rtt-timeout 50 –initial-rtt-timeout</p><p>250 –host-timeout 900000，最大TCP扫描延迟为5ms。</p><h2 id="防火墙-IDS躲避和哄骗"><a href="#防火墙-IDS躲避和哄骗" class="headerlink" title="防火墙/IDS躲避和哄骗"></a>防火墙/IDS躲避和哄骗</h2><p>很多Internet先驱们设想了一个全球开放的网络，使用全局的IP地址空间，使得任何两个节点之间都有</p><p>虚拟连接</p><p>这使得主机间可以作为真正的对等体，相互间提供服务和获取信息。</p><p>人们可以在工作时访问家里所有的系统、调节空调温度、为提前到来的客人开门。</p><p>随后，这些全球连接的设想受到了地址空间短缺和安全考虑的限制。在90年代早期，各种机构开始部署</p><p>防火墙来实现减少连接的目的，大型网络通过代理、NAT和包过滤器与未过滤的Internet隔离。不受限</p><p>的信息流被严格控制的可信通信通道信息流所替代。</p><p>类似防火墙的网络隔离使得对网络的搜索更加困难，随意的搜索变得不再简单。然而，Nmap提供了很</p><p>多特性用于理解这些复杂的网络，并且检验这些过滤器是否正常工作。此外，Nmap提供了绕过某些较</p><p>弱的防范机制的手段。检验网络安全状态最有效的方法之一是尝试哄骗网络，将自己想象成一个攻击</p><p>者，使用本节提供的技术来攻击自己的网络。如使用FTP bounce扫描、Idle扫描、分片攻击或尝试穿透</p><p>自己的代理。</p><p>有时，人们建议Nmap不应该提供躲闭防火墙规则或哄骗IDS的功能， 这些功能可能会被攻击者滥用，</p><p>然而管理员却可以利用这些功能来增强安全性。</p><p>实际上，攻击的方法仍可被攻击者利用，他们可以发现其它工具或Nmap的补丁程序。同时，管理员发</p><p>现攻击者的工作更加困难，相比较采取措施来预防执行FTP Bounce攻击的工具而言，部署先进的、打过</p><p>补丁的FTP服务器更 加有效。</p><p>-f (报文分段); –mtu (使用指定的MTU)</p><p>-f选项要求扫描时(包挺ping扫描)使用 小的IP包分段。</p><p>其思路是将TCP头分段在几个包中，使得包过滤器、 IDS以及其它工具的检测更加困难。</p><p>必须小心使用这个选项，有些系 统在处理这些小包时存在问题，例如旧的网络嗅探器Sniffit在接收</p><p>到第一个分段时会立刻出现分段错误。该选项使用一次，Nmap在IP 头后将包分成8个字节或更</p><p>小。因此，一个20字节的TCP头会被分成3个 包，其中2个包分别有TCP头的8个字节，另1个包有</p><p>TCP头的剩下4个字 节。当然，每个包都有一个IP头。再次使用-f可使用 16字节的分段(减少分段数</p><p>量)。使用–mtu选项可 以自定义偏移的大小，使用时不需要-f，偏移量必须 是8的倍数。包过滤器</p><p>和防火墙对所有的IP分段排队，如Linux核心中的 CONFIG-IP-ALWAYS-DEFRAG配置项，分段包不</p><p>会直接使用。一些网络无法 承受这样所带来的性能冲击，会将这个配置禁止。其它禁止的原因有分</p><p>段 包会通过不同的路由进入网络。一些源系统在内核中对发送的报文进行 分段，使用iptables连接</p><p>跟踪模块的Linux就是一个例子。当使用类似Ethereal 的嗅探器时，扫描必须保证发送的报文要分</p><p>段。如果主机操作系统会产 生问题，尝试使用–send-eth选项以避开IP层而直接 发送原始的以太网</p><p>帧。</p><p>-D &lt;decoy1 [，decoy2][，ME]，…&gt; (使用诱饵隐蔽扫描)</p><p>为使诱饵扫描起作用，需要使远程主机认为是诱饵在扫描目标网络。</p><p> IDS可能会报个某个IP的5-10个端口扫描，但并不知道哪个IP在扫描以及 哪些不是诱饵。但这种方</p><p>式可以通过路由跟踪、响应丢弃以及其它主动 机制在解决。这是一种常用的隐藏自身IP地址的有效</p><p>技术。使用逗号分隔每个诱饵主机，也可用自己的真实IP作为诱饵，这时可使用 ME选项说明。如</p><p>果在第6个位置或 更后的位置使用ME选项，一些常用 端口扫描检测器(如Solar Designer’s</p><p>excellent scanlogd)就不会报告 这个真实IP。如果不使用ME选项，Nmap 将真实IP放在一个随机</p><p>的位置注意，作为诱饵的主机须在工作状态，否则会导致目标主机的SYN洪水攻击。 如果在网络中</p><p>只有一个主机在工作，那就很容易确定哪个主机在扫描。也可 使用IP地址代替主机名(被诱骗的网</p><p>络就不可能在名字服务器日志中发现)。诱饵可用在初始的ping扫描(ICMP、SYN、ACK等)阶段或真</p><p>正的端口扫描 阶段。诱饵也可以用于远程操作系统检测(-O)。在进行版 本检测或TCP连接扫描时，</p><p>诱饵无效。使用过多的诱饵没有任何价值，反而导致扫描变慢并且结果不准确。 此外，一些ISP会</p><p>过滤哄骗的报文，但很多对欺骗IP包没有任何限制。</p><p>-S <IP_Address> (源地址哄骗)</p><p>在某些情况下，Nmap可能无法确定你的源地址(如果这样，Nmap会给出 提示)。</p><p>此时，使用-S选项并说明所需发送包的接口IP地址。这个标志的另一个用处是哄骗性的扫描，使得</p><p>目标认为是另 一个地址在进行扫描。可以想象某一个竞争对手在不断扫描某个公司！ -e选项常在</p><p>这种情况下使用，也可采用-P0选项。</p><p>–source-port ; -g (源端口哄骗)</p><p>仅依赖于源端口号就信任数据流是一种常见的错误配置，这个问题非常好理解。例如一个管理员部</p><p>署了一个新的防火墙，但招来了很多用户的不满，因为 他们的应用停止工作了。可能是由于外部的</p><p>UDP DNS服务器响应无法进入网络，而导致DNS的崩溃。FTP是另一个常见的例子，在FTP传输</p><p>时，远程服务器尝试和内部用 建立连接以传输数据。对这些问题有安全解决方案，通常是应用级代</p><p>理或协议分析防火墙模块。 但也存在一些不安全的方案。注意到DNS响应来自于53端口，FTP连接</p><p>来自于20端口，很多管理员会掉入一个陷阱，即允许来自于这些端口的数据进入 网络。他们认为</p><p>这些端口里不会有值得注意的攻击和漏洞利用。此外，管理员 或许认为这是一个短期的措施，直至</p><p>他们采取更安全的方案。但他们忽视了安全的 升级。不仅仅是工作量过多的网络管理员掉入这种陷</p><p>阱，很多产品本身也会有这类 不安全的隐患，甚至是微软的产品。Windows 2000和Windows XP</p><p>中包含的IPsec过滤 器也包含了一些隐含规则，允许所有来自88端口(Kerberos)的TCP和UDP数据</p><p>流。另 一个常见的例子是Zone Alarm个人防火墙到2.1.25版本仍然允许源端口53(DNS)或</p><p>67(DHCP)的UDP包进入。Nmap提供了-g和–source-port选项(它们是 等价的)，用于利用上述弱</p><p>点。只需要提供一个端口号，Nmap就可以从这些 端口发送数据。为使特定的操作系统正常工作，</p><p>Nmap必须使用不同的端口号。 DNS请求会忽略–source-port选项，这是因为Nmap依靠系 统库</p><p>来处理。大部分TCP扫描，包括SYN扫描，可以完全支持这些选项，UDP扫 描同样如此。</p><p>–data-length (发送报文时 附加随机数据)</p><p>正常情况下，Nmap发送最少的报文，只含一个包头。因此TCP包通常是40字节，ICMP ECHO请求</p><p>只有28字节。这个选项告诉Nmap在发送的报文上附加指定数量的随机字节。操作系统检测(-O)包</p><p>不受影响， 但大部分ping和端口扫描包受影响，这会使处理变慢，但对扫描的影响较小。</p><p>–ttl (设置IP time-to-live域)</p><p>设置IPv4报文的time-to-live域为指定的值。</p><p>–randomize-hosts (对目标主机的顺序随机排列)</p><p>告诉Nmap在扫描主机前对每个组中的主机随机排列，最多可达 8096个主机。这会使得扫描针对</p><p>不同的网络监控系统来说变得不是很 明显，特别是配合值较小的时间选项时更有效。如果需要对一</p><p>个较大 的组进行随机排列，需要增大nmap.h文件中 PING-GROUP-SZ的值，并重新编译。另一种</p><p>方法是使用列表扫描 (-sL -n -oN )，产生目标IP的列表， 使用Perl脚本进行随机化，然后使用-iL提</p><p>供给Nmap。</p><p>–spoof-mac &lt;mac address，prefix，or vendor name&gt; (MAC地址哄骗)</p><p>要求Nmap在发送原以太网帧时使用指定的MAC地址，这个选项隐含了 –send-eth选项，以保证</p><p>Nmap真正发送以太网包。MAC地址有几 种格式。如果简单地使用字符串“0”，Nmap选择一个完</p><p>全随机的MAC 地址。如果给定的字符品是一个16进制偶数(使用:分隔)，Nmap将使用这个MAC地</p><p>址。 如果是小于12的16进制数字，Nmap会随机填充剩下的6个字节。如果参数不是0或16进 制字</p><p>符串，Nmap将通过nmap-mac-prefixes查找 厂商的名称(大小写区分)，如果找到匹配，Nmap将</p><p>使用厂商的OUI(3字节前缀)，然后 随机填充剩余的3个节字。正确的–spoof-mac参数有， Apple， </p><p>0，01:02:03:04:05:06， deadbeefcafe，0020F2， 和Cisco.</p><h2 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h2><p>任何安全工具只有在输出结果时才是有价值的，如果没有通过组织和 易于理解的方式来表达，复杂的测试和算法几乎没有意义。Nmap提供了一些 方式供用户和其它软件使用，实际上，没有一种方式可以使所有人满意。 因此Nmap提供了一些格式，包含了方便直接查看的交互方式和方便软件处理的XML格式。 除了提供输出格式外，Nmap还提供了选项来控制输出的细节以及调试 信息。输出内容可发送给标准输出或命名文件，可以追加或覆盖。输出文件还可 被用于继续中断的扫描。</p><p>Nmap提供5种不同的输出格式。默认的方式是interactive output， 发送给标准输出(stdout)。normaloutput方式类似于 interactive，但显示较少的运行时间信息 和告警信息，这是由于这些信息是在扫描完全结束后用于分析，而不是交互式的。XML输出是最重要的输出类型，可被转换成HTML，对于程序处理非常方便， 如用于Nmap图形用户接口或导入数据库。另两种输出类型比较简单，grepable output格式，在一行中包含目标主机最多的信息；sCRiPt KiDDi30utPUt 格式，用于考虑自己的用户 |&lt;-r4d。交互式输出是默认方式，没有相应的命令行选项，其它四种格式选项 使用相同的语法，采用一个参数，即存放结果的文件名。多种格式可同时 使用，但一种格式只能使用一次。例如，在标准输出用于查看的同时，可将结 果保存到XML文件用于程序分析，这时可以使用选项-oX myscan.xml -oNmyscan.nmap。 为便于描述的简化，本章使用类似于myscan.xml的简单文件名， 建议采用更具有描述性的文件名。文件名的选择与个人喜好有关，建议增加 扫描日期以及一到两个单词来描述，并放置于一个目录中。</p><p>在将结果输出到文件的同时，Nmap仍将结果发送给标准输出。例如， 命令nmap -oX myscan.xmltarget将输出XML至myscan.xml，并在stdout 上打印相同的交互式结果，而此时-oX选项没有采用。可以 使用连字符作为选项来改变，这使得Nmap禁止交互式输出，而是将结果打印到 所指定的标准输出流中。因此，命令nmap -oX - target只 输出XML至标准输出stdout。严重错误仍然是输出到标准错误流stderr中。</p><p>与其它Nmap参数不同，日志文件选项的空格(如-oX)和 文件名或连字符是必需的。如果省略了标记，例如-oG-或 -oXscan.xml，Nmap的向后兼容特点将建立 标准格式的输出文件，相应的文件名为G-和Xscan.xml。</p><p>Nmap还提供了控制扫描细节以及输出文件的添加或覆盖的选项，这些选项 如下所述。</p><p>Nmap输出格式</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">-<span class="hljs-keyword">oN</span> (标准输出)<br></code></pre></td></tr></table></figure><p>要求将标准输出直接写入指定的文件。如上所述，这个格式与交互式输出略有不同。</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-oX (XML输出)</span><br></code></pre></td></tr></table></figure><p>要求XML输出直接写入指定的文件。Nmap包含了一个文档类型定义(DTD)，使XML解析器有效地进行XML输出。这主要是为了程序应用，同时也可以协助人工解释 Nmap的XML输出。DTD定义了合法的格式元素，列举可使用的属性和 值。最新的版本可在 <a href="http://www.insecure.org/nmap/data/nmap.dtd%E8%8E%B7%E5%8F%96%E3%80%82XML%E6%8F%90%E4%BE%9B%E4%BA%86%E5%8F%AF%E4%BE%9B%E8%BD%AF%E4%BB%B6%E8%A7%A3%E6%9E%90%E7%9A%84%E7%A8%B3%E5%AE%9A%E6%A0%BC%E5%BC%8F%E8%BE%93%E5%87%BA%EF%BC%8C%E4%B8%BB%E8%A6%81%E7%9A%84%E8%AE%A1%E7%AE%97%E6%9C%BA">http://www.insecure.org/nmap/data/nmap.dtd获取。XML提供了可供软件解析的稳定格式输出，主要的计算机</a> 语言都提供了免费的XML解析器，如C/C++，Perl，Python和Java。 针对这些语言有一些捆绑代码用于处理Nmap的输出和特定的执行程序。 例如perl CPAN中的Nmap::Scanner 和Nmap::Parser。 对几乎所有与Nmap有接口的主要应用来说，XML是首选的格式。XML输出引用了一个XSL样式表，用于格式化输出结果，类似于 HTML。最方便的方法是将XML输出加载到一个Web浏览器，如Firefox 或IE。由于nmap.xsl文件的绝对 路径，因此通常只能在运行了Nmap的机器上工作(或类似配置的机器)。类似于任何支持Web机器的HTML文件，–stylesheet 选项可用于建立可移植的XML文件。</p><h2 id="细节和调试选项"><a href="#细节和调试选项" class="headerlink" title="细节和调试选项"></a>细节和调试选项</h2><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-v (提高输出信息的详细度)</span><br></code></pre></td></tr></table></figure><p>通过提高详细度，Nmap可以输出扫描过程的更多信息。 输出发现的打开端口，若Nmap认为扫描需要更多时间会显示估计 的结束时间。这个选项使用两次，会提供更详细的信息。这个选 项使用两次以上不起作用。大部分的变化仅影响交互式输出，也有一些影响标准和脚本 小子输出。其它输出类型由机器处理，此时Nmap默认提供详细的信 息，不需要人工干预。然而，其它模式也会有一 些变化，省略一些 细节可以减小输出大小。例如，Grep输出中的注释行提供所有扫描 端口列表，但由于这些信息过长，因此只能在细节模式中输出。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss">-d <span class="hljs-selector-attr">[level]</span> (提高或设置调试级别)<br></code></pre></td></tr></table></figure><p>当详细模式也不能为用户提供足够的数据时，使用调试可以得到更 多的信息。使用细节选项(-v)时，可启用命令行参数 (-d)，多次使用可提高调试级别。也可在-d 后面使用参数设置调试级别。例如，-d9设定级别9。这是 最高的级别，将会产生上千行的输出，除非只对很少的端口和目标进行简单扫描。如果Nmap因为Bug而挂起或者对Nmap的工作及原理有疑问，调试输出 非常有效。主要是开发人员用这个选项，调试行不具备自我解释的特点。 例如，Timeoutvals: srtt: -1 rttvar: -1to: 1000000 delta 14987 ==&gt; srtt: 14987 rttvar: 14987 to: 100000。如果对某行输出不明白， 可以忽略、查看源代码或向开发列表(nmap-dev)求助。有些输出行会有自 我解释的特点，但随着调试级别的升高，会越来越含糊。</p><h2 id="其它选项"><a href="#其它选项" class="headerlink" title="其它选项"></a>其它选项</h2><p>本节描述一些重要的(和并不重要)的选项，这些选项不适合其它任何地方。</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-number">-6</span> (启用IPv6扫描) <br></code></pre></td></tr></table></figure><p>从2002年起，Nmap提供对IPv6的一些主要特征的支持。ping扫描(TCP-only)、 连接扫描以及版本检测都支持IPv6。除增加-6选项外， 其它命令语法相同。当然，必须使用IPv6地址来替换主机名，如 3ffe:7501:4819:2000:210:f3ff:fe03:14d0。 除“所关注的端口”行的地址部分为IPv6地址。IPv6目前未在全球广泛采用，目前在一些国家(亚洲)应用较多， 一些高级操作系统支持IPv6。使用Nmap的IPv6功能，扫描的源和目 的都需要配置IPv6。如果ISP(大部分)不分配IPv6地址，Nmap可以采用 免费的隧道代理。一种较好的选择是BT Exact，位于<a href="https://tb.ipv6.btexact.com/%E3%80%82">https://tb.ipv6.btexact.com/。</a> 此外，还有Hurricane Electric，位于<a href="http://ipv6tb.he.net/%E3%80%826to4%E9%9A%A7%E9%81%93%E6%98%AF">http://ipv6tb.he.net/。6to4隧道是</a> 另一种常用的免费方法。</p><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p>下面给出一些实例，简单的、复杂的到深奥的。为更具体，一 些例子使用了实际的IP地址和域名。在这些位置，可以使用你自己网络 的地址/域名替换。注意，扫描其它网络不一定合法，一些网络管理员不愿看到 未申请过的扫描，会产生报怨。因此，先获得允许是最好的办法。如果是为了测试，scanme.nmap.org 允许被扫描。但仅允许使用Nmap扫描并禁止测试漏洞或进行DoS攻击。为 保证带宽，对该主机的扫描每天不要超过12次。如果这个免费扫描服务被 滥用，系统将崩溃而且Nmap将报告解析 指定的主机名/IP地址失败：scanme.nmap.org。这些免 费扫描要求也适用于scanme2.nmap.org、 scanme3.nmap.org等等，虽然这些 主机目前还不存在。</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">nmap</span> -v scanme.<span class="hljs-keyword">nmap</span>.org<br></code></pre></td></tr></table></figure><p>这个选项扫描主机scanme.nmap.org中 所有的保留TCP端口。选项-v启用细节模式。</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">nmap</span> -sS -O scanme.<span class="hljs-keyword">nmap</span>.org/<span class="hljs-number">24</span><br></code></pre></td></tr></table></figure><p>进行秘密SYN扫描，对象为主机Saznme所在的“C类”网段 的255台主机。同时尝试确定每台工作主机的操作系统类型。因为进行SYN扫描 和操作系统检测，这个扫描需要有根权限。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">nmap</span> -sV -p <span class="hljs-number">22</span>，<span class="hljs-number">53</span>，<span class="hljs-number">110</span>，<span class="hljs-number">143</span>，<span class="hljs-number">4564</span> <span class="hljs-number">198</span>.<span class="hljs-number">116</span>.<span class="hljs-number">0</span>-<span class="hljs-number">255</span>.<span class="hljs-number">1</span>-<span class="hljs-number">127</span><br></code></pre></td></tr></table></figure><p>进行主机列举和TCP扫描，对象为B类188.116网段中255个8位子网。这 个测试用于确定系统是否运行了sshd、DNS、imapd或4564端口。如果这些端口 打开，将使用版本检测来确定哪种应用在运行。</p>]]></content>
    
    
    <categories>
      
      <category>网络安全笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>nmap</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux：5.文本处理工具和正则表达式</title>
    <link href="/2022/08/02/Linux%EF%BC%9A5.%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7%E5%92%8C%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    <url>/2022/08/02/Linux%EF%BC%9A5.%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7%E5%92%8C%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="文本编辑工具VIM"><a href="#文本编辑工具VIM" class="headerlink" title="文本编辑工具VIM"></a>文本编辑工具VIM</h1><span id="more"></span><h2 id="vi和vim简介"><a href="#vi和vim简介" class="headerlink" title="vi和vim简介"></a>vi和vim简介</h2><p>文本编辑种类：</p><p>全屏编辑器：nano（字符工具）, gedit(图形化工具)，vi,vim</p><p>行编辑器：sed</p><p><strong>vi</strong></p><p>Visual editor，文本编辑器，是 Linux 必备工具之一，功能强大，学习曲线较陡峭，学习难度大</p><p><strong>vim</strong></p><p>VIsual editor iMproved ，和 vi 使用方法一致，但功能更为强大，不是必备软件</p><p>官网：<a href="http://www.vim.org其他相关编辑器：gvim">www.vim.org其他相关编辑器：gvim</a> 一个Vim编辑器的图形版本</p><h2 id="vim使用"><a href="#vim使用" class="headerlink" title="vim使用"></a>vim使用</h2><h3 id="vim命令格式"><a href="#vim命令格式" class="headerlink" title="vim命令格式"></a>vim命令格式</h3><figure class="highlight vim"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><pre><code class="hljs vim">+# 打开文件后，让光标处于第#行的行首，+默认行尾<br><br>+/PATTERN 让光标处于第一个被PATTERN匹配到的行行首<br><br>-<span class="hljs-keyword">b</span> <span class="hljs-keyword">file</span> 二进制方式打开文件<br><br>-d file1 file2… 比较多个文件，相当于 vimdiff<br><br>-<span class="hljs-keyword">m</span> <span class="hljs-keyword">file</span>  只读打开文件<br><br>-<span class="hljs-keyword">e</span> <span class="hljs-keyword">file</span>  直接进入<span class="hljs-keyword">ex</span>模式，相当于执行<span class="hljs-keyword">ex</span> <span class="hljs-keyword">file</span> <br><br>-<span class="hljs-keyword">y</span> <span class="hljs-keyword">file</span>  Easy <span class="hljs-keyword">mode</span> (like <span class="hljs-string">&quot;evim&quot;</span>, modeless)，直接可以操作文件，ctrl+<span class="hljs-keyword">o</span>:<span class="hljs-keyword">wq</span>|q! 保存和不<br><br>保存退出<br></code></pre></td></tr></table></figure><p><strong>三种常见模式：</strong></p><ol><li>命令或普通(Normal)模式：默认模式，可以实现移动光标，剪切/粘贴文本</li><li>插入(Insert)或编辑模式：用于修改文本</li><li>扩展命令(extended command )或命令(末)行模式：保存，退出等</li></ol><p><strong>插入模式：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">i</span> insert, 在光标所在处输入<br><br><span class="hljs-selector-tag">I</span> 在当前光标所在行的行首输入<br><br><span class="hljs-selector-tag">a</span> append, 在光标所在处后面输入<br><br><span class="hljs-selector-tag">A</span> 在当前光标所在行的行尾输入<br><br>o 在当前光标所在行的下方打开一个新行<br><br>O 在当前光标所在行的上方打开一个新行<br></code></pre></td></tr></table></figure><h2 id="扩展命令模式"><a href="#扩展命令模式" class="headerlink" title="扩展命令模式"></a>扩展命令模式</h2><p>按“:”进入Ex模式 ，创建一个命令提示符: 处于底部的屏幕左侧</p><h3 id="扩展命令模式基本命令"><a href="#扩展命令模式基本命令" class="headerlink" title="扩展命令模式基本命令"></a><strong>扩展命令模式基本命令</strong></h3><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs llvm">w 写（存）磁盘文件<br><br>wq 写入并退出<br><br><span class="hljs-keyword">x</span> 写入并退出<br><br>X  加密<br><br>q 退出<br><br>q！ 不存盘退出，即使更改都将丢失 <br><br>r  filename 读文件内容到当前文件中<br><br>w  filename 将当前文件内容写入另一个文件<br><br><span class="hljs-title">!command</span> 执行命令<br><br>r<span class="hljs-title">!command</span> 读入命令的输出<br></code></pre></td></tr></table></figure><p><strong>地址定界</strong></p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs clean"># #具体第#行，例如<span class="hljs-number">2</span>表示第<span class="hljs-number">2</span>行<br><br>#,# #从左侧#表示起始行，到右侧#表示结尾行 <br><br>#,+# #从左侧#表示的起始行，加上右侧#表示的行数，范例：<span class="hljs-number">2</span>,+<span class="hljs-number">3</span> 表示<span class="hljs-number">2</span>到<span class="hljs-number">5</span>行<br><br>.  #当前行<br><br>$ #最后一行<br><br>.,$<span class="hljs-number">-1</span> #当前行到倒数第二行<br><br>% #全文, 相当于<span class="hljs-number">1</span>,$<br><br>/pattern/  #从当前行向下查找，直到匹配pattern的第一行,即:正则表达式<br><br>/pat1/,/pat2/ #从第一次被pat1模式匹配到的行开始，一直到第一次被pat2匹配到的行结束<br><br>\#,/pat/   #从指定行开始，一直找到第一个匹配pattern的行结束<br><br>/pat/,$   #向下找到第一个匹配patttern的行到整个文件的结尾的所有行<br></code></pre></td></tr></table></figure><h3 id="文本模式操作"><a href="#文本模式操作" class="headerlink" title="文本模式操作"></a>文本模式操作</h3><p><strong>移动光标</strong></p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs ldif"><span class="hljs-literal">-</span>  h: ← 左移<br><span class="hljs-literal">-</span>  l: → 右移<br><span class="hljs-literal">-</span>  j: ↓ 下移<br><span class="hljs-literal">-</span>  k: ↑ 上移<br><span class="hljs-literal">-</span>  gg: 光标移动文件开头<br><span class="hljs-literal">-</span>  G: 光标移动到文件末尾<br><span class="hljs-literal">-</span>  0: 光标移动到行首<br><span class="hljs-literal">-</span>  $: 光标移动到行尾<br><span class="hljs-literal">-</span>  123G：跳转到第123行<br><span class="hljs-literal">-</span>  w：下一个单词的词首<br><span class="hljs-literal">-</span>  e：当前或下一单词的词尾<br><span class="hljs-literal">-</span>  b：当前或前一个单词的词首<br><span class="hljs-literal">-</span>^ 跳转至行首的第一个非空白字符<br><span class="hljs-literal">-</span>0 跳转至行首<br><span class="hljs-literal">-</span>$ 跳转至行尾<br><span class="hljs-literal">-</span>) 下一句 <br><span class="hljs-literal">-</span>( 上一句<br><span class="hljs-literal">-</span>&#125; 下一段 <br><span class="hljs-literal">-</span>&#123; 上一段<br><span class="hljs-literal">-</span>Ctrl+f 向文件尾部翻一屏,相当于Pagedown<br><span class="hljs-literal">-</span>Ctrl+b 向文件首部翻一屏,相当于Pageup<br><span class="hljs-literal">-</span>Ctrl+d 向文件尾部翻半屏<br><span class="hljs-literal">-</span>Ctrl+u 向文件首部翻半屏<br><span class="hljs-literal">-</span>x 剪切光标处的字符<br><span class="hljs-literal">-</span><span class="hljs-comment">#x 剪切光标处起始的#个字符</span><br><span class="hljs-literal">-</span>xp 交换光标所在处的字符及其后面字符的位置<br><span class="hljs-literal">-</span>~ 转换大小写<br><span class="hljs-literal">-</span>J 删除当前行后的换行符<br><span class="hljs-literal">-</span>r 只替换光标所在处的一个字符<br><span class="hljs-literal">-</span>R 切换成REPLACE模式（在末行出现-- REPLACE -- 提示）,按ESC回到命令模式<br></code></pre></td></tr></table></figure><p><strong>删除光标</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-bullet">-  </span>x: 删除光标后一个字符,相当于 Del<br><span class="hljs-bullet">-  </span>X: 删除光标前一个字符,相当于 Backspace<br><span class="hljs-bullet">-  </span>dw: 删除光标开始位置的字,包含光标所在字符<br><span class="hljs-bullet">-  </span>光标必须移动到删除单词的首字符上<br><span class="hljs-bullet">-  </span>d0: 删除光标前本行所有内容,不包含光标所在字符<br><span class="hljs-bullet">-  </span>D(d$): 删除光标后本行所有内容,包含光标所在字符<br><span class="hljs-bullet">-  </span>dd: 删除光标所在行<br><span class="hljs-bullet">-  </span>n dd 删除指定的行数<br><span class="hljs-bullet">-  </span>并不是真的删除，实际上是剪切<br></code></pre></td></tr></table></figure><p><strong>撤销操作</strong></p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs clean">u 撤销最近的更改，相当于windows中ctrl+z<br>#u 撤销之前多次更改<br>U 撤消光标落在这行后所有此行的更改<br>Ctrl-r 重做最后的“撤消”更改，相当于windows中crtl+y<br>. 重复前一个操作<br>#. 重复前一个操作#次<br></code></pre></td></tr></table></figure><p><strong>复制粘贴</strong></p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">yy:</span> 复制当前行,n yy 复制 n 行<br><br><span class="hljs-symbol">p:</span> 在光标所在位置向下新开辟一行,粘贴<br><br><span class="hljs-symbol">P:</span> 从光标所在行, 开始粘贴<br></code></pre></td></tr></table></figure><p><strong>查找操作</strong></p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xl">/<span class="hljs-function"><span class="hljs-title">hello</span> -&gt;</span> 从光标所在位置向后查找 hello<br><br>n: 下一个<br><br>N：上一个<br><br>?<span class="hljs-function"><span class="hljs-title">hello</span> -&gt;</span> 从光标所在位置向前查找 hello<br><br>n: 上一个<br><br>N：下一个<br><br>在要查询的单词上使用 # 进行查找<br></code></pre></td></tr></table></figure><p><strong>替换操作</strong></p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">r:</span> 替换当前字符<br></code></pre></td></tr></table></figure><h3 id="vim快捷键总结"><a href="#vim快捷键总结" class="headerlink" title="vim快捷键总结"></a>vim快捷键总结</h3><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220802124057774.png" alt="image-20220802124057774"></p><p><img src="image-20220802124127018.png" alt="image-20220802124127018"></p><h1 id="文本常见处理工具"><a href="#文本常见处理工具" class="headerlink" title="文本常见处理工具"></a>文本常见处理工具</h1><h2 id="文件内容查看命令"><a href="#文件内容查看命令" class="headerlink" title="文件内容查看命令"></a>文件内容查看命令</h2><h3 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h3><p>cat可以查看文件内容</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-E：显示行结束符$</span><br><br><span class="hljs-deletion">-A：显示所有控制符</span><br><br><span class="hljs-deletion">-n：对显示出的每一行进行编号</span><br><br><span class="hljs-deletion">-b：非空行编号</span><br><br><span class="hljs-deletion">-s：压缩连续的空行成一行</span><br></code></pre></td></tr></table></figure><h1 id="通配符字符"><a href="#通配符字符" class="headerlink" title="通配符字符"></a>通配符字符</h1><p>文件通配符可以用来匹配符合条件的多个文件，方便批量管理文件</p><p>通配符采有特定的符号，表示特定的含义，此特符号称为元 meta 字符</p><p>常见的通配符如下：</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs prolog">* 匹配零个或多个字符，但不匹配 <span class="hljs-string">&quot;.&quot;</span> 开头的文件，即隐藏文件<br><br>? 匹配任何单个字符,一个汉字也算一个字符<br><br>~ 当前用户家目录<br><br>~mage 用户mage家目录<br><br>[<span class="hljs-number">0</span><span class="hljs-number">-9</span>] 匹配数字范围<br><br>[a-z] 一个字母<br><br>[<span class="hljs-symbol">A</span>-<span class="hljs-symbol">Z</span>] 一个字母<br><br>[wang] 匹配列表中的任何的一个字符<br><br>[^wang] 匹配列表中的所有字符以外的字符<br><br>[^a-z] 匹配列表中的所有字符以外的字符<br><br>. 和 ~+ 当前工作目录<br><br>~-  前一个工作目录<br><br>[:digit:]：任意数字，相当于<span class="hljs-number">0</span><span class="hljs-number">-9</span><br>[:lower:]：任意小写字母,表示 a-z<br>[:upper:]: 任意大写字母,表示 <span class="hljs-symbol">A</span>-<span class="hljs-symbol">Z</span> <br>[:alpha:]: 任意大小写字母<br>[:alnum:]：任意数字或字母<br>[:blank:]：水平空白字符<br>[:space:]：水平或垂直空白字符<br>[:punct:]：标点符号<br>[:print:]：可打印字符<br>[:cntrl:]：控制（非打印）字符<br>[:graph:]：图形字符<br>[:xdigit:]：十六进制字符<br></code></pre></td></tr></table></figure><p>范例1：</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs mel">[root@instance-j4y73zvl app]# touch <span class="hljs-keyword">file</span>&#123;<span class="hljs-number">0.</span><span class="hljs-number">.9</span>&#125;.txt <span class="hljs-keyword">file</span>&#123;a..z&#125;.txt <span class="hljs-keyword">file</span>&#123;A..Z&#125;.txt<br>[root@instance-j4y73zvl app]# <span class="hljs-keyword">ls</span><br>file0.txt  file8.txt  filed.txt  fileh.txt  filel.txt  filep.txt  filet.txt  filex.txt<br>file1.txt  file9.txt  fileD.txt  fileH.txt  fileL.txt  fileP.txt  fileT.txt  fileX.txt<br>file2.txt  filea.txt  filee.txt  filei.txt  filem.txt  fileq.txt  fileu.txt  filey.txt<br>file3.txt  fileA.txt  fileE.txt  fileI.txt  fileM.txt  fileQ.txt  fileU.txt  fileY.txt<br>file4.txt  fileb.txt  filef.txt  filej.txt  filen.txt  filer.txt  filev.txt  filez.txt<br>file5.txt  fileB.txt  fileF.txt  fileJ.txt  fileN.txt  fileR.txt  fileV.txt  fileZ.txt<br>file6.txt  filec.txt  fileg.txt  filek.txt  fileo.txt  files.txt  filew.txt<br>file7.txt  fileC.txt  fileG.txt  fileK.txt  fileO.txt  fileS.txt  fileW.txt<br><br>[root@instance-j4y73zvl app]# <span class="hljs-keyword">ls</span> <span class="hljs-keyword">file</span>[c-f].txt<br>filec.txt  fileC.txt  filed.txt  fileD.txt  filee.txt  fileE.txt  filef.txt<br>[root@instance-j4y73zvl app]# <span class="hljs-keyword">ls</span> <span class="hljs-keyword">file</span>[A-F].txt<br>fileA.txt  fileB.txt  fileC.txt  fileD.txt  fileE.txt  fileF.txt<br>fileb.txt  filec.txt  filed.txt  filee.txt  filef.txt<br>[root@instance-j4y73zvl app]# <span class="hljs-keyword">ls</span> <span class="hljs-keyword">file</span>[wuwc].txt<br>filec.txt  fileu.txt  filew.txt<br><br>[root@instance-j4y73zvl app]# <span class="hljs-keyword">ls</span> <span class="hljs-keyword">file</span>[^wuwc].txt<br>file0.txt  file8.txt  fileD.txt  fileH.txt  fileL.txt  fileP.txt  fileT.txt  fileY.txt<br>file1.txt  file9.txt  filee.txt  filei.txt  filem.txt  fileq.txt  fileU.txt  filez.txt<br>file2.txt  filea.txt  fileE.txt  fileI.txt  fileM.txt  fileQ.txt  filev.txt  fileZ.txt<br>file3.txt  fileA.txt  filef.txt  filej.txt  filen.txt  filer.txt  fileV.txt<br>file4.txt  fileb.txt  fileF.txt  fileJ.txt  fileN.txt  fileR.txt  fileW.txt<br>file5.txt  fileB.txt  fileg.txt  filek.txt  fileo.txt  files.txt  filex.txt<br>file6.txt  fileC.txt  fileG.txt  fileK.txt  fileO.txt  fileS.txt  fileX.txt<br>file7.txt  filed.txt  fileh.txt  filel.txt  filep.txt  filet.txt  filey.txt<br></code></pre></td></tr></table></figure><p>范例2：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs lua">[root@instance-j4y73zvl app]# ls file<span class="hljs-string">[[:digit:]]</span>.txt<br>file0.txt  file2.txt  file4.txt  file6.txt  file8.txt<br>file1.txt  file3.txt  file5.txt  file7.txt  file9.txt<br><br>[root@instance-j4y73zvl app]# ls file<span class="hljs-string">[[:lower:]]</span>.txt<br>filea.txt  filee.txt  filei.txt  filem.txt  fileq.txt  fileu.txt  filey.txt<br>fileb.txt  filef.txt  filej.txt  filen.txt  filer.txt  filev.txt  filez.txt<br>filec.txt  fileg.txt  filek.txt  fileo.txt  files.txt  filew.txt<br>filed.txt  fileh.txt  filel.txt  filep.txt  filet.txt  filex.txt<br><br>[root@instance-j4y73zvl app]# ls file<span class="hljs-string">[[:upper:]]</span>.txt<br>fileA.txt  fileE.txt  fileI.txt  fileM.txt  fileQ.txt  fileU.txt  fileY.txt<br>fileB.txt  fileF.txt  fileJ.txt  fileN.txt  fileR.txt  fileV.txt  fileZ.txt<br>fileC.txt  fileG.txt  fileK.txt  fileO.txt  fileS.txt  fileW.txt<br>fileD.txt  fileH.txt  fileL.txt  fileP.txt  fileT.txt  fileX.txt<br></code></pre></td></tr></table></figure><p>范例3：</p><p>范例4：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">1、显示<span class="hljs-string">/etc</span>目录下所有以r开头，以一个小写字母结尾，且中间出现至少一位数字的文件或目录列表<br><br>2、显示<span class="hljs-string">/etc</span>目录下以任意一位字母开头，且以非字母结尾的文件或目录列表<br><br>3、显示<span class="hljs-string">/etc/</span>目录下以非字母开头，后面跟了一个字母及其它任意长度任意字符的文件或目录列表<br><br>4、显示<span class="hljs-string">/etc/</span>目录下所有以rc开头，并后面是0-6之间的数字，其它为任意字符的文件或目录列表<br><br>5、显示<span class="hljs-string">/etc</span>目录下，所有<span class="hljs-string">.conf</span>结尾，且以m,n,r,p开头的文件或目录列表<br><br>6、只显示<span class="hljs-string">/root</span>下的隐藏文件和目录列表<br><br>7、只显示<span class="hljs-string">/etc</span>下的非隐藏目录列表<br></code></pre></td></tr></table></figure><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs gradle">范例：<br>第一题：<br>[root@instance-j4y73zvl tmp]# ls <span class="hljs-regexp">/tmp/</span> | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;^r.*[[:digit:]\+].*[[:lower:]]$&#x27;</span><br>r0asdf<br>radsf0d<br>[root@instance-j4y73zvl tmp]# ls<br><span class="hljs-number">1</span>abc            systemd-<span class="hljs-keyword">private</span>-<span class="hljs-number">1560</span>ef2e2eb7489499dfb07af7f3c5d4-chronyd.service-yB87gj<br><span class="hljs-number">2022</span>-<span class="hljs-number">08</span>-<span class="hljs-number">02</span>.txt  systemd-<span class="hljs-keyword">private</span>-<span class="hljs-number">1560</span>ef2e2eb7489499dfb07af7f3c5d4-httpd.service-xRXllj<br>bsm-agent       ta1a<br>la12a           test<br><span class="hljs-keyword">null</span>            test1<br>passwd          test2<br>r0asdf          test.txt<br>radsf0d<br><br>第二题：<br>[root@instance-j4y73zvl tmp]# ls <span class="hljs-regexp">/etc/</span> | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;^[[:lower:]].*[^[:lower:]]$&#x27;</span><br>dbus-<span class="hljs-number">1</span><br><span class="hljs-keyword">group</span>-<br>gshadow-<br>iproute2<br>passwd-<br>pkcs11<br>polkit-<span class="hljs-number">1</span><br>sasl2<br>shadow-<br>subgid-<br>subuid-<br><br>第三题：<br>[root@instance-j4y73zvl tmp]# ls <span class="hljs-regexp">/tmp/</span> | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;^[^[:lower:]][[:lower:]\+]&#x27;</span><br><span class="hljs-number">1</span>abc<br><span class="hljs-number">1</span>abc2<br>_abc<br>[root@instance-j4y73zvl tmp]# ls<br><span class="hljs-number">1</span>abc            r0asdf<br><span class="hljs-number">1</span>abc2           radsf0d<br>_1bc            systemd-<span class="hljs-keyword">private</span>-<span class="hljs-number">1560</span>ef2e2eb7489499dfb07af7f3c5d4-chronyd.service-yB87gj<br><span class="hljs-number">2022</span>-<span class="hljs-number">08</span>-<span class="hljs-number">02</span>.txt  systemd-<span class="hljs-keyword">private</span>-<span class="hljs-number">1560</span>ef2e2eb7489499dfb07af7f3c5d4-httpd.service-xRXllj<br>_abc            ta1a<br>bsm-agent       test<br>la12a           test1<br><span class="hljs-keyword">null</span>            test2<br>passwd          test.txt<br>第四题：<br>[root@instance-j4y73zvl tmp]# ls <span class="hljs-regexp">/etc/</span> | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;rc[0-6]&#x27;</span> <br>rc0.d<br>rc1.d<br>rc2.d<br>rc3.d<br>rc4.d<br>rc5.d<br>rc6.d<br>第五题：<br>[root@instance-j4y73zvl ~]#  ls <span class="hljs-regexp">/etc/</span> | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;^[nmpr].*.conf$&#x27;</span><br>man_db.conf<br>mke2fs.conf<br>nsswitch.conf<br>resolv.conf<br>rsyslog.conf<br>第六题：<br>[root@instance-j4y73zvl ~]# ls -a  <span class="hljs-regexp">/root/</span> | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;^[\.].*&#x27;</span><br>.<br>..<br>.bash_history<br>.bash_logout<br>.bash_profile<br>.bashrc<br>.cshrc<br>.ssh<br>.tcshrc<br>.viminfo<br>.wget-hsts<br>第七题：<br>[root@instance-j4y73zvl ~]# ls -a <span class="hljs-regexp">/etc/</span> | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;^[[:alpha:]].*&#x27;</span><br><br><br></code></pre></td></tr></table></figure><h1 id="基本正则表达式元字符"><a href="#基本正则表达式元字符" class="headerlink" title="基本正则表达式元字符"></a>基本正则表达式元字符</h1><h2 id="字符匹配"><a href="#字符匹配" class="headerlink" title="字符匹配"></a>字符匹配</h2><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs inform7">.  匹配任意单个字符(除了\n)，可以是一个汉字或其它国家的文字<br><br><span class="hljs-comment">[]</span>  匹配指定范围内的任意单个字符，示例：<span class="hljs-comment">[wang]</span>  <span class="hljs-comment">[0-9]</span>  <span class="hljs-comment">[a-z]</span>  <span class="hljs-comment">[a-zA-Z]</span><br><br><span class="hljs-comment">[^]</span> 匹配指定范围外的任意单个字符,示例：<span class="hljs-comment">[^wang]</span> <br><br><span class="hljs-comment">[:alnum:]</span> 字母和数字<br><br><span class="hljs-comment">[:alpha:]</span> 代表任何英文大小写字符，亦即 A-Z, a-z<br><br><span class="hljs-comment">[:lower:]</span> 小写字母,示例:<span class="hljs-comment">[<span class="hljs-comment">[:lower:]</span>]</span>,相当于<span class="hljs-comment">[a-z]</span><br><br><span class="hljs-comment">[:upper:]</span> 大写字母<br><br><span class="hljs-comment">[:blank:]</span> 空白字符（空格和制表符）<br><br><span class="hljs-comment">[:space:]</span> 包括空格、制表符(水平和垂直)、换行符、回车符等各种类型的空白,比<span class="hljs-comment">[:blank:]</span>包含的范围<br><br>广<br><br><span class="hljs-comment">[:cntrl:]</span> 不可打印的控制字符（退格、删除、警铃...）<br><br><span class="hljs-comment">[:digit:]</span> 十进制数字<br><br><span class="hljs-comment">[:xdigit:]</span>十六进制数字<br><br><span class="hljs-comment">[:graph:]</span> 可打印的非空白字符<br><br><span class="hljs-comment">[:print:]</span> 可打印字符<br><br><span class="hljs-comment">[:punct:]</span> 标点符号<br><br><br><br>\s   #匹配任何空白字符，包括空格、制表符、换页符等等。等价于 <span class="hljs-comment">[\f\r\t\v]</span>。注意 Unicode <br><br>正则表达式会匹配全角空格符<br><br>\S   #匹配任何非空白字符。等价于 <span class="hljs-comment">[^\f\r\t\v]</span><br><br>\w #匹配一个字母,数字,下划线,汉字,其它国家文字的字符，等价于<span class="hljs-comment">[_<span class="hljs-comment">[:alnum:]</span>字]</span><br><br>\W #匹配一个非字母,数字,下划线,汉字,其它国家文字的字符，等价于<span class="hljs-comment">[^_<span class="hljs-comment">[:alnum:]</span>字]</span><br></code></pre></td></tr></table></figure><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[root@instance-j4y73zvl ~]# ls <span class="hljs-regexp">/etc/</span> | <span class="hljs-keyword">grep</span> rc<span class="hljs-string">&#x27;[.0-6]&#x27;</span><br>rc0.d<br>rc1.d<br>rc2.d <br>rc3.d<br>rc4.d<br>rc5.d<br>rc6.d<br>rc.d<br>rc.local<br>[root@instance-j4y73zvl ~]# ls <span class="hljs-regexp">/etc/</span> | <span class="hljs-keyword">grep</span> rc<span class="hljs-string">&#x27;[.0-6].&#x27;</span><br>rc0.d<br>rc1.d<br>rc2.d<br>rc3.d<br>rc4.d<br>rc5.d<br>rc6.d<br>rc.d<br>rc.local<br>[root@instance-j4y73zvl ~]# ls <span class="hljs-regexp">/etc/</span> | <span class="hljs-keyword">grep</span> rc<span class="hljs-string">&#x27;[.0-6]\.&#x27;</span><br>rc0.d<br>rc1.d<br>rc2.d<br>rc3.d<br>rc4.d<br>rc5.d<br>rc6.d<br></code></pre></td></tr></table></figure><h3 id="匹配次数"><a href="#匹配次数" class="headerlink" title="匹配次数"></a>匹配次数</h3><p>用在要指定次数的字符后面，用于指定前面的字符要出现的次数</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs livescript">* <span class="hljs-comment">#匹配前面的字符任意次，包括0次，贪婪模式：尽可能长的匹配</span><br><br>.* <span class="hljs-comment">#任意长度的任意字符</span><br><br><span class="hljs-string">\?</span>  <span class="hljs-comment">#匹配其前面的字符出现0次或1次,即:可有可无</span><br><br><span class="hljs-string">\+</span>  <span class="hljs-comment">#匹配其前面的字符出现最少1次,即:肯定有且 &gt;=1 次</span><br><br><span class="hljs-string">\&#123;n\&#125;</span> <span class="hljs-comment">#匹配前面的字符n次</span><br><br><span class="hljs-string">\&#123;m,n\&#125;</span>  <span class="hljs-comment">#匹配前面的字符至少m次，至多n次</span><br><br><span class="hljs-string">\&#123;,n\&#125;</span>   <span class="hljs-comment">#匹配前面的字符至多n次,&lt;=n</span><br><br><span class="hljs-string">\&#123;n,\&#125;</span>   <span class="hljs-comment">#匹配前面的字符至少n次</span><br></code></pre></td></tr></table></figure><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@instance</span>-j4y73zvl ~]<span class="hljs-meta"># grep <span class="hljs-string">&#x27;go\&#123;2,\&#125;gle&#x27;</span> a.txt   </span><br>google<br>goooooooooooogle<br>gooogle<br>[root<span class="hljs-symbol">@instance</span>-j4y73zvl ~]<span class="hljs-meta"># grep <span class="hljs-string">&#x27;go\&#123;2,2\&#125;gle&#x27;</span> a.txt</span><br>google<br><br>[root<span class="hljs-symbol">@instance</span>-j4y73zvl ~]<span class="hljs-meta"># grep <span class="hljs-string">&#x27;goo\+gle&#x27;</span> a.txt </span><br>google<br>goooooooooooogle<br>gooogle<br><br>[root<span class="hljs-symbol">@instance</span>-j4y73zvl ~]<span class="hljs-meta"># grep <span class="hljs-string">&#x27;goo\+gle&#x27;</span> a.txt </span><br>google<br>goooooooooooogle<br>gooogle<br>[root<span class="hljs-symbol">@instance</span>-j4y73zvl ~]<span class="hljs-meta"># grep <span class="hljs-string">&#x27;go\&#123;2\&#125;gle&#x27;</span> a.txt   </span><br>google<br>[root<span class="hljs-symbol">@instance</span>-j4y73zvl ~]<span class="hljs-meta"># grep <span class="hljs-string">&#x27;goo*gle&#x27;</span> a.txt </span><br>google<br>goooooooooooogle<br>gogle<br>gooogle<br>[root<span class="hljs-symbol">@instance</span>-j4y73zvl ~]<span class="hljs-meta"># grep <span class="hljs-string">&#x27;gooo*gle&#x27;</span> a.txt </span><br>google<br>goooooooooooogle<br>gooogle<br></code></pre></td></tr></table></figure><p>范例：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-number">1</span>、显示<span class="hljs-regexp">/proc/m</span>eminfo文件中以大小s开头的行(要求：使用两种方法) <br><br><span class="hljs-number">2</span>、显示<span class="hljs-regexp">/etc/</span>passwd文件中不以<span class="hljs-regexp">/bin/</span>bash结尾的行<br><br><span class="hljs-number">3</span>、显示用户rpc默认的shell程序<br><br><span class="hljs-number">4</span>、找出<span class="hljs-regexp">/etc/</span>passwd中的两位或三位数<br><br><span class="hljs-number">5</span>、显示CentOS7的<span class="hljs-regexp">/etc/g</span>rub2.cfg文件中，至少以一个空白字符开头的且后面有非空白字符的行<br><br><span class="hljs-number">6</span>、找出“netstat -tan”命令结果中以LISTEN后跟任意多个空白字符结尾的行<br><br><span class="hljs-number">7</span>、显示CentOS7上所有UID小于<span class="hljs-number">1000</span>以内的用户名和UID <br><br><span class="hljs-number">8</span>、添加用户bash、testbash、basher、sh、nologin(其shell为<span class="hljs-regexp">/sbin/</span>nologin),找出<span class="hljs-regexp">/etc/</span>passwd用户<br><br>名和shell同名的行<br><br><span class="hljs-number">9</span>、利用df和<span class="hljs-keyword">grep</span>，取出磁盘各分区利用率，并从大到小排序<br><br>第一题：<br>[root@instance-j4y73zvl ~]# cat <span class="hljs-regexp">/proc/m</span>eminfo  | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;^[Ss]\.*&#x27;</span><br>SwapCached:            <span class="hljs-number">0</span> kB<br>SwapTotal:             <span class="hljs-number">0</span> kB<br>SwapFree:              <span class="hljs-number">0</span> kB<br>Shmem:              <span class="hljs-number">2620</span> kB<br>Slab:             <span class="hljs-number">249200</span> kB<br>SReclaimable:     <span class="hljs-number">181544</span> kB<br>SUnreclaim:        <span class="hljs-number">67656</span> kB<br>ShmemHugePages:        <span class="hljs-number">0</span> kB<br>ShmemPmdMapped:        <span class="hljs-number">0</span> kB<br><br>[root@instance-j4y73zvl ~]# cat <span class="hljs-regexp">/proc/m</span>eminfo | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;^\(S\|s\).*&#x27;</span><br>SwapCached:            <span class="hljs-number">0</span> kB<br>SwapTotal:             <span class="hljs-number">0</span> kB<br>SwapFree:              <span class="hljs-number">0</span> kB<br>Shmem:              <span class="hljs-number">2620</span> kB<br>Slab:             <span class="hljs-number">249176</span> kB<br>SReclaimable:     <span class="hljs-number">181572</span> kB<br>SUnreclaim:        <span class="hljs-number">67604</span> kB<br>ShmemHugePages:        <span class="hljs-number">0</span> kB<br>ShmemPmdMapped:        <span class="hljs-number">0</span> kB<br><br>第二题<br>[root@instance-j4y73zvl ~]# cat <span class="hljs-regexp">/etc/</span>passwd | <span class="hljs-keyword">grep</span> <span class="hljs-string">&quot;.*\(/bin/bash\)$&quot;</span> <br>root:x:<span class="hljs-number">0</span>:<span class="hljs-number">0</span>:root:<span class="hljs-regexp">/root:/</span>bin/bash<br>test:x:<span class="hljs-number">1000</span>:<span class="hljs-number">1000</span>::<span class="hljs-regexp">/home/</span>test:<span class="hljs-regexp">/bin/</span>bash<br>langqun:x:<span class="hljs-number">1001</span>:<span class="hljs-number">1001</span>::<span class="hljs-regexp">/home/</span>langqun:<span class="hljs-regexp">/bin/</span>bash<br><br>第三题<br>[root@instance-j4y73zvl ~]# cat <span class="hljs-regexp">/etc/</span>passwd | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;^\(rpc\).*&#x27;</span><br>rpc:x:<span class="hljs-number">1002</span>:<span class="hljs-number">1002</span>::<span class="hljs-regexp">/home/</span>rpc:<span class="hljs-regexp">/bin/</span>bash<br><br>第四题<br>[root@instance-j4y73zvl ~]# cat <span class="hljs-regexp">/etc/</span>passwd | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;\&lt;[0-9]\&#123;2,3\&#125;\&gt;&#x27;</span><br><br>第五题<br>[root@instance-j4y73zvl ~]# cat <span class="hljs-regexp">/etc/g</span>rub2.cfg | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;^\([[:blank:]]\+\).*[^[:blank:]]$&#x27;</span><br><br>第六题<br>[root@instance-j4y73zvl ~]# netstat -tan   | <span class="hljs-keyword">grep</span>  <span class="hljs-string">&#x27;.*\(LISTEN\)[[:blank:]]\+&#x27;</span><br><br>第<span class="hljs-number">7</span>题<br>[root@instance-j4y73zvl ~]# cut -d: -f1,<span class="hljs-number">3</span> <span class="hljs-regexp">/etc/</span>passwd | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;\&lt;\([0-9][0-9][0-9]\|[0-9][0-9]\|[0-9]\)\&gt;&#x27;</span><br><br>[root@instance-j4y73zvl ~]# cut -d: -f1,<span class="hljs-number">3</span> <span class="hljs-regexp">/etc/</span>passwd | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;\&lt;\([0-9]\&#123;1,3\&#125;\)\&gt;&#x27;</span><br><br>第<span class="hljs-number">8</span>题<br>[root@instance-j4y73zvl ~]# <span class="hljs-keyword">grep</span> <span class="hljs-string">&quot;^\(.*\)\&gt;.*\&lt;\1$&quot;</span> <span class="hljs-regexp">/etc/</span>passwd  <br><br>第<span class="hljs-number">9</span>题<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker：1.学习</title>
    <link href="/2022/08/01/docker%EF%BC%9A1.%E5%AD%A6%E4%B9%A0/"/>
    <url>/2022/08/01/docker%EF%BC%9A1.%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="docker入门"><a href="#docker入门" class="headerlink" title="docker入门"></a>docker入门</h1><span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>docker学习</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MySQL学习</title>
    <link href="/2022/08/01/MySQL%EF%BC%9A1.%E5%AD%A6%E4%B9%A0/"/>
    <url>/2022/08/01/MySQL%EF%BC%9A1.%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux：9.shell学习</title>
    <link href="/2022/08/01/Linux%EF%BC%9A9.shell%E5%AD%A6%E4%B9%A0-1/"/>
    <url>/2022/08/01/Linux%EF%BC%9A9.shell%E5%AD%A6%E4%B9%A0-1/</url>
    
    <content type="html"><![CDATA[<h1 id="Linux学习笔记"><a href="#Linux学习笔记" class="headerlink" title="Linux学习笔记"></a>Linux学习笔记</h1><span id="more"></span><h2 id="shell脚本基本结构"><a href="#shell脚本基本结构" class="headerlink" title="shell脚本基本结构"></a>shell脚本基本结构</h2><p>shell脚本编程：是基于过程式、解释执行的语言</p><p>编程语言的基本结构：</p><p>各种系统命令的组合</p><p>数据存储：变量、数组</p><p>表达式：a + b</p><p>控制语句：if </p><p>shell脚本：包含一些命令或声明，并符合一定格式的文本文件</p><p>格式要求：首行shebang机制</p><figure class="highlight d"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><pre><code class="hljs d"><span class="hljs-meta">#!/bin/bash </span><br><br><span class="hljs-meta">#!/usr/bin/python</span><br><br><span class="hljs-meta">#!/usr/bin/perl </span><br><br><span class="hljs-meta">#!/usr/bin/ruby</span><br><br><span class="hljs-meta">#!/usr/bin/lua</span><br></code></pre></td></tr></table></figure><h2 id="shell脚本创建过程"><a href="#shell脚本创建过程" class="headerlink" title="shell脚本创建过程"></a>shell脚本创建过程</h2><p>第一步：使用文本编辑器来创建文本文件</p><p>​                 第一行必须包括shell声明序列：#!</p><p>添加注释,注释以#开头</p><p>第二步：加执行权限</p><p>​                给予执行权限，在命令行上指定脚本的绝对或相对路径</p><p>第三步：运行脚本</p><p>​                直接运行解释器，将脚本作为解释器程序的参数运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash </span><br></code></pre></td></tr></table></figure><h2 id="shell-脚本注释规范"><a href="#shell-脚本注释规范" class="headerlink" title="shell 脚本注释规范"></a>shell 脚本注释规范</h2><p>1、第一行一般为调用使用的语言</p><p>2、程序名，避免更改文件名为无法找到正确的文件</p><p>3、版本号</p><p>4、更改后的时间</p><p>5、作者相关信息</p><p>6、该程序的作用，及注意事项</p><p>7、最后是各版本的更新简要说明</p><h2 id="第一个shell脚本"><a href="#第一个shell脚本" class="headerlink" title="第一个shell脚本"></a>第一个shell脚本</h2><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@instance</span>-j4y73zvl scripts]<span class="hljs-meta"># vim hello.sh</span><br><br><span class="hljs-meta">#!/bin/bash</span><br>echo <span class="hljs-string">&quot;Hello World!&quot;</span><br><br><span class="hljs-meta">#执行方法一：</span><br>[root<span class="hljs-symbol">@instance</span>-j4y73zvl scripts]<span class="hljs-meta"># bash hello.sh </span><br>Hello World!<br><br><span class="hljs-meta">#执行方法二：</span><br>[root<span class="hljs-symbol">@instance</span>-j4y73zvl scripts]<span class="hljs-meta"># cat hello.sh | bash</span><br>Hello World!<br><br><span class="hljs-meta">#执行方法三：</span><br>[root<span class="hljs-symbol">@instance</span>-j4y73zvl scripts]<span class="hljs-meta"># bash &lt; hello.sh </span><br>Hello World!<br><br><span class="hljs-meta">#执行方法四：</span><br>[root<span class="hljs-symbol">@instance</span>-j4y73zvl scripts]<span class="hljs-meta"># ./hello.sh</span><br>-bash: ./hello.sh: Permission denied<br>[root<span class="hljs-symbol">@instance</span>-j4y73zvl scripts]<span class="hljs-meta"># chmod +x hello.sh </span><br>[root<span class="hljs-symbol">@instance</span>-j4y73zvl scripts]<span class="hljs-meta"># ./hello.sh        </span><br>Hello World!<br><br><span class="hljs-meta">#执行方法五：</span><br>[root<span class="hljs-symbol">@instance</span>-j4y73zvl scripts]<span class="hljs-meta"># yum install httpd</span><br>[root<span class="hljs-symbol">@instance</span>-j4y73zvl scripts]<span class="hljs-meta"># systemctl start httpd</span><br>[root<span class="hljs-symbol">@instance</span>-j4y73zvl scripts]<span class="hljs-meta"># cp hello.sh /var/www/html</span><br>[root<span class="hljs-symbol">@instance</span>-j4y73zvl scripts]<span class="hljs-meta"># curl -s http://127.0.0.1/hello.sh | bash</span><br>Hello World!<br><br><br></code></pre></td></tr></table></figure><h2 id="使用read命令来接受输入"><a href="#使用read命令来接受输入" class="headerlink" title="使用read命令来接受输入"></a>使用read命令来接受输入</h2><p>使用read来把输入值分配给一个或多个shell变量，read从标准输入中读取值，给每个单词分配一个变</p><p>量，所有剩余单词都被分配给最后</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs excel">-p  指定要显示的提示<br><br>-s  静默输入，一般用于密码<br><br>-<span class="hljs-built_in">n</span> <span class="hljs-built_in">N</span> 指定输入的字符长度<span class="hljs-built_in">N</span><br><br>-d &#x27;字符&#x27;  输入结束符<br><br>-<span class="hljs-built_in">t</span> <span class="hljs-built_in">N</span> TIMEOUT为<span class="hljs-built_in">N</span>秒<br></code></pre></td></tr></table></figure><p>范例：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@instance-j4y73zvl ~]<span class="hljs-comment"># vim score.sh </span><br><span class="hljs-comment">#!/bin/bash</span><br>read -p <span class="hljs-string">&quot;请输入你的考试成绩&quot;</span> SCORE<br>[[ <span class="hljs-variable">$SCORE</span> =~ ^<span class="hljs-number">100</span>|([<span class="hljs-number">0</span>-<span class="hljs-number">9</span>]&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>&#125;)$ ]] || &#123; echo <span class="hljs-string">&quot;请输入你的合法成绩！&quot;</span> ;<span class="hljs-keyword">exit</span>; &#125;<br><br>[ <span class="hljs-variable">$SCORE</span> -ge <span class="hljs-number">60</span> ]  &amp;&amp; echo <span class="hljs-string">&quot;PASS&quot;</span> ||  echo <span class="hljs-string">&quot;FAILD&quot;</span><br></code></pre></td></tr></table></figure><p>范例：</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs prolog">[root@instance-j4y73zvl ~]# vim yesorno.sh <br><br>#!/bin/bash<br><br>read -p <span class="hljs-string">&quot;Do you agree? yes or no: &quot;</span> <span class="hljs-symbol">ANSWER</span><br><br>[[ $<span class="hljs-symbol">ANSWER</span> =~ ^([<span class="hljs-symbol">Yy</span>][<span class="hljs-symbol">Ee</span>][<span class="hljs-symbol">Ss</span>]|[<span class="hljs-symbol">Yy</span>]|[<span class="hljs-symbol">Nn</span>][<span class="hljs-symbol">Oo</span>]?)$ ]]  &amp;&amp; echo <span class="hljs-string">&quot;valid ANSWER&quot;</span> || echo <span class="hljs-string">&quot;invalid Answer&quot;</span><br>~               <br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#!/bin/bash</span><br>  <br>read -p <span class="hljs-string">&quot;Do you agree? yes or no: &quot;</span> ANSWER<br><br>[[ <span class="hljs-variable">$ANSWER</span> =~ ^([Yy][Ee][Ss]|[Yy])$ ]]  &amp;&amp; &#123; echo <span class="hljs-string">&quot;YES&quot;</span> ;<span class="hljs-keyword">exit</span> ; &#125;<br>[[ <span class="hljs-variable">$ANSWER</span> =~ ^([Nn][Oo])$ ]]  &amp;&amp; &#123; echo <span class="hljs-string">&quot;NO&quot;</span> ;<span class="hljs-keyword">exit</span> ; &#125;<br></code></pre></td></tr></table></figure><p>[root@instance-j4y73zvl ~]# vim work_menu.sh</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><br>. /etc/init.d/functions<br><span class="hljs-built_in">echo</span> -en <span class="hljs-string">&quot;\E[$[RANDOM%7+31];1m&quot;</span><br><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF</span><br><span class="hljs-string">请选择：</span><br><span class="hljs-string">1）备份数据库</span><br><span class="hljs-string">2）清理日志</span><br><span class="hljs-string">3）软件升级</span><br><span class="hljs-string">4）软件回滚</span><br><span class="hljs-string">5）删库跑路</span><br><span class="hljs-string">EOF</span><br><span class="hljs-built_in">echo</span> -en <span class="hljs-string">&#x27;\E[0m&#x27;</span><br><span class="hljs-built_in">read</span> -p  <span class="hljs-string">&quot;请选择上面项对应的数字1-5: &quot;</span> MENU<br>[ <span class="hljs-variable">$MENU</span> -eq 1 ] &amp;&amp; ./backup.sh<br>[ <span class="hljs-variable">$MENU</span> -eq 2 ] &amp;&amp; action <span class="hljs-string">&quot;清理日志&quot;</span><br>[ <span class="hljs-variable">$MENU</span> -eq 3 ] &amp;&amp; action <span class="hljs-string">&quot;软件升级&quot;</span><br>[ <span class="hljs-variable">$MENU</span> -eq 4 ] &amp;&amp; action <span class="hljs-string">&quot;软件回滚&quot;</span><br>[ <span class="hljs-variable">$MENU</span> -eq 5 ] &amp;&amp; action <span class="hljs-string">&quot;删库跑路&quot;</span><br></code></pre></td></tr></table></figure><h1 id="bash-shell的配置文件"><a href="#bash-shell的配置文件" class="headerlink" title="bash shell的配置文件"></a>bash shell的配置文件</h1><h2 id="按照生效范围划分两类"><a href="#按照生效范围划分两类" class="headerlink" title="按照生效范围划分两类"></a>按照生效范围划分两类</h2><p>全局配置：针对所有用户皆有效</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/</span>profile<br><br><span class="hljs-regexp">/etc/</span>profile.d/*.sh<br><br><span class="hljs-regexp">/etc/</span>bashrc<br></code></pre></td></tr></table></figure><p>个人配置：只针对特定用户有效</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">~/.bash_profile<br><br>~/.bashrc<br></code></pre></td></tr></table></figure><h2 id="shell登录两种方式分类"><a href="#shell登录两种方式分类" class="headerlink" title="shell登录两种方式分类"></a>shell登录两种方式分类</h2><h3 id="交互式登录"><a href="#交互式登录" class="headerlink" title="交互式登录"></a>交互式登录</h3><ul><li>直接通过终端输入账号密码登录</li><li>使用 su - UserName 切换的用户</li></ul><p>配置文件生效和执行顺序：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#放在每个文件最前</span><br><br><span class="hljs-regexp">/etc/</span>profile<br><br><span class="hljs-regexp">/etc/</span>profile.d/*.sh<br><br><span class="hljs-regexp">/etc/</span>bashrc<br><br>~/ .bash_ profile<br><br>~/ .bashrc<br><br><span class="hljs-regexp">/etc/</span>bashrc<br><br>\<span class="hljs-comment">#放在每个文件最后</span><br><br><span class="hljs-regexp">/etc/</span>profile.d/*.sh<br><br><span class="hljs-regexp">/etc/</span>bashrc<br><br><span class="hljs-regexp">/etc/</span>profile<br><br><span class="hljs-regexp">/etc/</span>bashrc   <span class="hljs-comment">#此文件执行两次</span><br><br>~/.bashrc<br><br>~/.bash_profile<br></code></pre></td></tr></table></figure><p>注意：文件之间的调用关系，写在同一个文件的不同位置，将影响文件的执行顺序</p><h3 id="非交互式登录"><a href="#非交互式登录" class="headerlink" title="非交互式登录"></a>非交互式登录</h3><ul><li>su UserName</li><li>图形界面下打开的终端</li><li>执行脚本</li><li>任何其它的bash实例</li></ul><p>执行顺序</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/</span>profile.d/*.sh<br><br><span class="hljs-regexp">/etc/</span>bashrc<br><br>~/.bashrc<br></code></pre></td></tr></table></figure><h2 id="按功能划分分类"><a href="#按功能划分分类" class="headerlink" title="按功能划分分类"></a>按功能划分分类</h2><p>profifile类和bashrc类</p><h3 id="profile类"><a href="#profile类" class="headerlink" title="profile类"></a>profile类</h3><p>profile类交互时登录的shell提供配置</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">全局：<span class="hljs-regexp">/etc/</span>profile, <span class="hljs-regexp">/etc/</span>profile.d/*.sh<br><br>个人：~/.bash_profile<br></code></pre></td></tr></table></figure><p>功用：</p><p>(1) 用于定义环境变量</p><p>(2) 运行命令或脚本</p><h3 id="bashrc类"><a href="#bashrc类" class="headerlink" title="bashrc类"></a>bashrc类</h3><p>bashrc类：为非交互式和交互式登录的shell提供配置</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">全局：<span class="hljs-regexp">/etc/</span>bashrc<br><br>个人：~/.bashrc<br></code></pre></td></tr></table></figure><p>功用：</p><p>(1) 定义命令别名和函数</p><p>(2) 定义本地变量</p><h2 id="编辑配置文件生效"><a href="#编辑配置文件生效" class="headerlink" title="编辑配置文件生效"></a>编辑配置文件生效</h2><p>修改profile和bashrc文件后需生效的两种方式：</p><p>修改profifile和bashrc文件后需生效两种方法:</p><ul><li> 重新启动shell进程</li><li> source|. 配置文件</li></ul><p>注意:source 会在当前shell中执行脚本,所有一般只用于执行置文件,或在脚本中调用另一个脚本的场景</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-bullet">.  </span>~/.bashrc<br></code></pre></td></tr></table></figure><h2 id="Bash-退出任务"><a href="#Bash-退出任务" class="headerlink" title="Bash 退出任务"></a><strong>Bash</strong> <strong>退出任务</strong></h2><p>保存在~/.bash_logout文件中（用户）,在退出登录shell时运行</p><p>功能：</p><ul><li>创建自动备份</li><li>清除临时文件</li></ul><p><strong>练习</strong></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-number">1</span>、让所有用户的PATH环境变量的值多出一个路径，例如：<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/apache/</span>bin <br><br><span class="hljs-number">2</span>、用户 root 登录时，将命令指示符变成红色，并自动启用如下别名：<br> rm=‘rm -i’ <br><br> cdnet=‘cd <span class="hljs-regexp">/etc/</span>sysconfifig<span class="hljs-regexp">/network-scripts/</span>’ <br><br> editnet=‘vim <span class="hljs-regexp">/etc/</span>sysconfifig<span class="hljs-regexp">/network-scripts/i</span>fcfg-eth0’ <br><br> editnet=‘vim <span class="hljs-regexp">/etc/</span>sysconfifig<span class="hljs-regexp">/network-scripts/i</span>fcfg-eno16777736 或 ifcfg-ens33 ’ (如果系统是CentOS7) <br><br><span class="hljs-number">3</span>、任意用户登录系统时，显示红色字体的警示提醒信息“Hi,dangerous！” <br><br><span class="hljs-number">4</span>、编写生成脚本基本格式的脚本，包括作者，联系方式，版本，时间，描述等<br></code></pre></td></tr></table></figure><h1 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a><strong>流程控制</strong></h1><h2 id="条件选择"><a href="#条件选择" class="headerlink" title="条件选择"></a><strong>条件选择</strong></h2><h3 id="条件判断分绍"><a href="#条件判断分绍" class="headerlink" title="条件判断分绍"></a><strong>条件判断分绍</strong></h3><p><strong>单分支条件</strong></p><p><img src="image-20220806203433019-16597892748142.png" alt="image-20220806203433019"></p><p><strong>多分支条件</strong></p><p><img src="image-20220806203415821-16597892571871.png" alt="image-20220806203415821"></p><p><img src="image-20220806203455106-16597892962093.png" alt="image-20220806203455106"></p><h3 id="选择执行-if-语句"><a href="#选择执行-if-语句" class="headerlink" title="选择执行 if 语句"></a><strong>选择执行</strong> <strong>if</strong> <strong>语句</strong></h3><p>格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> COMMANDS; <span class="hljs-keyword">then</span> COMMANDS; [ <span class="hljs-keyword">elif</span> COMMANDS; <span class="hljs-keyword">then</span> COMMANDS; ]... [ <span class="hljs-keyword">else</span> <br><br>COMMANDS; ] <span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><p>单分支</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">if</span> 判断条件;<span class="hljs-attribute">then</span><br><br>  条件为真的分支代码<br><br>fi<br></code></pre></td></tr></table></figure><p>双分支</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> 判断条件; <span class="hljs-keyword">then</span><br><br> 条件为真的分支代码<br><br><span class="hljs-keyword">else</span><br><br> 条件为假的分支代码<br><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><p>多分支</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> 判断条件1; <span class="hljs-keyword">then</span><br><br> 条件1为真的分支代码<br><br><span class="hljs-keyword">elif</span> 判断条件2; <span class="hljs-keyword">then</span><br><br> 条件2为真的分支代码<br><br><span class="hljs-keyword">elif</span> 判断条件3; <span class="hljs-keyword">then</span><br><br> 条件3为真的分支代码<br><br>...<br><br><span class="hljs-keyword">else</span><br><br> 以上条件都为假的分支代码<br><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><p><strong>说明：</strong></p><ul><li><strong>多个条件时，逐个条件进行判断，第一次遇为“真”条件时，执行其分支，而后结束整个if语句</strong>**</li><li><strong>if 语句可嵌套</strong></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[root@instance-j4y73zvl ~]# <span class="hljs-attribute">age</span>=20; <span class="hljs-keyword">if</span> [ <span class="hljs-variable">$age</span> -gt 18 ] ; then echo <span class="hljs-string">&quot;work hard&quot;</span>;fi<br>work hard<br>[root@instance-j4y73zvl ~]# <span class="hljs-attribute">age</span>=16; <span class="hljs-keyword">if</span> [ <span class="hljs-variable">$age</span> -gt 18 ] ; then echo <span class="hljs-string">&quot;work hard&quot;</span>;fi  <br></code></pre></td></tr></table></figure><p>范例：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@instance-j4y73zvl ~]<span class="hljs-comment"># vim score.sh </span><br><br><span class="hljs-comment">#!/bin/bash</span><br>read -p <span class="hljs-string">&quot;请输入你的考试成绩&quot;</span> SCORE<br>[[ <span class="hljs-variable">$SCORE</span> =~ ^<span class="hljs-number">100</span>|([<span class="hljs-number">0</span>-<span class="hljs-number">9</span>]&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>&#125;)$ ]] || &#123; echo <span class="hljs-string">&quot;请输入你的合法成绩！&quot;</span> ;<span class="hljs-keyword">exit</span>; &#125;<br><br><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$SCORE</span> -lt <span class="hljs-number">60</span> ]  ;then<br>        echo <span class="hljs-string">&quot;Failed&quot;</span><br>elif [ <span class="hljs-variable">$SCORE</span> -lt <span class="hljs-number">80</span> ]; then<br>        echo <span class="hljs-string">&quot;just soso&quot;</span><br><span class="hljs-keyword">else</span><br>        echo <span class="hljs-string">&quot;Excellent&quot;</span><br>fi<br>~                                <br><br>[root@instance-j4y73zvl ~]<span class="hljs-comment"># bash score.sh </span><br>请输入你的考试成绩<span class="hljs-number">70</span><br>just soso<br>[root@instance-j4y73zvl ~]<span class="hljs-comment"># bash score.sh </span><br>请输入你的考试成绩<span class="hljs-number">90</span><br>Excellent<br>[root@instance-j4y73zvl ~]<span class="hljs-comment"># bash score.sh </span><br>请输入你的考试成绩<span class="hljs-number">40</span><br>Failed<br></code></pre></td></tr></table></figure><p>范例：身体质量指数 (BMI）</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@instance-j4y73zvl ~]<span class="hljs-comment"># vim bim.sh</span><br><br><span class="hljs-comment">#/bin/bash</span><br>read -p <span class="hljs-string">&quot;请输入身高(m为单位): &quot;</span> HIGH<br><span class="hljs-keyword">if</span> [[ ! <span class="hljs-string">&quot;$HIGH&quot;</span> =~ ^[<span class="hljs-number">0</span>-<span class="hljs-number">2</span>](\.[<span class="hljs-number">0</span>-<span class="hljs-number">9</span>]&#123;,<span class="hljs-number">2</span>&#125;)?$ ]];then<br>         echo <span class="hljs-string">&quot;输入错误的身高!&quot;</span><br>          <span class="hljs-keyword">exit</span> <span class="hljs-number">1</span><br>fi<br>read -p <span class="hljs-string">&quot;请输入体重(kg为单位): &quot;</span> WEIGHT<br><span class="hljs-keyword">if</span> [[ ! <span class="hljs-string">&quot;$WEIGHT&quot;</span> =~ ^[<span class="hljs-number">0</span>-<span class="hljs-number">9</span>]&#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>&#125;$ ]];then echo <span class="hljs-string">&quot;输入错误的体重!&quot;</span>; <span class="hljs-keyword">exit</span> <span class="hljs-number">2</span>; fi<br>  BMI=`echo <span class="hljs-variable">$WEIGHT</span>/<span class="hljs-variable">$HIGH</span>^<span class="hljs-number">2</span>|bc`<br><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$BMI</span> -le <span class="hljs-number">18</span> ] ;then<br>           echo <span class="hljs-string">&quot;太瘦了,多吃点!&quot;</span><br>elif [ <span class="hljs-variable">$BMI</span> -lt <span class="hljs-number">24</span> ] ;then<br>           echo <span class="hljs-string">&quot;身材很棒!&quot;</span><br><span class="hljs-keyword">else</span><br>           echo <span class="hljs-string">&quot;太胖了,注意节食,加强运动!&quot;</span><br>fi<br>~   <br>[root@instance-j4y73zvl ~]<span class="hljs-comment"># bash bim.sh </span><br>请输入身高(m为单位): <span class="hljs-number">1.85</span><br>请输入体重(kg为单位): <span class="hljs-number">80</span><br>身材很棒!<br>[root@instance-j4y73zvl ~]<span class="hljs-comment"># bash bim.sh </span><br>请输入身高(m为单位): <span class="hljs-number">170</span><br>输入错误的身高!<br>[root@instance-j4y73zvl ~]<span class="hljs-comment"># bash bim.sh </span><br>请输入身高(m为单位): <span class="hljs-number">1.7</span><br>请输入体重(kg为单位): <span class="hljs-number">80</span><br>太胖了,注意节食,加强运动!<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@instance-j4y73zvl ~]<span class="hljs-comment"># vim os_release.sh</span><br><br><span class="hljs-comment">#/bin/bash</span><br><br>. /etc/os-release<br><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$ID</span> = <span class="hljs-string">&quot;rocky&quot;</span> -o <span class="hljs-variable">$ID</span> = <span class="hljs-string">&quot;centos&quot;</span> ];<span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">echo</span> os version is rocky or centos<br>        yum -y install gcc<br><span class="hljs-keyword">elif</span> [ <span class="hljs-variable">$ID</span> = <span class="hljs-string">&quot;ubuntu&quot;</span> ];<span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">echo</span> OS version is Ubuntu<br>        apt -y install gcc<br><span class="hljs-keyword">else</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;不支持OS&quot;</span><br><span class="hljs-keyword">fi</span><br>~                       <br></code></pre></td></tr></table></figure><h3 id="条件判断-case-语句"><a href="#条件判断-case-语句" class="headerlink" title="条件判断 case 语句"></a><strong>条件判断</strong> <strong>case</strong> <strong>语句</strong></h3><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs llvm">case WORD in [PATTERN [| PATTERN]...) COMMANDS <span class="hljs-comment">;;]... esaccase 变量引用 in</span><br><br>PAT<span class="hljs-number">1</span>)<br><br> 分支<span class="hljs-number">1</span><br><br> <span class="hljs-comment">;;</span><br><br>PAT<span class="hljs-number">2</span>)<br><br> 分支<span class="hljs-number">2</span><br><br> <span class="hljs-comment">;;</span><br><br>...<br><br>*)<br><br> 默认分支<br><br> <span class="hljs-comment">;;</span><br><br>esac<br></code></pre></td></tr></table></figure><p>case支持glob风格的通配符：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs less">* 任意长度任意字符<br><br>? 任意单个字符<br><br><span class="hljs-selector-attr">[]</span> 指定范围内的任意单个字符<br><br>|  或者，如: <span class="hljs-selector-tag">a</span>|<span class="hljs-selector-tag">b</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@instance-j4y73zvl ~]<span class="hljs-comment"># vim menu.sh </span><br><br><span class="hljs-built_in">echo</span> -en <span class="hljs-string">&quot;\E[$[RANDOM%7+31];1m&quot;</span><br><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF</span><br><span class="hljs-string">请选择：</span><br><span class="hljs-string">1）备份数据库</span><br><span class="hljs-string">2）清理日志</span><br><span class="hljs-string">3）软件升级</span><br><span class="hljs-string">4）软件回滚</span><br><span class="hljs-string">5）删库跑路</span><br><span class="hljs-string">EOF</span><br><span class="hljs-built_in">echo</span> -en <span class="hljs-string">&#x27;\E[0m&#x27;</span><br><span class="hljs-built_in">read</span> -p <span class="hljs-string">&quot;请输入上面数字1-5: &quot;</span> MENU<br><span class="hljs-keyword">case</span> <span class="hljs-variable">$MENU</span> <span class="hljs-keyword">in</span><br>1)<br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;执行备份数据库&quot;</span><br>        <span class="hljs-comment">#./backup.sh</span><br>        ;;<br>2)<br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;清理日志&quot;</span><br>        ;;<br>3)<br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;软件升级&quot;</span><br>        ;;<br>4)<br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;软件回滚&quot;</span><br>        ;;<br>5)<br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;删库跑路&quot;</span><br>        ;;<br></code></pre></td></tr></table></figure><p><strong>练习</strong></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-number">1</span>、编写脚本 createuser.<span class="hljs-keyword">sh</span>，实现如下功能：使用一个用户名做为参数，如果指定参数的用户存在，就显示其存在，否则添加之。并设置初始密码为<span class="hljs-number">123456</span>，显示添加的用户的id号等信息，在此新用户第一次登录时，会提示用户立即改密码，如果没有参数，就提示：请输入用户名<br><br><span class="hljs-number">2</span>、编写脚本 yesorno.<span class="hljs-keyword">sh</span>，提示用户输入yes或<span class="hljs-keyword">no</span>,并判断用户输入的是yes还是<span class="hljs-keyword">no</span>,或是其它信息<br><br><span class="hljs-number">3</span>、编写脚本 fifiletype.<span class="hljs-keyword">sh</span>，判断用户输入文件路径，显示其文件类型（普通，目录，链接，其它文件类型）<br><br><span class="hljs-number">4</span>、编写脚本 checkint.<span class="hljs-keyword">sh</span>，判断用户输入的参数是否为正整数<br><br><span class="hljs-number">5</span>、编写脚本 reset.<span class="hljs-keyword">sh</span>，实现系统安装后的初始化环境，包括：<span class="hljs-number">1</span>、别名 <span class="hljs-number">2</span>、环境变量，如PS1等 <span class="hljs-number">3</span>、安装常用软件包，如：tree <span class="hljs-number">5</span>、实现固定的IP的设置，<span class="hljs-number">6</span>、<span class="hljs-keyword">vim</span>的设置等<br></code></pre></td></tr></table></figure><h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a><strong>循环</strong></h2><h3 id="循环执行介绍"><a href="#循环执行介绍" class="headerlink" title="循环执行介绍"></a><strong>循环执行介绍</strong></h3><p>将某代码段重复运行多次，通常有进入循环的条件和退出循环的条件</p><p>重复运行次数</p><ul><li>循环次数事先已知</li><li>循环次数事先未知</li></ul><p>常见的循环的命令：for, while, until</p><p><img src="image-20220806220853703-16597949352854.png" alt="image-20220806220853703"></p><h3 id="循环-for"><a href="#循环-for" class="headerlink" title="循环 for"></a><strong>循环</strong> <strong>for</strong></h3><p>格式1</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span> NAME [<span class="hljs-keyword">in</span> WORDS ... ] ; <span class="hljs-keyword">do</span> COMMANDS; <span class="hljs-keyword">done</span><br><br>\<span class="hljs-comment">#方式1</span><br><br><span class="hljs-keyword">for</span> 变量名  <span class="hljs-keyword">in</span> 列表;<span class="hljs-keyword">do</span><br><br> 循环体<br><br><span class="hljs-keyword">done</span><br><br><span class="hljs-comment">#方式2</span><br><br><span class="hljs-keyword">for</span> 变量名  <span class="hljs-keyword">in</span> 列表<br><br><span class="hljs-keyword">do</span><br><br> 循环体<br><br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><p><strong>执行机制：</strong></p><ul><li>依次将列表中的元素赋值给“变量名”; 每次赋值后即执行一次循环体; 直到列表中的元素耗尽，循环</li><li>结束</li><li>如果省略 [in WORDS … ] ，此时使用位置参数变量 in “$@”</li></ul><p><strong>for</strong> <strong>循环列表生成方式：</strong></p><ul><li>直接给出列表</li><li>整数列表：</li></ul><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">&#123;start..<span class="hljs-keyword">end</span>&#125;<br><br><span class="hljs-constructor">$(<span class="hljs-params">seq</span> [<span class="hljs-params">start</span> [<span class="hljs-params">step</span>]] <span class="hljs-params">end</span>)</span><br></code></pre></td></tr></table></figure><ul><li>返回列表的命令:</li></ul><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">$(COMMAND)<br></code></pre></td></tr></table></figure><ul><li>使用glob，如：*.sh</li><li>变量引用，如：$@，$*，$#</li></ul><p>范例：面试题，计算1+2+3+…+100 的结果</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs coq">[root@instance-j4y73zvl ~]# <span class="hljs-built_in">sum</span>=<span class="hljs-number">0</span>;<span class="hljs-keyword">for</span> i <span class="hljs-built_in">in</span> &#123;<span class="hljs-number">1.</span><span class="hljs-number">.100</span>&#125;;<span class="hljs-built_in">do</span> <span class="hljs-keyword">let</span> <span class="hljs-built_in">sum</span>+=i;done;echo <span class="hljs-built_in">sum</span>=$<span class="hljs-built_in">sum</span><br><span class="hljs-built_in">sum</span>=<span class="hljs-number">5050</span><br><br>[root@instance-j4y73zvl ~]# seq -s+ <span class="hljs-number">100</span>|<span class="hljs-type">bc</span><br><span class="hljs-number">5050</span><br>[root@instance-j4y73zvl ~]# echo &#123;<span class="hljs-number">1.</span><span class="hljs-number">.100</span>&#125;|<span class="hljs-type">tr</span> &#x27; &#x27; +|<span class="hljs-type">bc</span><br><span class="hljs-number">5050</span><br>[root@instance-j4y73zvl ~]# seq <span class="hljs-number">100</span>|<span class="hljs-type">paste</span> -sd +|<span class="hljs-type">bc</span> <br><span class="hljs-number">5050</span><br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[root@instance-j4y73zvl ~]# vim 9x9.sh<br><span class="hljs-comment">#/bin/bash</span><br><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> &#123;1<span class="hljs-built_in">..</span>9&#125;;<span class="hljs-keyword">do</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> `seq <span class="hljs-variable">$j</span>`;<span class="hljs-keyword">do</span><br>                echo -e <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;i&#125;</span>x<span class="hljs-variable">$&#123;j&#125;</span>=$[i*j]\t\c&quot;</span><br>        done<br>        echo<br>done<br><br>[root@instance-j4y73zvl ~]# bash 9x9.sh <br><span class="hljs-attribute">1x1</span>=1<br><span class="hljs-attribute">1x2</span>=2   <span class="hljs-attribute">2x2</span>=4<br><span class="hljs-attribute">1x3</span>=3   <span class="hljs-attribute">2x3</span>=6   <span class="hljs-attribute">3x3</span>=9<br><span class="hljs-attribute">1x4</span>=4   <span class="hljs-attribute">2x4</span>=8   <span class="hljs-attribute">3x4</span>=12  <span class="hljs-attribute">4x4</span>=16<br><span class="hljs-attribute">1x5</span>=5   <span class="hljs-attribute">2x5</span>=10  <span class="hljs-attribute">3x5</span>=15  <span class="hljs-attribute">4x5</span>=20  <span class="hljs-attribute">5x5</span>=25<br><span class="hljs-attribute">1x6</span>=6   <span class="hljs-attribute">2x6</span>=12  <span class="hljs-attribute">3x6</span>=18  <span class="hljs-attribute">4x6</span>=24  <span class="hljs-attribute">5x6</span>=30  <span class="hljs-attribute">6x6</span>=36<br><span class="hljs-attribute">1x7</span>=7   <span class="hljs-attribute">2x7</span>=14  <span class="hljs-attribute">3x7</span>=21  <span class="hljs-attribute">4x7</span>=28  <span class="hljs-attribute">5x7</span>=35  <span class="hljs-attribute">6x7</span>=42  <span class="hljs-attribute">7x7</span>=49<br><span class="hljs-attribute">1x8</span>=8   <span class="hljs-attribute">2x8</span>=16  <span class="hljs-attribute">3x8</span>=24  <span class="hljs-attribute">4x8</span>=32  <span class="hljs-attribute">5x8</span>=40  <span class="hljs-attribute">6x8</span>=48  <span class="hljs-attribute">7x8</span>=56  <span class="hljs-attribute">8x8</span>=64<br><span class="hljs-attribute">1x9</span>=9   <span class="hljs-attribute">2x9</span>=18  <span class="hljs-attribute">3x9</span>=27  <span class="hljs-attribute">4x9</span>=36  <span class="hljs-attribute">5x9</span>=45  <span class="hljs-attribute">6x9</span>=54  <span class="hljs-attribute">7x9</span>=63  <span class="hljs-attribute">8x9</span>=72  <span class="hljs-attribute">9x9</span>=81<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux:1.Linux简介</title>
    <link href="/2022/08/01/Linux%EF%BC%9A1.Linux%E7%AE%80%E4%BB%8B/"/>
    <url>/2022/08/01/Linux%EF%BC%9A1.Linux%E7%AE%80%E4%BB%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="Linux笔记"><a href="#Linux笔记" class="headerlink" title="Linux笔记"></a>Linux笔记</h1><span id="more"></span><h1 id="1-Linux版本介绍"><a href="#1-Linux版本介绍" class="headerlink" title="1.Linux版本介绍"></a>1.Linux版本介绍</h1><h2 id="1-1-Linux-的内核版本组成"><a href="#1-1-Linux-的内核版本组成" class="headerlink" title="1.1.Linux****的内核版本组成"></a>1.1.<strong>Linux****的内核版本组成</strong></h2><p>主版本号</p><p>次版本号</p><p>末版本号</p><p>打包版本号</p><p>厂商版本</p><p><img src="C:\Users\Administrator\blog\source_posts\Linux：1.Linux简介\image-20220801123413712.png" alt="image-20220801123413712"></p><h2 id="1-2-Linux发行版"><a href="#1-2-Linux发行版" class="headerlink" title="1.2.Linux发行版"></a>1.2.Linux发行版</h2><p>slackware：SUSE Linux Enterprise Server (SLES) , OpenSuse桌面</p><p>debian: ubuntu，deepin（深度），mint</p><p>redhat： RHEL: RedHat Enterprise Linux, 每18个月发行一个新版本</p><p> CentOS： <strong>C</strong>ommunity <strong>Ent</strong>erprise <strong>O</strong>perating <strong>S</strong>ystem 兼容RHEL的格式</p><p> 中标麒麟：中标软件</p><p> Fedora：每6个月发行一个新版本</p><p>Alpine： 一个面向安全的轻型 Linux 发行版。它不同于通常 Linux 发行版，Alpine 采用了 musl </p><p>libc 和 busybox 以减小系统的体积和运行时资源消耗，但功能上比 busybox 又完善的多，只有5M</p><p>左右大小</p><p>ArchLinux：轻量简洁，遵循K.I.S.S.原则（ keep it simple and stupid ），Manjaro</p><p>Gentoo：极致性能，不提供传统意义的安装程序，下载源代码在本机上编译安装软件</p><p>LFS：Linux From scratch 自制Linux，只是一个说明书</p><p>Android：kernel+busybox（工具集）+java虚拟机</p><p>Linux 分支参考网站：<a href="http://futurist.se/gldt/">http://futurist.se/gldt/</a></p><p>Linux发行版排名: <a href="https://distrowatch.com/dwres.php?resource=popularity">https://distrowatch.com/dwres.php?resource=popularity</a></p><p>Linux 发行版体验: <a href="https://distrotest.net/">https://distrotest.net/</a></p><p>2004年，Gregory Kurtzer和CentOS的其他创始成员基于开源的RHEL创建了CentOS，将Enterprise </p><p>Linux引入了社区。</p><p>2014年，红帽宣布正式赞助CentOS。CentOS的几个核心团队入职Red Hat专门负责其开发。并在Red Hat</p><p>在理事会中占了三席，但是其社区属性得到保留，交易结果是一部分包括将CentOS商标和IP转移到Red Hat</p><p>以安全保存。</p><p>CentOS 8于2019年9月交付，紧随RHEL 8之后，CentOS Stream的发布和发布是对下一个次要更新中即将</p><p>发布内容预览版本。可以说是RHEL的beta频道。</p><p>2019，巨头IBM花重资收购了Red Hat。并承诺Red Hat忠于其开源根基不会改变，声称” Red Hat对开源</p><p>的使命和坚定承诺将保持不变。”</p><p>2020年12月8日IBM宣布将惯例支持到2029年CentOS 8，提前在2年内就终结，唯一的升级途径是Centos </p><p>Stream—AKA，RHEL的Beta发布，并建议不再生产环境中使用。预示着CentOS可能会正式死亡。CentOS已</p><p>死，但是CentOS精神将会永存。</p><p>随后以CentOS创始人之一Gregory Kurtzer为首，8小时内250人啸聚网络，计划以创建Rocky Linux</p><p>（Rocky为已经逝世的另外一个CentOS创始人）取代CentOS。Rocky Linux与RHEL兼容</p><p>目前已经创建了Github Rocky Linux项目组织（github.com/rocky-linux/rocky）和官网</p><p>（rockylinux.org</p><h2 id="1-3-Linux各版本镜像网站"><a href="#1-3-Linux各版本镜像网站" class="headerlink" title="1.3.Linux各版本镜像网站"></a>1.3.Linux各版本镜像网站</h2><p>debian镜像网站</p><p>Debian官网： <a href="https://www.debian.org/">https://www.debian.org/</a></p><p>官方镜像地址： <a href="https://www.debian.org/mirror/list">https://www.debian.org/mirror/list</a></p><p>清华大学下载地址： <a href="https://mirrors.tuna.tsinghua.edu.cn/debian-cd/">https://mirrors.tuna.tsinghua.edu.cn/debian-cd/</a></p><p>ubuntu镜像网站</p><p>#中文官网</p><p><a href="https://cn.ubuntu.com/">https://cn.ubuntu.com/</a></p><p>#英文官网</p><p><a href="https://ubuntu.com/">https://ubuntu.com/</a></p><p>Centos镜像网站</p><p><a href="https://wiki.centos.org/Download">https://wiki.centos.org/Download</a></p><p><a href="http://mirrors.aliyun.com/">http://mirrors.aliyun.com</a></p><p><a href="http://mirrors.sohu.com/">http://mirrors.sohu.com</a></p><p><a href="http://mirrors.163.com/">http://mirrors.163.com</a></p><p><a href="https://mirrors.tuna.tsinghua.edu.cn/centos/">https://mirrors.tuna.tsinghua.edu.cn/centos/</a></p><p>#CentOS6</p><p><a href="https://vault.centos.org/6.10/isos/x86_64/">https://vault.centos.org/6.10/isos/x86_64/</a></p><p><a href="http://cdimage.ubuntu.com/releases/">http://cdimage.ubuntu.com/releases/</a>     #Server版</p><p><a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cdimage/releases/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cdimage/releases/</a></p><p><a href="http://releases.ubuntu.com/">http://releases.ubuntu.com/</a>      #Desktop版</p><p><a href="http://mirrors.aliyun.com/ubuntu-releases/">http://mirrors.aliyun.com/ubuntu-releases/</a></p><p><a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-releases/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu-releases/</a></p><p>#Ubuntu20.04</p><p><a href="https://ubuntu.com/download/alternative-downloads">https://ubuntu.com/download/alternative-downloads</a></p><p><a href="http://mirrors.aliyun.com/ubuntu-releases/">http://mirrors.aliyun.com/ubuntu-releases/</a></p><p><a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cdimage/releases/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cdimage/releases/</a></p><p><a href="http://mirrors.aliyun.com/ubuntu-releases/20.04.1/ubuntu-20.04.1-live-server">http://mirrors.aliyun.com/ubuntu-releases/20.04.1/ubuntu-20.04.1-live-server</a></p><p>amd64.iso</p><p><a href="http://mirrors.aliyun.com/ubuntu-releases/20.04/ubuntu-20.04.3-live-server">http://mirrors.aliyun.com/ubuntu-releases/20.04/ubuntu-20.04.3-live-server</a></p><p>amd64.iso</p><p>#Ubuntu20.04安装说明视频</p><p><a href="https://edu.51cto.com/course/29256.html">https://edu.51cto.com/course/29256.html</a></p><h2 id="1-4-Ubuntu软件源"><a href="#1-4-Ubuntu软件源" class="headerlink" title="1.4.Ubuntu软件源"></a>1.4.Ubuntu软件源</h2><p>阿里：</p><p>deb <a href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic main restricted universe multiverse<br>deb <a href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-security main restricted universe multiverse<br>deb <a href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-updates main restricted universe multiverse<br>deb <a href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-proposed main restricted universe multiverse<br>deb <a href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-backports main restricted universe multiverse<br>deb-src <a href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic main restricted universe multiverse<br>deb-src <a href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-security main restricted universe multiverse<br>deb-src <a href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-updates main restricted universe multiverse<br>deb-src <a href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-proposed main restricted universe multiverse<br>deb-src <a href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> bionic-backports main restricted universe multiverse</p><p>清华：</p><p>deb <a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic main restricted universe multiverse<br>deb-src <a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic main restricted universe multiverse<br>deb <a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic-updates main restricted universe multiverse<br>deb-src <a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic-updates main restricted universe multiverse<br>deb <a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic-backports main restricted universe multiverse<br>deb-src <a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic-backports main restricted universe multiverse<br>deb <a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic-security main restricted universe multiverse<br>deb-src <a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic-security main restricted universe multiverse<br>deb <a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic-proposed main restricted universe multiverse<br>deb-src <a href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</a> bionic-proposed main restricted universe multiverse</p><p>中科大源</p><p>deb <a href="https://mirrors.ustc.edu.cn/ubuntu/">https://mirrors.ustc.edu.cn/ubuntu/</a> bionic main restricted universe multiverse<br>deb-src <a href="https://mirrors.ustc.edu.cn/ubuntu/">https://mirrors.ustc.edu.cn/ubuntu/</a> bionic main restricted universe multiverse<br>deb <a href="https://mirrors.ustc.edu.cn/ubuntu/">https://mirrors.ustc.edu.cn/ubuntu/</a> bionic-updates main restricted universe multiverse<br>deb-src <a href="https://mirrors.ustc.edu.cn/ubuntu/">https://mirrors.ustc.edu.cn/ubuntu/</a> bionic-updates main restricted universe multiverse<br>deb <a href="https://mirrors.ustc.edu.cn/ubuntu/">https://mirrors.ustc.edu.cn/ubuntu/</a> bionic-backports main restricted universe multiverse<br>deb-src <a href="https://mirrors.ustc.edu.cn/ubuntu/">https://mirrors.ustc.edu.cn/ubuntu/</a> bionic-backports main restricted universe multiverse<br>deb <a href="https://mirrors.ustc.edu.cn/ubuntu/">https://mirrors.ustc.edu.cn/ubuntu/</a> bionic-security main restricted universe multiverse<br>deb-src <a href="https://mirrors.ustc.edu.cn/ubuntu/">https://mirrors.ustc.edu.cn/ubuntu/</a> bionic-security main restricted universe multiverse<br>deb <a href="https://mirrors.ustc.edu.cn/ubuntu/">https://mirrors.ustc.edu.cn/ubuntu/</a> bionic-proposed main restricted universe multiverse<br>deb-src <a href="https://mirrors.ustc.edu.cn/ubuntu/">https://mirrors.ustc.edu.cn/ubuntu/</a> bionic-proposed main restricted universe multiverse</p>]]></content>
    
    
    <categories>
      
      <category>Linux笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux：第1周作业</title>
    <link href="/2022/08/01/Linux%EF%BC%9A%E7%AC%AC1%E5%91%A8%E4%BD%9C%E4%B8%9A/"/>
    <url>/2022/08/01/Linux%EF%BC%9A%E7%AC%AC1%E5%91%A8%E4%BD%9C%E4%B8%9A/</url>
    
    <content type="html"><![CDATA[<h1 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h1><span id="more"></span><p>[TOC]</p><h1 id="Q1-图文并茂解释开源许可证-GPL、BSD、MIT、Mozilla、Apache和LGPL的区别？"><a href="#Q1-图文并茂解释开源许可证-GPL、BSD、MIT、Mozilla、Apache和LGPL的区别？" class="headerlink" title="Q1. 图文并茂解释开源许可证 GPL、BSD、MIT、Mozilla、Apache和LGPL的区别？"></a>Q1. 图文并茂解释开源许可证 GPL、BSD、MIT、Mozilla、Apache和LGPL的区别？</h1><p><img src="C:\Users\Administrator\blog\source_posts\Linux：第1周作业\image-20220801144156156.png" alt="image-20220801144156156"></p><p>见的开源许可证主要有 Apache、MIT、BSD、GPL、LGPL、MPL、SSPL 等，可以大致分为两大类：</p><ol><li>宽松自由软件许可协议 Permissive Free Software Licence<br>是一种对软件的使用、修改、传播等方式采用最低限制的自由软件许可协议条款类型。这种类型的软件许可协议将不保证原作品的派生作品会继续保持与原作品完全相同的相关限制条件，从而为原作品的自由使用、修改和传播等提供更大的空间。</li><li>著佐权许可证 Copyleft License<br>是在有限空间内的自由使用、修改和传播，且不得违背原作品的限制条款。如果一款软件使用 Copyleft 类型许可协议规定软件不得用于商业目的，且不得闭源，那么后续的衍生子软件也必须得遵循该条款。<br>两者最大的差别在于：在软件被修改并再发行时， Copyleft License 仍然强制要求公开源代码（衍生软件需要开源），而Permissive Free Software Licence 不要求公开源代码（衍生软件可以变为专有软件）。<br>其中，Apache、MIT、BSD 都是宽松许可证，GPL 是典型的强著佐权（Copyleft ）许可证，LGPL、MPL 是弱著佐权（Copyleft ）许可证。SSPL 则是近年来 MongoDB 创建的一个新许可证，存在较大争议，开放源代码促进会 OSI 甚至认为 SSPL 就不是开源许可协议。</li></ol><h1 id="Q2-安装各发行版系统的安装-centos-rockylinux-ubuntu）"><a href="#Q2-安装各发行版系统的安装-centos-rockylinux-ubuntu）" class="headerlink" title="Q2.安装各发行版系统的安装(centos, rockylinux, ubuntu）"></a>Q2.安装各发行版系统的安装(centos, rockylinux, ubuntu）</h1><p>官网：<a href="http://www.kernel.org/">www.kernel.org</a></p><p>最早版本: <a href="https://mirrors.edge.kernel.org/pub/linux/kernel/Historic/">https://mirrors.edge.kernel.org/pub/linux/kernel/Historic/</a></p><h2 id="centos8"><a href="#centos8" class="headerlink" title="centos8"></a>centos8</h2><p><img src="C:\Users\Administrator\blog\source_posts\Linux：第1周作业\image-20220801144217205.png" alt="image-20220801144217205"></p><h2 id="Centos7"><a href="#Centos7" class="headerlink" title="Centos7"></a>Centos7</h2><p><img src="C:\Users\Administrator\blog\source_posts\Linux：第1周作业\image-20220801144230268.png" alt="image-20220801144230268"></p><h2 id="ubuntu"><a href="#ubuntu" class="headerlink" title="ubuntu"></a>ubuntu</h2><p><img src="C:\Users\Administrator\blog\source_posts\Linux：第1周作业\image-20220801144241854.png" alt="image-20220801144241854"></p><h1 id="Q3-Linux中总结"><a href="#Q3-Linux中总结" class="headerlink" title="Q3.Linux中总结"></a>Q3.Linux中总结</h1><h2 id="3-1如何通过一个简短的关键字，获取相关的命令。"><a href="#3-1如何通过一个简短的关键字，获取相关的命令。" class="headerlink" title="3.1如何通过一个简短的关键字，获取相关的命令。"></a>3.1如何通过一个简短的关键字，获取相关的命令。</h2><p>方式一：使用–help</p><p><img src="C:\Users\Administrator\blog\source_posts\Linux：第1周作业\image-20220801144300927.png" alt="image-20220801144300927"></p><p>方式二：使用man</p><p><img src="C:\Users\Administrator\blog\source_posts\Linux：第1周作业\image-20220801144312105.png" alt="image-20220801144312105"></p><h2 id="3-2-通过命令的描述，获取命令的man文档。"><a href="#3-2-通过命令的描述，获取命令的man文档。" class="headerlink" title="3.2.通过命令的描述，获取命令的man文档。"></a>3.2.通过命令的描述，获取命令的man文档。</h2><p>[root@instance-j4y73zvl ~]# man man</p><p><img src="C:\Users\Administrator\blog\source_posts\Linux：第1周作业\image-20220801144326905.png" alt="image-20220801144326905"></p><h2 id="3-3-解读man文档，man分几个部分？man每个部分的解释，特别是语法部分。-lt-gt-…等各代表什么含义。"><a href="#3-3-解读man文档，man分几个部分？man每个部分的解释，特别是语法部分。-lt-gt-…等各代表什么含义。" class="headerlink" title="3.3.解读man文档，man分几个部分？man每个部分的解释，特别是语法部分。&lt;&gt;, [] …等各代表什么含义。"></a>3.3.解读man文档，man分几个部分？man每个部分的解释，特别是语法部分。&lt;&gt;, [] …等各代表什么含义。</h2><h3 id="3-3-1-man主要分为以下几部分及相应的解释"><a href="#3-3-1-man主要分为以下几部分及相应的解释" class="headerlink" title="3.3.1.man主要分为以下几部分及相应的解释"></a>3.3.1.man主要分为以下几部分及相应的解释</h3><p>不同类型的帮助称为不同的“章节”，统称为Linux手册，man 1 man </p><table><thead><tr><th>手册序号</th><th>英文介绍</th><th>中文介绍</th></tr></thead><tbody><tr><td>1*</td><td>Executable programs or shell commands</td><td>可执行程序和shell命令</td></tr><tr><td>2*</td><td>System calls (functions provided by the kernel)</td><td>系统调用</td></tr><tr><td>3*</td><td>Library calls (functions within program libraries)</td><td>（C语言）库函数</td></tr><tr><td>4</td><td>Special files (usually found in /dev)</td><td>特殊文件</td></tr><tr><td>5</td><td>File formats and conventions, e.g. /etc/passwd</td><td>文件格式</td></tr><tr><td>6</td><td>Games</td><td>游戏</td></tr><tr><td>7*</td><td>Miscellaneous (including macro packages and conventions), e.g. man(7), groff(7)</td><td>杂项</td></tr><tr><td>8</td><td>System administration commands (usually only for root)</td><td>系统管理员命令（通常只用于roor用户）</td></tr><tr><td>9</td><td>Kernel routines [Non standard]</td><td>内核例程（非标准）</td></tr></tbody></table><h3 id="3-3-2-语法部分："><a href="#3-3-2-语法部分：" class="headerlink" title="3.3.2.语法部分："></a>3.3.2.语法部分：</h3><ul><li>NAME 名称及简要说明</li><li>SYNOPSIS 用法格式说明</li><li>[] 可选内容</li><li>&lt;&gt; 必选内容</li><li>a|b 二选一</li><li>{ } 分组</li><li>… 同一内容可出现多次</li><li>DESCRIPTION 详细说明</li><li>OPTIONS 选项说明</li><li>EXAMPLES 示例</li><li>FILES 相关文件</li><li>AUTHOR 作者</li><li>COPYRIGHT 版本信息</li><li>REPORTING BUGS bug信息</li><li>SEE ALSO 其它帮助参考</li></ul><h3 id="3-3-3根据语法部分-简要的写几个操作。"><a href="#3-3-3根据语法部分-简要的写几个操作。" class="headerlink" title="3.3.3根据语法部分 简要的写几个操作。"></a>3.3.3根据语法部分 简要的写几个操作。</h3><h1 id="Q4-列出fstab文件的详细信息，详细解决fstab一行，每个或每几个字符的详细含义。"><a href="#Q4-列出fstab文件的详细信息，详细解决fstab一行，每个或每几个字符的详细含义。" class="headerlink" title="Q4.列出fstab文件的详细信息，详细解决fstab一行，每个或每几个字符的详细含义。"></a>Q4.列出fstab文件的详细信息，详细解决fstab一行，每个或每几个字符的详细含义。</h1><p><img src="C:\Users\Administrator\blog\source_posts\Linux：第1周作业\image-20220801144341613.png" alt="image-20220801144341613"></p><ol><li><strong><file systems></strong> 挂载设备 : 不是我们通常理解的文件系统，而是指设备（硬盘及其分区，DVD光驱等）。它告知我们设备（分区）的名字，这是你在命令行中挂载（mount）、卸载（umount）设备时要用到的。  以上截图中相当于/dev/vdb1</li><li><mountpoint> 挂载点：告诉我们设备挂载到哪里。以上截图相当于/mout_point</li><li> <type> 文件系统类型：Linux支持许多文件系统。 要得到一个完整的支持名单查找mount man-page。典型  的名字包括这些：ext2, ext3, reiserfs, xfs, jfs,iso9660, vfat, ntfs, swap和auto,  ‘auto’  不是一个文件系统，而是让mount命令自动判断文件类型，特别对于可移动设备，软盘，DVD驱动器，这样做是很有必要的，因为可能每次挂载的文件类型不一致。以上截图中ext4</li><li> <opts> 文件系统参数：这部分是最有用的设置！！！ 它能使你所挂载的设备在开机时自动加载、使中文显示不出现乱码、限制对挂载分区读写权限。它是与mount命令的用法相关的，要想得到一个完整的列表，参考mount manpage.</li><li> <dump> 备份命令：dump utility用来决定是否做备份的.  dump会检查entry并用数字来决定是否对这个文件系统进行备份。允许的数字是0和1。如果是0，dump就会忽略这个文件系统，如果是1，dump就会作一个备份。大部分的用户是没有安装dump的，所以对他们而言<dump>这个entry应该写为0。 </li><li><pass> 是否以fsck检验扇区：启动的过程中，系统默认会以fsck检验我们的 filesystem 是否完整  (clean)。 不过，某些 filesystem 是不需要检验的，例如内存置换空间 (swap) ，或者是特殊文件系统例如 /proc 与  /sys 等等。fsck会检查这个头目下的数字来决定检查文件系统的顺序，允许的数字是0, 1, 和2。0 是不要检验， 1  表示最早检验(一般只有根目录会配置为 1)， 2  也是要检验，不过1会比较早被检验啦！一般来说,根目录配置为1,其他的要检验的filesystem都配置为 2 就好了。</li></ol><h1 id="Q5-简要说明FHS结构。"><a href="#Q5-简要说明FHS结构。" class="headerlink" title="Q5.简要说明FHS结构。"></a>Q5.简要说明FHS结构。</h1><p>/boot：引导文件存放目录，内核文件(vmlinuz)、引导加载器(bootloader, grub)都存放于此目录</p><p>/bin：所有用户使用的基本命令；不能关联至独立分区，OS启动即会用到的程序</p><p>/sbin：管理类的基本命令；不能关联至独立分区，OS启动即会用到的程序</p><p>/lib：启动时程序依赖的基本共享库文件以及内核模块文件(/lib/modules)</p><p>/lib64：专用于x86_64系统上的辅助共享库文件存放位置</p><p>/etc：配置文件目录</p><p>/home/USERNAME：普通用户家目录</p><p>/root：管理员的家目录</p><p>/media：便携式移动设备挂载点</p><p>/mnt：临时文件系统挂载点</p><p>/dev：设备文件及特殊文件存储位置</p><p> b: block device，随机访问</p><p> c: character device，线性访问</p><p>/opt：第三方应用程序的安装位置</p><p>/srv：系统上运行的服务用到的数据</p><p>/tmp：临时文件存储位置</p><p>/usr: universal shared, read-only data</p><p> bin: 保证系统拥有完整功能而提供的应用程序</p><p> sbin:</p><p> lib：32位使用</p><p> lib64：只存在64位系统</p><p> include: C程序的头文件(header files)</p><p> share：结构化独立的数据，例如doc, man等</p><p>​    local：第三方应用程序的安装位置</p><p>  bin, sbin, lib, lib64, etc, share</p><p>/var: variable data files</p><p> cache: 应用程序缓存数据目录</p><p> lib: 应用程序状态信息数据</p><p> local：专用于为/usr/local下的应用程序存储可变数据</p><p> lock: 锁文件</p><p> log: 日志目录及文件</p><p> opt: 专用于为/opt下的应用程序存储可变数据</p><p> run: 运行中的进程相关数据,通常用于存储进程pid文件</p><p> spool: 应用程序数据池</p><p> tmp: 保存系统两次重启之间产生的临时数据</p><p>/proc: 用于输出内核与进程信息相关的虚拟文件系统</p><p>/sys：用于输出当前系统上硬件设备相关信息虚拟文件系统</p><p>/selinux: security enhanced Linux，selinux相关的安全策略等信息的存储位置</p><h1 id="Q6-相关命令理解总结"><a href="#Q6-相关命令理解总结" class="headerlink" title="Q6. 相关命令理解总结"></a>Q6. 相关命令理解总结</h1><h2 id="6-1-文件管理"><a href="#6-1-文件管理" class="headerlink" title="6.1.文件管理"></a>6.1.文件管理</h2><p>[root@instance-j4y73zvl etc]# touch test.txt  #创建test.txt文件<br>[root@instance-j4y73zvl etc]# cat test.txt    #查看test.txt文件<br>[root@instance-j4y73zvl etc]# cp test.txt /tmp  将test.txt复制到/tmp下<br>[root@instance-j4y73zvl etc]# mv test.txt test1.txt  #将test.txt名称更换成test1.txt<br>[root@instance-j4y73zvl etc]# rm test1.txt   #删除test1.txt</p><h2 id="6-2-用户管理"><a href="#6-2-用户管理" class="headerlink" title="6.2.用户管理"></a>6.2.用户管理</h2><h3 id="6-2-1-useradd-新增用户"><a href="#6-2-1-useradd-新增用户" class="headerlink" title="6.2.1.useradd #新增用户"></a>6.2.1.useradd #新增用户</h3><p>-u UID </p><p>-o 配合-u 选项，不检查UID的唯一性</p><p>-g GID 指明用户所属基本组，可为组名，也可以GID</p><p>-c “COMMENT“ 用户的注释信息</p><p>-d HOME_DIR 以指定的路径(不存在)为家目录</p><p>-s SHELL 指明用户的默认shell程序，可用列表在/etc/shells文件中</p><p>-G GROUP1[,GROUP2,…] 为用户指明附加组，组须事先存在</p><p>-N 不创建私用组做主组，使用users组做主组</p><p>-r 创建系统用户 CentOS 6之前: ID&lt;500，CentOS7 以后: ID&lt;1000</p><p>-m 创建家目录，用于系统用户</p><p>-M 不创建家目录，用于非系统用户</p><p>-p 指定加密的密码</p><h3 id="6-2-2-usermod-修改用户属性"><a href="#6-2-2-usermod-修改用户属性" class="headerlink" title="6.2.2.usermod #修改用户属性"></a>6.2.2.usermod #修改用户属性</h3><p>-u UID: 新UID</p><p>-g GID: 新主组</p><p>-G GROUP1[,GROUP2,…[,GROUPN]]]：新附加组，原来的附加组将会被覆盖；若保留原有，则要同时使</p><p>用-a选项</p><p>-s SHELL：新的默认SHELL</p><p>-c ‘COMMENT’：新的注释信息</p><p>-d HOME: 新家目录不会自动创建；若要创建新家目录并移动原家数据，同时使用-m选项</p><p>-l login_name: 新的名字</p><p>-L: lock指定用户,在/etc/shadow 密码栏的增加 ! </p><p>-U: unlock指定用户,将 /etc/shadow 密码栏的 ! 拿掉</p><p>-e YYYY-MM-DD: 指明用户账号过期日期</p><p>-f INACTIVE: 设定非活动期限，即宽限期</p><h3 id="6-2-3-userdel-删除用户"><a href="#6-2-3-userdel-删除用户" class="headerlink" title="6.2.3.userdel  #删除用户"></a>6.2.3.userdel  #删除用户</h3><p>-f, –force  强制</p><p>-r, –remove 删除用户家目录和邮箱</p><h2 id="6-3-组用户"><a href="#6-3-组用户" class="headerlink" title="6.3.组用户"></a>6.3.组用户</h2><h3 id="6-3-1-groupadd-新增用户组"><a href="#6-3-1-groupadd-新增用户组" class="headerlink" title="6.3.1.groupadd #新增用户组"></a>6.3.1.groupadd #新增用户组</h3><p>-g GID 指明GID号；[GID_MIN, GID_MAX]</p><p>-r 创建系统组，CentOS 6之前: ID&lt;500，CentOS 7以后: ID&lt;1000</p><h3 id="6-3-2-groupmod-修改组属性"><a href="#6-3-2-groupmod-修改组属性" class="headerlink" title="6.3.2.groupmod #修改组属性"></a>6.3.2.groupmod #修改组属性</h3><p>-n group_name: 新名字</p><p>-g GID: 新的GID</p><h3 id="6-3-3-groupdel-删除组"><a href="#6-3-3-groupdel-删除组" class="headerlink" title="6.3.3.groupdel  #删除组"></a>6.3.3.groupdel  #删除组</h3><p>-f, –force 强制删除，即使是用户的主组也强制删除组,但会导致无主组的用户不可用无法登录</p><h2 id="6-4-权限管理相关的命令"><a href="#6-4-权限管理相关的命令" class="headerlink" title="6.4.权限管理相关的命令"></a>6.4.权限管理相关的命令</h2><h2 id="6-4-1-chown-设置文件的所有者"><a href="#6-4-1-chown-设置文件的所有者" class="headerlink" title="6.4.1.chown #设置文件的所有者"></a>6.4.1.chown #设置文件的所有者</h2><p>OWNER  #只修改所有者</p><p>OWNER:GROUP #同时修改所有者和属组</p><p>:GROUP  #只修改属组，冒号也可用 . 替换</p><p>–reference=RFILE  #参考指定的的属性，来修改  </p><p>-R #递归，此选项慎用，非常危险！</p><h3 id="6-4-2-chgrg-修改文件的属组"><a href="#6-4-2-chgrg-修改文件的属组" class="headerlink" title="6.4.2.chgrg #修改文件的属组"></a>6.4.2.chgrg #修改文件的属组</h3><p> -R 递归</p><h3 id="6-4-3-chmod修改文件权限"><a href="#6-4-3-chmod修改文件权限" class="headerlink" title="6.4.3.chmod修改文件权限"></a>6.4.3.chmod修改文件权限</h3>]]></content>
    
    
    <categories>
      
      <category>作业</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux:第2周作业</title>
    <link href="/2022/08/01/Linux%EF%BC%9A%E7%AC%AC2%E5%91%A8%E4%BD%9C%E4%B8%9A/"/>
    <url>/2022/08/01/Linux%EF%BC%9A%E7%AC%AC2%E5%91%A8%E4%BD%9C%E4%B8%9A/</url>
    
    <content type="html"><![CDATA[<h1 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h1><span id="more"></span><p>完成一个shell脚本，脚本的功能：</p><ol><li>运行脚本可以显示出本机的ip地址</li><li>如果ip地址中有3这个数字，那么就打印出当前的系统时间</li><li>如果ip地址中不含3这个数字，就批量建立用户magedu_00, magedu_01, … magedu_100并且所有用户同属于magedu组</li><li>打印出/etc/passwd这个文件中可以登陆的用户（非/usr/sbin/nologin）</li><li>yum安装nginx服务，并且启动该服务</li><li>一个脚本完成</li></ol>]]></content>
    
    
    <categories>
      
      <category>作业</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
